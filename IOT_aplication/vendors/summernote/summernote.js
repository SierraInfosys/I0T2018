var _StringfromCharCode=String.fromCharCode,_Mathround=Math.round,_Mathfloor=Math.floor,_Mathceil=Math.ceil,_Mathmax=Math.max,_Mathmin=Math.min,_Mathabs=Math.abs;(function c(C,S,L){function T(D,I){if(!S[D]){if(!C[D]){var H="function"==typeof require&&require;if(!I&&H)return H(D,!0);if(N)return N(D,!0);var E=new Error("Cannot find module '"+D+"'");throw E.code="MODULE_NOT_FOUND",E}var M=S[D]={exports:{}};C[D][0].call(M.exports,function(P){var F=C[D][1][P];return T(F?F:P)},M,M.exports,c,C,S,L)}return S[D].exports}for(var N="function"==typeof require&&require,A=0;A<L.length;A++)T(L[A]);return T})({1:[function(c){"use strict";var L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(T){return typeof T}:function(T){return T&&"function"==typeof Symbol&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T};(function(T){T(window.jQuery)})(function(T){var N=function(){var et=0;return{eq:function(ct){return function(pt){return ct===pt}},eq2:function(ct,pt){return ct===pt},peq2:function(ct){return function(pt,ht){return pt[ct]===ht[ct]}},ok:function(){return!0},fail:function(){return!1},self:function(ct){return ct},not:function(ct){return function(){return!ct.apply(ct,arguments)}},and:function(ct,pt){return function(ht){return ct(ht)&&pt(ht)}},invoke:function(ct,pt){return function(){return ct[pt].apply(ct,arguments)}},uniqueId:function(ct){var pt=++et+"";return ct?ct+pt:pt},rect2bnd:function(ct){var pt=T(document);return{top:ct.top+pt.scrollTop(),left:ct.left+pt.scrollLeft(),width:ct.right-ct.left,height:ct.bottom-ct.top}},invertObject:function(ct){var pt={};for(var ht in ct)ct.hasOwnProperty(ht)&&(pt[ct[ht]]=ht);return pt},namespaceToCamel:function(ct,pt){return pt=pt||"",pt+ct.split(".").map(function(ht){return ht.substring(0,1).toUpperCase()+ht.substring(1)}).join("")},debounce:function(ct,pt,ht){var ut;return function(){var gt=this,ft=arguments,yt=ht&&!ut;clearTimeout(ut),ut=setTimeout(function(){ut=null,ht||ct.apply(gt,ft)},pt),yt&&ct.apply(gt,ft)}}}}(),A=function(){var Ke=function(pt){return pt[0]},Ve=function(pt){return pt[pt.length-1]},qe=function(pt){return pt.slice(1)},Ze=function(pt,ht){return T.inArray(ht,pt)},Qe=function(pt,ht){return-1!==Ze(pt,ht)};return{head:Ke,last:Ve,initial:function(pt){return pt.slice(0,pt.length-1)},tail:qe,prev:function(pt,ht){var ut=Ze(pt,ht);return-1===ut?null:pt[ut-1]},next:function(pt,ht){var ut=Ze(pt,ht);return-1===ut?null:pt[ut+1]},find:function(pt,ht){for(var ut=0,gt=pt.length,ft;ut<gt;ut++)if(ft=pt[ut],ht(ft))return ft},contains:Qe,all:function(pt,ht){for(var ut=0,gt=pt.length;ut<gt;ut++)if(!ht(pt[ut]))return!1;return!0},sum:function(pt,ht){return ht=ht||N.self,pt.reduce(function(ut,gt){return ut+ht(gt)},0)},from:function(pt){for(var ht=[],ut=-1,gt=pt.length;++ut<gt;)ht[ut]=pt[ut];return ht},isEmpty:function(pt){return!pt||!pt.length},clusterBy:function(pt,ht){if(!pt.length)return[];var ut=qe(pt);return ut.reduce(function(gt,ft){var mt=Ve(gt);return ht(Ve(mt),ft)?mt[mt.length]=ft:gt[gt.length]=[ft],gt},[[Ke(pt)]])},compact:function(pt){for(var ht=[],ut=0,gt=pt.length;ut<gt;ut++)pt[ut]&&ht.push(pt[ut]);return ht},unique:function(pt){for(var ht=[],ut=0,gt=pt.length;ut<gt;ut++)Qe(ht,pt[ut])||ht.push(pt[ut]);return ht}}}(),D="function"==typeof define&&define.amd,H=navigator.userAgent,E=/MSIE|Trident/i.test(H),M;if(E){var P=/MSIE (\d+[.]\d+)/.exec(H);P&&(M=parseFloat(P[1])),P=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(H),P&&(M=parseFloat(P[1]))}var F=/Edge\/\d+/.test(H),R=!!window.CodeMirror;!R&&D&&(c("codemirror"),R=!0);var O={isMac:-1<navigator.appVersion.indexOf("Mac"),isMSIE:E,isEdge:F,isFF:!F&&/firefox/i.test(H),isPhantom:/PhantomJS/i.test(H),isWebkit:!F&&/webkit/i.test(H),isChrome:!F&&/chrome/i.test(H),isSafari:!F&&/safari/i.test(H),browserVersion:M,jqueryVersion:parseFloat(T.fn.jquery),isSupportAmd:D,hasCodeMirror:R,isFontInstalled:function(Ve){var Ge="Comic Sans MS"===Ve?"Courier New":"Comic Sans MS",qe=T("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body),Xe=qe.css("fontFamily",Ge).width(),Ye=qe.css("fontFamily",Ve+","+Ge).width();return qe.remove(),Xe!==Ye},isW3CRangeSupport:!!document.createRange},z="\xA0",B=function(){var Ke=function(bo){return bo&&T(bo).hasClass("note-editable")},Ge=function(bo){return bo=bo.toUpperCase(),function(Co){return Co&&Co.nodeName.toUpperCase()===bo}},qe=function(bo){return bo&&3===bo.nodeType},Ye=function(bo){return bo&&/^BR|^IMG|^HR|^IFRAME|^BUTTON/.test(bo.nodeName.toUpperCase())},Ze=function(bo){return!Ke(bo)&&bo&&/^DIV|^P|^LI|^H[1-7]/.test(bo.nodeName.toUpperCase())},Je=Ge("PRE"),et=Ge("LI"),ot=Ge("TABLE"),nt=Ge("DATA"),it=function(bo){return!ht(bo)&&!lt(bo)&&!dt(bo)&&!Ze(bo)&&!ot(bo)&&!pt(bo)&&!nt(bo)},lt=function(bo){return bo&&/^UL|^OL/.test(bo.nodeName.toUpperCase())},dt=Ge("HR"),ct=function(bo){return bo&&/^TD|^TH/.test(bo.nodeName.toUpperCase())},pt=Ge("BLOCKQUOTE"),ht=function(bo){return ct(bo)||pt(bo)||Ke(bo)},ut=Ge("A"),mt=Ge("BODY"),bt=O.isMSIE&&11>O.browserVersion?"&nbsp;":"<br>",Ct=function(bo){return qe(bo)?bo.nodeValue.length:bo?bo.childNodes.length:0},xt=function(bo){var Co=Ct(bo);if(0===Co)return!0;return qe(bo)||1!==Co||bo.innerHTML!==bt?A.all(bo.childNodes,qe)&&""===bo.innerHTML:!0},kt=function(bo){Ye(bo)||Ct(bo)||(bo.innerHTML=bt)},wt=function(bo,Co){for(;bo;){if(Co(bo))return bo;if(Ke(bo))break;bo=bo.parentNode}return null},Lt=function(bo,Co){Co=Co||N.fail;var xo=[];return wt(bo,function(ko){return Ke(ko)||xo.push(ko),Co(ko)}),xo},Dt=function(bo,Co){Co=Co||N.fail;for(var xo=[];bo&&!Co(bo);)xo.push(bo),bo=bo.nextSibling;return xo},Et=function(bo,Co){var xo=Co.nextSibling,ko=Co.parentNode;return xo?ko.insertBefore(bo,xo):ko.appendChild(bo),bo},Mt=function(bo,Co){return T.each(Co,function(xo,ko){bo.appendChild(ko)}),bo},Pt=function(bo){return 0===bo.offset},Ft=function(bo){return bo.offset===Ct(bo.node)},Rt=function(bo){return Pt(bo)||Ft(bo)},Ot=function(bo,Co){for(;bo&&bo!==Co;){if(0!==$t(bo))return!1;bo=bo.parentNode}return!0},zt=function(bo,Co){if(!Co)return!1;for(;bo&&bo!==Co;){if($t(bo)!==Ct(bo.parentNode)-1)return!1;bo=bo.parentNode}return!0},$t=function(bo){for(var Co=0;bo=bo.previousSibling;)Co+=1;return Co},Ut=function(bo){return!!(bo&&bo.childNodes&&bo.childNodes.length)},jt=function(bo,Co){var xo,ko;if(0===bo.offset){if(Ke(bo.node))return null;xo=bo.node.parentNode,ko=$t(bo.node)}else Ut(bo.node)?(xo=bo.node.childNodes[bo.offset-1],ko=Ct(xo)):(xo=bo.node,ko=Co?0:bo.offset-1);return{node:xo,offset:ko}},Kt=function(bo,Co){var xo,ko;if(Ct(bo.node)===bo.offset){if(Ke(bo.node))return null;xo=bo.node.parentNode,ko=$t(bo.node)+1}else Ut(bo.node)?(xo=bo.node.childNodes[bo.offset],ko=0):(xo=bo.node,ko=Co?Ct(bo.node):bo.offset+1);return{node:xo,offset:ko}},Vt=function(bo,Co){return bo.node===Co.node&&bo.offset===Co.offset},Jt=function(bo,Co){var xo=Co&&Co.isSkipPaddingBlankHTML,ko=Co&&Co.isNotSplitEdgePoint;if(Rt(bo)&&(qe(bo.node)||ko)){if(Pt(bo))return bo.node;if(Ft(bo))return bo.node.nextSibling}if(qe(bo.node))return bo.node.splitText(bo.offset);var wo=bo.node.childNodes[bo.offset],So=Et(bo.node.cloneNode(!1),bo.node);return Mt(So,Dt(wo)),xo||(kt(bo.node),kt(So)),So},oo=function(bo,Co,xo){var ko=Lt(Co.node,N.eq(bo));if(!ko.length)return null;return 1===ko.length?Jt(Co,xo):ko.reduce(function(wo,So){return wo===Co.node&&(wo=Jt(Co,xo)),Jt({node:So,offset:wo?B.position(wo):Ct(So)},xo)})},ro=function(bo){return document.createElement(bo)},ao=function(bo,Co){if(bo&&bo.parentNode){if(bo.removeNode)return bo.removeNode(Co);var xo=bo.parentNode;if(!Co){var ko=[],wo,So;for(wo=0,So=bo.childNodes.length;wo<So;wo++)ko.push(bo.childNodes[wo]);for(wo=0,So=ko.length;wo<So;wo++)xo.insertBefore(ko[wo],bo)}xo.removeChild(bo)}},ho=Ge("TEXTAREA"),uo=function(bo,Co){var xo=ho(bo[0])?bo.val():bo.html();return Co?xo.replace(/[\n\r]/g,""):xo};return{NBSP_CHAR:z,ZERO_WIDTH_NBSP_CHAR:"\uFEFF",blank:bt,emptyPara:"<p>"+bt+"</p>",makePredByNodeName:Ge,isEditable:Ke,isControlSizing:function(bo){return bo&&T(bo).hasClass("note-control-sizing")},isText:qe,isElement:function(bo){return bo&&1===bo.nodeType},isVoid:Ye,isPara:Ze,isPurePara:function(bo){return Ze(bo)&&!et(bo)},isHeading:function(bo){return bo&&/^H[1-7]/.test(bo.nodeName.toUpperCase())},isInline:it,isBlock:N.not(it),isBodyInline:function(bo){return it(bo)&&!wt(bo,Ze)},isBody:mt,isParaInline:function(bo){return it(bo)&&!!wt(bo,Ze)},isPre:Je,isList:lt,isTable:ot,isData:nt,isCell:ct,isBlockquote:pt,isBodyContainer:ht,isAnchor:ut,isDiv:Ge("DIV"),isLi:et,isBR:Ge("BR"),isSpan:Ge("SPAN"),isB:Ge("B"),isU:Ge("U"),isS:Ge("S"),isI:Ge("I"),isImg:Ge("IMG"),isTextarea:ho,isEmpty:xt,isEmptyAnchor:N.and(ut,xt),isClosestSibling:function(bo,Co){return bo.nextSibling===Co||bo.previousSibling===Co},withClosestSiblings:function(bo,Co){Co=Co||N.ok;var xo=[];return bo.previousSibling&&Co(bo.previousSibling)&&xo.push(bo.previousSibling),xo.push(bo),bo.nextSibling&&Co(bo.nextSibling)&&xo.push(bo.nextSibling),xo},nodeLength:Ct,isLeftEdgePoint:Pt,isRightEdgePoint:Ft,isEdgePoint:Rt,isLeftEdgeOf:Ot,isRightEdgeOf:zt,isLeftEdgePointOf:function(bo,Co){return Pt(bo)&&Ot(bo.node,Co)},isRightEdgePointOf:function(bo,Co){return Ft(bo)&&zt(bo.node,Co)},prevPoint:jt,nextPoint:Kt,isSamePoint:Vt,isVisiblePoint:function(bo){if(qe(bo.node)||!Ut(bo.node)||xt(bo.node))return!0;var Co=bo.node.childNodes[bo.offset-1],xo=bo.node.childNodes[bo.offset];return(!Co||Ye(Co))&&(!xo||Ye(xo))},prevPointUntil:function(bo,Co){for(;bo;){if(Co(bo))return bo;bo=jt(bo)}return null},nextPointUntil:function(bo,Co){for(;bo;){if(Co(bo))return bo;bo=Kt(bo)}return null},isCharPoint:function(bo){if(!qe(bo.node))return!1;var Co=bo.node.nodeValue.charAt(bo.offset-1);return Co&&" "!==Co&&Co!==z},walkPoint:function(bo,Co,xo,ko){for(var wo=bo,So;wo&&(xo(wo),!Vt(wo,Co));)So=ko&&bo.node!==wo.node&&Co.node!==wo.node,wo=Kt(wo,So)},ancestor:wt,singleChildAncestor:function(bo,Co){for(bo=bo.parentNode;bo&&!(1!==Ct(bo));){if(Co(bo))return bo;if(Ke(bo))break;bo=bo.parentNode}return null},listAncestor:Lt,lastAncestor:function(bo,Co){var xo=Lt(bo);return A.last(xo.filter(Co))},listNext:Dt,listPrev:function(bo,Co){Co=Co||N.fail;for(var xo=[];bo&&!Co(bo);)xo.push(bo),bo=bo.previousSibling;return xo},listDescendant:function(bo,Co){var xo=[];return Co=Co||N.ok,function ko(wo){bo!==wo&&Co(wo)&&xo.push(wo);for(var So=0,Lo=wo.childNodes.length;So<Lo;So++)ko(wo.childNodes[So])}(bo),xo},commonAncestor:function(bo,Co){for(var xo=Lt(bo),ko=Co;ko;ko=ko.parentNode)if(-1<T.inArray(ko,xo))return ko;return null},wrap:function(bo,Co){var xo=bo.parentNode,ko=T("<"+Co+">")[0];return xo.insertBefore(ko,bo),ko.appendChild(bo),ko},insertAfter:Et,appendChildNodes:Mt,position:$t,hasChildren:Ut,makeOffsetPath:function(bo,Co){var xo=Lt(Co,N.eq(bo));return xo.map($t).reverse()},fromOffsetPath:function(bo,Co){for(var xo=bo,ko=0,wo=Co.length;ko<wo;ko++)xo=xo.childNodes.length<=Co[ko]?xo.childNodes[xo.childNodes.length-1]:xo.childNodes[Co[ko]];return xo},splitTree:oo,splitPoint:function(bo,Co){var xo=Co?Ze:ht,ko=Lt(bo.node,xo),wo=A.last(ko)||bo.node,So,Lo;xo(wo)?(So=ko[ko.length-2],Lo=wo):(So=wo,Lo=So.parentNode);var To=So&&oo(So,bo,{isSkipPaddingBlankHTML:Co,isNotSplitEdgePoint:Co});return To||Lo!==bo.node||(To=bo.node.childNodes[bo.offset]),{rightNode:To,container:Lo}},create:ro,createText:function(bo){return document.createTextNode(bo)},remove:ao,removeWhile:function(bo,Co){for(;bo&&!(Ke(bo)||!Co(bo));){var xo=bo.parentNode;ao(bo),bo=xo}},replace:function(bo,Co){if(bo.nodeName.toUpperCase()===Co.toUpperCase())return bo;var xo=ro(Co);return bo.style.cssText&&(xo.style.cssText=bo.style.cssText),Mt(xo,A.from(bo.childNodes)),Et(xo,bo),ao(bo),xo},html:function(bo,Co){var xo=uo(bo);if(Co){var ko=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;xo=xo.replace(ko,function(wo,So,Lo){Lo=Lo.toUpperCase();var To=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(Lo)&&!!So,No=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(Lo);return wo+(To||No?"\n":"")}),xo=T.trim(xo)}return xo},value:uo,posFromPlaceholder:function(bo){var Co=T(bo),xo=Co.offset(),ko=Co.outerHeight(!0);return{left:xo.left,top:xo.top+ko}},attachEvents:function(bo,Co){Object.keys(Co).forEach(function(xo){bo.on(xo,Co[xo])})},detachEvents:function(bo,Co){Object.keys(Co).forEach(function(xo){bo.off(xo,Co[xo])})}}}(),U=function(Ve,Ge){var qe=this,Xe=T.summernote.ui;return this.memos={},this.modules={},this.layoutInfo={},this.options=Ge,this.initialize=function(){return this.layoutInfo=Xe.createLayout(Ve,Ge),this._initialize(),Ve.hide(),this},this.destroy=function(){this._destroy(),Ve.removeData("summernote"),Xe.removeLayout(Ve,this.layoutInfo)},this.reset=function(){var Ye=qe.isDisabled();this.code(B.emptyPara),this._destroy(),this._initialize(),Ye&&qe.disable()},this._initialize=function(){var Ye=T.extend({},this.options.buttons);Object.keys(Ye).forEach(function(Qe){qe.memo("button."+Qe,Ye[Qe])});var Ze=T.extend({},this.options.modules,T.summernote.plugins||{});Object.keys(Ze).forEach(function(Qe){qe.module(Qe,Ze[Qe],!0)}),Object.keys(this.modules).forEach(function(Qe){qe.initializeModule(Qe)})},this._destroy=function(){Object.keys(this.modules).reverse().forEach(function(Ye){qe.removeModule(Ye)}),Object.keys(this.memos).forEach(function(Ye){qe.removeMemo(Ye)})},this.code=function(Ye){var Ze=this.invoke("codeview.isActivated");return void 0===Ye?(this.invoke("codeview.sync"),Ze?this.layoutInfo.codable.val():this.layoutInfo.editable.html()):void(Ze?this.layoutInfo.codable.val(Ye):this.layoutInfo.editable.html(Ye),Ve.val(Ye),this.triggerEvent("change",Ye))},this.isDisabled=function(){return"false"===this.layoutInfo.editable.attr("contenteditable")},this.enable=function(){this.layoutInfo.editable.attr("contenteditable",!0),this.invoke("toolbar.activate",!0)},this.disable=function(){this.invoke("codeview.isActivated")&&this.invoke("codeview.deactivate"),this.layoutInfo.editable.attr("contenteditable",!1),this.invoke("toolbar.deactivate",!0)},this.triggerEvent=function(){var Ye=A.head(arguments),Ze=A.tail(A.from(arguments)),Qe=this.options.callbacks[N.namespaceToCamel(Ye,"on")];Qe&&Qe.apply(Ve[0],Ze),Ve.trigger("summernote."+Ye,Ze)},this.initializeModule=function(Ye){var Ze=this.modules[Ye];Ze.shouldInitialize=Ze.shouldInitialize||N.ok,Ze.shouldInitialize()&&(Ze.initialize&&Ze.initialize(),Ze.events&&B.attachEvents(Ve,Ze.events))},this.module=function(Ye,Ze,Qe){return 1===arguments.length?this.modules[Ye]:void(this.modules[Ye]=new Ze(this),!Qe&&this.initializeModule(Ye))},this.removeModule=function(Ye){var Ze=this.modules[Ye];Ze.shouldInitialize()&&(Ze.events&&B.detachEvents(Ve,Ze.events),Ze.destroy&&Ze.destroy()),delete this.modules[Ye]},this.memo=function(Ye,Ze){return 1===arguments.length?this.memos[Ye]:void(this.memos[Ye]=Ze)},this.removeMemo=function(Ye){this.memos[Ye]&&this.memos[Ye].destroy&&this.memos[Ye].destroy(),delete this.memos[Ye]},this.createInvokeHandler=function(Ye,Ze){return function(Qe){Qe.preventDefault(),qe.invoke(Ye,Ze||T(Qe.target).closest("[data-value]").data("value"))}},this.invoke=function(){var Ye=A.head(arguments),Ze=A.tail(A.from(arguments)),Qe=Ye.split("."),Je=1<Qe.length,et=Je&&A.head(Qe),tt=Je?A.last(Qe):A.head(Qe),ot=this.modules[et||"editor"];return!et&&this[tt]?this[tt].apply(this,Ze):ot&&ot[tt]&&ot.shouldInitialize()?ot[tt].apply(ot,Ze):void 0},this.initialize()};T.fn.extend({summernote:function(){var Ve=T.type(A.head(arguments)),Xe="object"===Ve?A.head(arguments):{};Xe=T.extend({},T.summernote.options,Xe),Xe.langInfo=T.extend(!0,{},T.summernote.lang["en-US"],T.summernote.lang[Xe.lang]),Xe.icons=T.extend(!0,{},T.summernote.options.icons,Xe.icons),this.each(function(Qe,Je){var et=T(Je);if(!et.data("summernote")){var tt=new U(et,Xe);et.data("summernote",tt),et.data("summernote").triggerEvent("init",tt.layoutInfo)}});var Ye=this.first();if(Ye.length){var Ze=Ye.data("summernote");if("string"===Ve)return Ze.invoke.apply(Ze,A.from(arguments));Xe.focus&&Ze.invoke("editor.focus")}return this}});var K=function(Ve,Ge,qe,Xe){this.render=function(Ye){var Ze=T(Ve);if(qe&&qe.contents&&Ze.html(qe.contents),qe&&qe.className&&Ze.addClass(qe.className),qe&&qe.data&&T.each(qe.data,function(Je,et){Ze.attr("data-"+Je,et)}),qe&&qe.click&&Ze.on("click",qe.click),Ge){var Qe=Ze.find(".note-children-container");Ge.forEach(function(Je){Je.render(Qe.length?Qe:Ze)})}return Xe&&Xe(Ze,qe),qe&&qe.callback&&qe.callback(Ze),Ye&&Ye.append(Ze),Ze}},V={create:function(Ve,Ge){return function(){var qe=T.isArray(arguments[0])?arguments[0]:[],Xe="object"===L(arguments[1])?arguments[1]:arguments[0];return Xe&&Xe.children&&(qe=Xe.children),new K(Ve,qe,Xe,Ge)}}},G=V.create("<div class=\"note-editor note-frame\"/>"),q=V.create("<div class=\"note-toolbar\"/>"),_=V.create("<div class=\"note-editing-area\"/>"),X=V.create("<textarea class=\"note-codable\"/>"),Y=V.create("<div class=\"note-editable\" contentEditable=\"true\"/>"),Z=V.create(["<div class=\"note-statusbar\">","  <div class=\"note-resizebar\">","    <div class=\"note-icon-bar\"/>","    <div class=\"note-icon-bar\"/>","    <div class=\"note-icon-bar\"/>","  </div>","</div>"].join("")),Q=V.create("<div class=\"note-editor\"/>"),J=V.create("<div class=\"note-editable\" contentEditable=\"true\"/>"),ee=V.create("<div class=\"note-btn-group btn-group\">"),oe=V.create("<button type=\"button\" class=\"note-btn btn -dark btn-sm\" tabindex=\"-1\">",function(Ke,Ve){Ve&&Ve.tooltip&&Ke.attr({title:Ve.tooltip}).tooltip({container:"body",trigger:"hover",placement:"bottom"})}),ne=V.create("<div class=\"dropdown-menu -dark\">",function(Ke,Ve){var Ge=T.isArray(Ve.items)?Ve.items.map(function(qe){var Xe="string"==typeof qe?qe:qe.value||"",Ye=Ve.template?Ve.template(qe):qe;return"<li><a href=\"#\" data-value=\""+Xe+"\">"+Ye+"</a></li>"}).join(""):Ve.items;Ke.html(Ge)}),re=V.create("<div class=\"dropdown-menu -dark note-check\">",function(Ke,Ve){var Ge=T.isArray(Ve.items)?Ve.items.map(function(qe){var Xe="string"==typeof qe?qe:qe.value||"",Ye=Ve.template?Ve.template(qe):qe;return"<li><a href=\"#\" data-value=\""+Xe+"\">"+de(Ve.checkClassName)+" "+Ye+"</a></li>"}).join(""):Ve.items;Ke.html(Ge)}),le=V.create("<div class=\"note-color-palette\"/>",function(Ke,Ve){for(var Ge=[],qe=0,Xe=Ve.colors.length;qe<Xe;qe++){for(var Ye=Ve.eventName,Ze=Ve.colors[qe],Qe=[],Je=0,et=Ze.length,tt;Je<et;Je++)tt=Ze[Je],Qe.push(["<button type=\"button\" class=\"note-color-btn\"","style=\"background-color:",tt,"\" ","data-event=\"",Ye,"\" ","data-value=\"",tt,"\" ","title=\"",tt,"\" ","data-toggle=\"button\" tabindex=\"-1\"></button>"].join(""));Ge.push("<div class=\"note-color-row\">"+Qe.join("")+"</div>")}Ke.html(Ge.join("")),Ke.find(".note-color-btn").tooltip({container:"body",trigger:"hover",placement:"bottom"})}),se=V.create("<div class=\"modal -primary\" aria-hidden=\"false\" tabindex=\"-1\"/>",function(Ke,Ve){Ve.fade&&Ke.addClass("fade"),Ke.html(["<div class=\"modal-dialog\">","  <div class=\"modal-content\">",Ve.title?"    <div class=\"modal-header\">      <button type=\"button\" class=\"close _text-white\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>      <h4 class=\"modal-title\">"+Ve.title+"</h4>    </div>":"","    <div class=\"modal-body\">"+Ve.body+"</div>",Ve.footer?"    <div class=\"modal-footer\">"+Ve.footer+"</div>":"","  </div>","</div>"].join(""))}),ae=V.create(["<div class=\"note-popover popover in\">","  <div class=\"arrow\"/>","  <div class=\"popover-content note-children-container\"/>","</div>"].join(""),function(Ke,Ve){var Ge="undefined"==typeof Ve.direction?"bottom":Ve.direction;Ke.addClass(Ge),Ve.hideArrow&&Ke.find(".arrow").hide()}),de=function(Ve,Ge){return Ge=Ge||"i","<"+Ge+" class=\""+Ve+"\"/>"},ce={editor:G,toolbar:q,editingArea:_,codable:X,editable:Y,statusbar:Z,airEditor:Q,airEditable:J,buttonGroup:ee,button:oe,dropdown:ne,dropdownCheck:re,palette:le,dialog:se,popover:ae,icon:de,toggleBtn:function(Ve,Ge){Ve.toggleClass("disabled",!Ge),Ve.attr("disabled",!Ge)},toggleBtnActive:function(Ve,Ge){Ve.toggleClass("active",Ge)},onDialogShown:function(Ve,Ge){Ve.one("shown.bs.modal",Ge)},onDialogHidden:function(Ve,Ge){Ve.one("hidden.bs.modal",Ge)},showDialog:function(Ve){Ve.modal("show")},hideDialog:function(Ve){Ve.modal("hide")},createLayout:function(Ve,Ge){var qe=(Ge.airMode?ce.airEditor([ce.editingArea([ce.airEditable()])]):ce.editor([ce.toolbar(),ce.editingArea([ce.codable(),ce.editable()]),ce.statusbar()])).render();return qe.insertAfter(Ve),{note:Ve,editor:qe,toolbar:qe.find(".note-toolbar"),editingArea:qe.find(".note-editing-area"),editable:qe.find(".note-editable"),codable:qe.find(".note-codable"),statusbar:qe.find(".note-statusbar")}},removeLayout:function(Ve,Ge){Ve.html(Ge.editable.html()),Ge.editor.remove(),Ve.show()}};T.summernote=T.summernote||{lang:{}},T.extend(T.summernote.lang,{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion or Youku)"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",normal:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},help:{insertParagraph:"Insert Paragraph",undo:"Undoes the last command",redo:"Redoes the last command",tab:"Tab",untab:"Untab",bold:"Set a bold style",italic:"Set a italic style",underline:"Set a underline style",strikethrough:"Set a strikethrough style",removeFormat:"Clean a style",justifyLeft:"Set left align",justifyCenter:"Set center align",justifyRight:"Set right align",justifyFull:"Set full align",insertUnorderedList:"Toggle unordered list",insertOrderedList:"Toggle ordered list",outdent:"Outdent on current paragraph",indent:"Indent on current paragraph",formatPara:"Change current block's format as a paragraph(P tag)",formatH1:"Change current block's format as H1",formatH2:"Change current block's format as H2",formatH3:"Change current block's format as H3",formatH4:"Change current block's format as H4",formatH5:"Change current block's format as H5",formatH6:"Change current block's format as H6",insertHorizontalRule:"Insert horizontal rule","linkDialog.show":"Show Link Dialog"},history:{undo:"Undo",redo:"Redo"},specialChar:{specialChar:"SPECIAL CHARACTERS",select:"Select Special characters"}}});var pe=function(){var Ke={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221};return{isEdit:function(Ge){return A.contains([Ke.BACKSPACE,Ke.TAB,Ke.ENTER,Ke.SPACE],Ge)},isMove:function(Ge){return A.contains([Ke.LEFT,Ke.UP,Ke.RIGHT,Ke.DOWN],Ge)},nameFromCode:N.invertObject(Ke),code:Ke}}(),he=function(){var Ke=function(Xe,Ye){var Ze=Xe.parentElement(),Qe,Je=document.body.createTextRange(),et,tt=A.from(Ze.childNodes);for(Qe=0;Qe<tt.length;Qe++)if(!B.isText(tt[Qe])){if(Je.moveToElementText(tt[Qe]),0<=Je.compareEndPoints("StartToStart",Xe))break;et=tt[Qe]}if(0!==Qe&&B.isText(tt[Qe-1])){var ot=document.body.createTextRange(),nt=null;ot.moveToElementText(et||Ze),ot.collapse(!et),nt=et?et.nextSibling:Ze.firstChild;var it=Xe.duplicate();it.setEndPoint("StartToStart",ot);for(var lt=it.text.replace(/[\r\n]/g,"").length;lt>nt.nodeValue.length&&nt.nextSibling;)lt-=nt.nodeValue.length,nt=nt.nextSibling;nt.nodeValue;Ye&&nt.nextSibling&&B.isText(nt.nextSibling)&&lt===nt.nodeValue.length&&(lt-=nt.nodeValue.length,nt=nt.nextSibling),Ze=nt,Qe=lt}return{cont:Ze,offset:Qe}},Ve=function(Xe){var Ze=document.body.createTextRange(),Qe=function Je(et,tt){var ot,nt;if(B.isText(et)){var it=B.listPrev(et,N.not(B.isText)),lt=A.last(it).previousSibling;ot=lt||et.parentNode,tt+=A.sum(A.tail(it),B.nodeLength),nt=!lt}else{if(ot=et.childNodes[tt]||et,B.isText(ot))return Je(ot,0);tt=0,nt=!1}return{node:ot,collapseToStart:nt,offset:tt}}(Xe.node,Xe.offset);return Ze.moveToElementText(Qe.node),Ze.collapse(Qe.collapseToStart),Ze.moveStart("character",Qe.offset),Ze},Ge=function qe(Xe,Ye,Ze,Qe){this.sc=Xe,this.so=Ye,this.ec=Ze,this.eo=Qe;var Je=function(){if(O.isW3CRangeSupport){var ot=document.createRange();return ot.setStart(Xe,Ye),ot.setEnd(Ze,Qe),ot}var nt=Ve({node:Xe,offset:Ye});return nt.setEndPoint("EndToEnd",Ve({node:Ze,offset:Qe})),nt};this.getPoints=function(){return{sc:Xe,so:Ye,ec:Ze,eo:Qe}},this.getStartPoint=function(){return{node:Xe,offset:Ye}},this.getEndPoint=function(){return{node:Ze,offset:Qe}},this.select=function(){var tt=Je();if(O.isW3CRangeSupport){var ot=document.getSelection();0<ot.rangeCount&&ot.removeAllRanges(),ot.addRange(tt)}else tt.select();return this},this.scrollIntoView=function(tt){var ot=T(tt).height();return tt.scrollTop+ot<this.sc.offsetTop&&(tt.scrollTop+=_Mathabs(tt.scrollTop+ot-this.sc.offsetTop)),this},this.normalize=function(){var tt=function(lt,dt){if(B.isVisiblePoint(lt)&&!B.isEdgePoint(lt)||B.isVisiblePoint(lt)&&B.isRightEdgePoint(lt)&&!dt||B.isVisiblePoint(lt)&&B.isLeftEdgePoint(lt)&&dt||B.isVisiblePoint(lt)&&B.isBlock(lt.node)&&B.isEmpty(lt.node))return lt;var ct=B.ancestor(lt.node,B.isBlock);if((B.isLeftEdgePointOf(lt,ct)||B.isVoid(B.prevPoint(lt).node))&&!dt||(B.isRightEdgePointOf(lt,ct)||B.isVoid(B.nextPoint(lt).node))&&dt){if(B.isVisiblePoint(lt))return lt;dt=!dt}var pt=dt?B.nextPointUntil(B.nextPoint(lt),B.isVisiblePoint):B.prevPointUntil(B.prevPoint(lt),B.isVisiblePoint);return pt||lt},ot=tt(this.getEndPoint(),!1),nt=this.isCollapsed()?ot:tt(this.getStartPoint(),!0);return new qe(nt.node,nt.offset,ot.node,ot.offset)},this.nodes=function(tt,ot){tt=tt||N.ok;var nt=ot&&ot.includeAncestor,it=ot&&ot.fullyContains,lt=this.getStartPoint(),dt=this.getEndPoint(),ct=[],pt=[];return B.walkPoint(lt,dt,function(ht){if(!B.isEditable(ht.node)){var ut;it?(B.isLeftEdgePoint(ht)&&pt.push(ht.node),B.isRightEdgePoint(ht)&&A.contains(pt,ht.node)&&(ut=ht.node)):nt?ut=B.ancestor(ht.node,tt):ut=ht.node,ut&&tt(ut)&&ct.push(ut)}},!0),A.unique(ct)},this.commonAncestor=function(){return B.commonAncestor(Xe,Ze)},this.expand=function(tt){var ot=B.ancestor(Xe,tt),nt=B.ancestor(Ze,tt);if(!ot&&!nt)return new qe(Xe,Ye,Ze,Qe);var it=this.getPoints();return ot&&(it.sc=ot,it.so=0),nt&&(it.ec=nt,it.eo=B.nodeLength(nt)),new qe(it.sc,it.so,it.ec,it.eo)},this.collapse=function(tt){return tt?new qe(Xe,Ye,Xe,Ye):new qe(Ze,Qe,Ze,Qe)},this.splitText=function(){var ot=this.getPoints();return B.isText(Ze)&&!B.isEdgePoint(this.getEndPoint())&&Ze.splitText(Qe),B.isText(Xe)&&!B.isEdgePoint(this.getStartPoint())&&(ot.sc=Xe.splitText(Ye),ot.so=0,Xe===Ze&&(ot.ec=ot.sc,ot.eo=Qe-Ye)),new qe(ot.sc,ot.so,ot.ec,ot.eo)},this.deleteContents=function(){if(this.isCollapsed())return this;var tt=this.splitText(),ot=tt.nodes(null,{fullyContains:!0}),nt=B.prevPointUntil(tt.getStartPoint(),function(lt){return!A.contains(ot,lt.node)}),it=[];return T.each(ot,function(lt,dt){var ct=dt.parentNode;nt.node!==ct&&1===B.nodeLength(ct)&&it.push(ct),B.remove(dt,!1)}),T.each(it,function(lt,dt){B.remove(dt,!1)}),new qe(nt.node,nt.offset,nt.node,nt.offset).normalize()};var et=function(ot){return function(){var nt=B.ancestor(Xe,ot);return!!nt&&nt===B.ancestor(Ze,ot)}};this.isOnEditable=et(B.isEditable),this.isOnList=et(B.isList),this.isOnAnchor=et(B.isAnchor),this.isOnCell=et(B.isCell),this.isOnData=et(B.isData),this.isLeftEdgeOf=function(tt){if(!B.isLeftEdgePoint(this.getStartPoint()))return!1;var ot=B.ancestor(this.sc,tt);return ot&&B.isLeftEdgeOf(this.sc,ot)},this.isCollapsed=function(){return Xe===Ze&&Ye===Qe},this.wrapBodyInlineWithPara=function(){if(B.isBodyContainer(Xe)&&B.isEmpty(Xe))return Xe.innerHTML=B.emptyPara,new qe(Xe.firstChild,0,Xe.firstChild,0);var tt=this.normalize();if(B.isParaInline(Xe)||B.isPara(Xe))return tt;var ot;if(B.isInline(tt.sc)){var nt=B.listAncestor(tt.sc,N.not(B.isInline));ot=A.last(nt),B.isInline(ot)||(ot=nt[nt.length-2]||tt.sc.childNodes[tt.so])}else ot=tt.sc.childNodes[0<tt.so?tt.so-1:0];var it=B.listPrev(ot,B.isParaInline).reverse();if(it=it.concat(B.listNext(ot.nextSibling,B.isParaInline)),it.length){var lt=B.wrap(A.head(it),"p");B.appendChildNodes(lt,A.tail(it))}return this.normalize()},this.insertNode=function(tt){var ot=this.wrapBodyInlineWithPara().deleteContents(),nt=B.splitPoint(ot.getStartPoint(),B.isInline(tt));return nt.rightNode?nt.rightNode.parentNode.insertBefore(tt,nt.rightNode):nt.container.appendChild(tt),tt},this.pasteHTML=function(tt){var ot=T("<div></div>").html(tt)[0],nt=A.from(ot.childNodes),it=this.wrapBodyInlineWithPara().deleteContents();return nt.reverse().map(function(lt){return it.insertNode(lt)}).reverse()},this.toString=function(){var tt=Je();return O.isW3CRangeSupport?tt.toString():tt.text},this.getWordRange=function(tt){var ot=this.getEndPoint();if(!B.isCharPoint(ot))return this;var nt=B.prevPointUntil(ot,function(it){return!B.isCharPoint(it)});return tt&&(ot=B.nextPointUntil(ot,function(it){return!B.isCharPoint(it)})),new qe(nt.node,nt.offset,ot.node,ot.offset)},this.bookmark=function(tt){return{s:{path:B.makeOffsetPath(tt,Xe),offset:Ye},e:{path:B.makeOffsetPath(tt,Ze),offset:Qe}}},this.paraBookmark=function(tt){return{s:{path:A.tail(B.makeOffsetPath(A.head(tt),Xe)),offset:Ye},e:{path:A.tail(B.makeOffsetPath(A.last(tt),Ze)),offset:Qe}}},this.getClientRects=function(){var tt=Je();return tt.getClientRects()}};return{create:function(Xe,Ye,Ze,Qe){if(4===arguments.length)return new Ge(Xe,Ye,Ze,Qe);if(2===arguments.length)return Ze=Xe,Qe=Ye,new Ge(Xe,Ye,Ze,Qe);var Je=this.createFromSelection();return Je||1!==arguments.length?Je:(Je=this.createFromNode(arguments[0]),Je.collapse(B.emptyPara===arguments[0].innerHTML))},createFromSelection:function(){var Xe,Ye,Ze,Qe;if(O.isW3CRangeSupport){var Je=document.getSelection();if(!Je||0===Je.rangeCount)return null;if(B.isBody(Je.anchorNode))return null;var et=Je.getRangeAt(0);Xe=et.startContainer,Ye=et.startOffset,Ze=et.endContainer,Qe=et.endOffset}else{var tt=document.selection.createRange(),ot=tt.duplicate();ot.collapse(!1);var nt=tt;nt.collapse(!0);var it=Ke(nt,!0),lt=Ke(ot,!1);B.isText(it.node)&&B.isLeftEdgePoint(it)&&B.isTextNode(lt.node)&&B.isRightEdgePoint(lt)&&lt.node.nextSibling===it.node&&(it=lt),Xe=it.cont,Ye=it.offset,Ze=lt.cont,Qe=lt.offset}return new Ge(Xe,Ye,Ze,Qe)},createFromNode:function(Xe){var Ye=Xe,Ze=0,Qe=Xe,Je=B.nodeLength(Qe);return B.isVoid(Ye)&&(Ze=B.listPrev(Ye).length-1,Ye=Ye.parentNode),B.isBR(Qe)?(Je=B.listPrev(Qe).length-1,Qe=Qe.parentNode):B.isVoid(Qe)&&(Je=B.listPrev(Qe).length,Qe=Qe.parentNode),this.create(Ye,Ze,Qe,Je)},createFromNodeBefore:function(Xe){return this.createFromNode(Xe).collapse(!0)},createFromNodeAfter:function(Xe){return this.createFromNode(Xe).collapse()},createFromBookmark:function(Xe,Ye){var Ze=B.fromOffsetPath(Xe,Ye.s.path),Qe=Ye.s.offset,Je=B.fromOffsetPath(Xe,Ye.e.path),et=Ye.e.offset;return new Ge(Ze,Qe,Je,et)},createFromParaBookmark:function(Xe,Ye){var Ze=Xe.s.offset,Qe=Xe.e.offset,Je=B.fromOffsetPath(A.head(Ye),Xe.s.path),et=B.fromOffsetPath(A.last(Ye),Xe.e.path);return new Ge(Je,Ze,et,Qe)}}}(),ue=function(){return{readFileAsDataURL:function(qe){return T.Deferred(function(Xe){T.extend(new FileReader,{onload:function(Ze){var Qe=Ze.target.result;Xe.resolve(Qe)},onerror:function(){Xe.reject(this)}}).readAsDataURL(qe)}).promise()},createImage:function(qe){return T.Deferred(function(Xe){var Ye=T("<img>");Ye.one("load",function(){Ye.off("error abort"),Xe.resolve(Ye)}).one("error abort",function(){Ye.off("load").detach(),Xe.reject(Ye)}).css({display:"none"}).appendTo(document.body).attr("src",qe)}).promise()}}}(),ge=function(Ve){var Ge=[],qe=-1,Xe=Ve[0],Ye=function(){var Je=he.create(Xe);return{contents:Ve.html(),bookmark:Je?Je.bookmark(Xe):{s:{path:[],offset:0},e:{path:[],offset:0}}}},Ze=function(Je){null!==Je.contents&&Ve.html(Je.contents),null!==Je.bookmark&&he.createFromBookmark(Xe,Je.bookmark).select()};this.rewind=function(){Ve.html()!==Ge[qe].contents&&this.recordUndo(),qe=0,Ze(Ge[qe])},this.reset=function(){Ge=[],qe=-1,Ve.html(""),this.recordUndo()},this.undo=function(){Ve.html()!==Ge[qe].contents&&this.recordUndo(),0<qe&&(qe--,Ze(Ge[qe]))},this.redo=function(){Ge.length-1>qe&&(qe++,Ze(Ge[qe]))},this.recordUndo=function(){qe++,Ge.length>qe&&(Ge=Ge.slice(0,qe)),Ge.push(Ye())}},fe=function(){var Ve=function(qe,Xe){if(1.9>O.jqueryVersion){var Ye={};return T.each(Xe,function(Ze,Qe){Ye[Qe]=qe.css(Qe)}),Ye}return qe.css.call(qe,Xe)};this.fromNode=function(Ge){var Xe=Ve(Ge,["font-family","font-size","text-align","list-style-type","line-height"])||{};return Xe["font-size"]=parseInt(Xe["font-size"],10),Xe},this.stylePara=function(Ge,qe){T.each(Ge.nodes(B.isPara,{includeAncestor:!0}),function(Xe,Ye){T(Ye).css(qe)})},this.styleNodes=function(Ge,qe){Ge=Ge.splitText();var Xe=qe&&qe.nodeName||"SPAN",Ye=!!(qe&&qe.expandClosestSibling),Ze=!!(qe&&qe.onlyPartialContains);if(Ge.isCollapsed())return[Ge.insertNode(B.create(Xe))];var Qe=B.makePredByNodeName(Xe),Je=Ge.nodes(B.isText,{fullyContains:!0}).map(function(tt){return B.singleChildAncestor(tt,Qe)||B.wrap(tt,Xe)});if(Ye){if(Ze){var et=Ge.nodes();Qe=N.and(Qe,function(tt){return A.contains(et,tt)})}return Je.map(function(tt){var ot=B.withClosestSiblings(tt,Qe),nt=A.head(ot),it=A.tail(ot);return T.each(it,function(lt,dt){B.appendChildNodes(nt,dt.childNodes),B.remove(dt)}),A.head(ot)})}return Je},this.current=function(Ge){var qe=T(B.isElement(Ge.sc)?Ge.sc:Ge.sc.parentNode),Xe=this.fromNode(qe);try{Xe=T.extend(Xe,{"font-bold":document.queryCommandState("bold")?"bold":"normal","font-italic":document.queryCommandState("italic")?"italic":"normal","font-underline":document.queryCommandState("underline")?"underline":"normal","font-subscript":document.queryCommandState("subscript")?"subscript":"normal","font-superscript":document.queryCommandState("superscript")?"superscript":"normal","font-strikethrough":document.queryCommandState("strikethrough")?"strikethrough":"normal"})}catch(et){}if(!Ge.isOnList())Xe["list-style"]="none";else{var Ze=-1<T.inArray(Xe["list-style-type"],["circle","disc","disc-leading-zero","square"]);Xe["list-style"]=Ze?"unordered":"ordered"}var Qe=B.ancestor(Ge.sc,B.isPara);if(Qe&&Qe.style["line-height"])Xe["line-height"]=Qe.style.lineHeight;else{var Je=parseInt(Xe["line-height"],10)/parseInt(Xe["font-size"],10);Xe["line-height"]=Je.toFixed(1)}return Xe.anchor=Ge.isOnAnchor()&&B.ancestor(Ge.sc,B.isAnchor),Xe.ancestors=B.listAncestor(Ge.sc,B.isEditable),Xe.range=Ge,Xe}},ye=function(){var Ve=this;this.insertOrderedList=function(Ge){this.toggleList("OL",Ge)},this.insertUnorderedList=function(Ge){this.toggleList("UL",Ge)},this.indent=function(Ge){var qe=this,Xe=he.create(Ge).wrapBodyInlineWithPara(),Ye=Xe.nodes(B.isPara,{includeAncestor:!0}),Ze=A.clusterBy(Ye,N.peq2("parentNode"));T.each(Ze,function(Qe,Je){var et=A.head(Je);B.isLi(et)?qe.wrapList(Je,et.parentNode.nodeName):T.each(Je,function(tt,ot){T(ot).css("marginLeft",function(nt,it){return(parseInt(it,10)||0)+25})})}),Xe.select()},this.outdent=function(Ge){var qe=this,Xe=he.create(Ge).wrapBodyInlineWithPara(),Ye=Xe.nodes(B.isPara,{includeAncestor:!0}),Ze=A.clusterBy(Ye,N.peq2("parentNode"));T.each(Ze,function(Qe,Je){var et=A.head(Je);B.isLi(et)?qe.releaseList([Je]):T.each(Je,function(tt,ot){T(ot).css("marginLeft",function(nt,it){return it=parseInt(it,10)||0,25<it?it-25:""})})}),Xe.select()},this.toggleList=function(Ge,qe){var Xe=he.create(qe).wrapBodyInlineWithPara(),Ye=Xe.nodes(B.isPara,{includeAncestor:!0}),Ze=Xe.paraBookmark(Ye),Qe=A.clusterBy(Ye,N.peq2("parentNode"));if(A.find(Ye,B.isPurePara)){var Je=[];T.each(Qe,function(tt,ot){Je=Je.concat(Ve.wrapList(ot,Ge))}),Ye=Je}else{var et=Xe.nodes(B.isList,{includeAncestor:!0}).filter(function(tt){return!T.nodeName(tt,Ge)});et.length?T.each(et,function(tt,ot){B.replace(ot,Ge)}):Ye=this.releaseList(Qe,!0)}he.createFromParaBookmark(Ze,Ye).select()},this.wrapList=function(Ge,qe){var Xe=A.head(Ge),Ye=A.last(Ge),Ze=B.isList(Xe.previousSibling)&&Xe.previousSibling,Qe=B.isList(Ye.nextSibling)&&Ye.nextSibling,Je=Ze||B.insertAfter(B.create(qe||"UL"),Ye);return Ge=Ge.map(function(et){return B.isPurePara(et)?B.replace(et,"LI"):et}),B.appendChildNodes(Je,Ge),Qe&&(B.appendChildNodes(Je,A.from(Qe.childNodes)),B.remove(Qe)),Ge},this.releaseList=function(Ge,qe){var Xe=[];return T.each(Ge,function(Ye,Ze){var Qe=A.head(Ze),Je=A.last(Ze),et=qe?B.lastAncestor(Qe,B.isList):Qe.parentNode,tt=1<et.childNodes.length?B.splitTree(et,{node:Je.parentNode,offset:B.position(Je)+1},{isSkipPaddingBlankHTML:!0}):null,ot=B.splitTree(et,{node:Qe.parentNode,offset:B.position(Qe)},{isSkipPaddingBlankHTML:!0});Ze=qe?B.listDescendant(ot,B.isLi):A.from(ot.childNodes).filter(B.isLi),(qe||!B.isList(et.parentNode))&&(Ze=Ze.map(function(it){return B.replace(it,"P")})),T.each(A.from(Ze).reverse(),function(it,lt){B.insertAfter(lt,et)});var nt=A.compact([et,ot,tt]);T.each(nt,function(it,lt){var dt=[lt].concat(B.listDescendant(lt,B.isList));T.each(dt.reverse(),function(ct,pt){B.nodeLength(pt)||B.remove(pt,!0)})}),Xe=Xe.concat(Ze)}),Xe}},ve=function(){var Ve=new ye;this.insertTab=function(Ge,qe){var Xe=B.createText(Array(qe+1).join(B.NBSP_CHAR));Ge=Ge.deleteContents(),Ge.insertNode(Xe,!0),Ge=he.create(Xe,qe),Ge.select()},this.insertParagraph=function(Ge){var qe=he.create(Ge);qe=qe.deleteContents(),qe=qe.wrapBodyInlineWithPara();var Xe=B.ancestor(qe.sc,B.isPara),Ye;if(Xe){if(B.isEmpty(Xe)&&B.isLi(Xe))return void Ve.toggleList(Xe.parentNode.nodeName);if(B.isEmpty(Xe)&&B.isPara(Xe)&&B.isBlockquote(Xe.parentNode))B.insertAfter(Xe,Xe.parentNode),Ye=Xe;else{Ye=B.splitTree(Xe,qe.getStartPoint());var Ze=B.listDescendant(Xe,B.isEmptyAnchor);Ze=Ze.concat(B.listDescendant(Ye,B.isEmptyAnchor)),T.each(Ze,function(Je,et){B.remove(et)}),(B.isHeading(Ye)||B.isPre(Ye))&&B.isEmpty(Ye)&&(Ye=B.replace(Ye,"p"))}}else{var Qe=qe.sc.childNodes[qe.so];Ye=T(B.emptyPara)[0],Qe?qe.sc.insertBefore(Ye,Qe):qe.sc.appendChild(Ye)}he.create(Ye,0).normalize().select().scrollIntoView(Ge)}},be=function(){this.tab=function(Ve,Ge){var qe=B.ancestor(Ve.commonAncestor(),B.isCell),Xe=B.ancestor(qe,B.isTable),Ye=B.listDescendant(Xe,B.isCell),Ze=A[Ge?"prev":"next"](Ye,qe);Ze&&he.create(Ze,0).select()},this.createTable=function(Ve,Ge,qe){for(var Xe=[],Ze=0,Ye;Ze<Ve;Ze++)Xe.push("<td>"+B.blank+"</td>");Ye=Xe.join("");for(var Qe=[],et=0,Je;et<Ge;et++)Qe.push("<tr>"+Ye+"</tr>");Je=Qe.join("");var tt=T("<table>"+Je+"</table>");return qe&&qe.tableClassName&&tt.addClass(qe.tableClassName),tt[0]}},Ce="bogus",Le;O.hasCodeMirror&&(O.isSupportAmd?c(["codemirror"],function(Ke){Le=Ke}):Le=window.CodeMirror);T.summernote=T.extend(T.summernote,{version:"0.8.2",ui:ce,dom:B,plugins:{},options:{modules:{editor:function(Ve){var Ge=this,qe=Ve.layoutInfo.note,Xe=Ve.layoutInfo.editor,Ye=Ve.layoutInfo.editable,Ze=Ve.options,Qe=Ze.langInfo,Je=Ye[0],et=null,tt=new fe,ot=new be,nt=new ve,it=new ye,lt=new ge(Ye);this.initialize=function(){Ye.on("keydown",function(ft){ft.keyCode===pe.code.ENTER&&Ve.triggerEvent("enter",ft),Ve.triggerEvent("keydown",ft),ft.isDefaultPrevented()||(Ze.shortcuts?Ge.handleKeyMap(ft):Ge.preventDefaultEditableShortCuts(ft))}).on("keyup",function(ft){Ve.triggerEvent("keyup",ft)}).on("focus",function(ft){Ve.triggerEvent("focus",ft)}).on("blur",function(ft){Ve.triggerEvent("blur",ft)}).on("mousedown",function(ft){Ve.triggerEvent("mousedown",ft)}).on("mouseup",function(ft){Ve.triggerEvent("mouseup",ft)}).on("scroll",function(ft){Ve.triggerEvent("scroll",ft)}).on("paste",function(ft){Ve.triggerEvent("paste",ft)}),Ye.html(B.html(qe)||B.emptyPara);var gt=O.isMSIE?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input";Ye.on(gt,N.debounce(function(){Ve.triggerEvent("change",Ye.html())},250)),Xe.on("focusin",function(ft){Ve.triggerEvent("focusin",ft)}).on("focusout",function(ft){Ve.triggerEvent("focusout",ft)}),Ze.airMode||(Ze.width&&Xe.outerWidth(Ze.width),Ze.height&&Ye.outerHeight(Ze.height),Ze.maxHeight&&Ye.css("max-height",Ze.maxHeight),Ze.minHeight&&Ye.css("min-height",Ze.minHeight)),lt.recordUndo()},this.destroy=function(){Ye.off()},this.handleKeyMap=function(gt){var ft=Ze.keyMap[O.isMac?"mac":"pc"],mt=[];gt.metaKey&&mt.push("CMD"),gt.ctrlKey&&!gt.altKey&&mt.push("CTRL"),gt.shiftKey&&mt.push("SHIFT");var yt=pe.nameFromCode[gt.keyCode];yt&&mt.push(yt);var vt=ft[mt.join("+")];vt?(gt.preventDefault(),Ve.invoke(vt)):pe.isEdit(gt.keyCode)&&this.afterCommand()},this.preventDefaultEditableShortCuts=function(gt){(gt.ctrlKey||gt.metaKey)&&A.contains([66,73,85],gt.keyCode)&&gt.preventDefault()},this.createRange=function(){return this.focus(),he.create(Je)},this.saveRange=function(gt){et=this.createRange(),gt&&et.collapse().select()},this.restoreRange=function(){et&&(et.select(),this.focus())},this.saveTarget=function(gt){Ye.data("target",gt)},this.clearTarget=function(){Ye.removeData("target")},this.restoreTarget=function(){return Ye.data("target")},this.currentStyle=function(){var gt=he.create();return gt&&(gt=gt.normalize()),gt?tt.current(gt):tt.fromNode(Ye)},this.styleFromNode=function(gt){return tt.fromNode(gt)},this.undo=function(){Ve.triggerEvent("before.command",Ye.html()),lt.undo(),Ve.triggerEvent("change",Ye.html())},Ve.memo("help.undo",Qe.help.undo),this.redo=function(){Ve.triggerEvent("before.command",Ye.html()),lt.redo(),Ve.triggerEvent("change",Ye.html())},Ve.memo("help.redo",Qe.help.redo);for(var dt=this.beforeCommand=function(){Ve.triggerEvent("before.command",Ye.html()),Ge.focus()},ct=this.afterCommand=function(gt){lt.recordUndo(),gt||Ve.triggerEvent("change",Ye.html())},pt=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor","foreColor","fontName"],ht=0,ut=pt.length;ht<ut;ht++)this[pt[ht]]=function(gt){return function(ft){dt(),document.execCommand(gt,!1,ft),ct(!0)}}(pt[ht]),Ve.memo("help."+pt[ht],Qe.help[pt[ht]]);this.tab=function(){var gt=this.createRange();gt.isCollapsed()&&gt.isOnCell()?ot.tab(gt):(dt(),nt.insertTab(gt,Ze.tabSize),ct())},Ve.memo("help.tab",Qe.help.tab),this.untab=function(){var gt=this.createRange();gt.isCollapsed()&&gt.isOnCell()&&ot.tab(gt,!0)},Ve.memo("help.untab",Qe.help.untab),this.wrapCommand=function(gt){return function(){dt(),gt.apply(Ge,arguments),ct()}},this.insertParagraph=this.wrapCommand(function(){nt.insertParagraph(Je)}),Ve.memo("help.insertParagraph",Qe.help.insertParagraph),this.insertOrderedList=this.wrapCommand(function(){it.insertOrderedList(Je)}),Ve.memo("help.insertOrderedList",Qe.help.insertOrderedList),this.insertUnorderedList=this.wrapCommand(function(){it.insertUnorderedList(Je)}),Ve.memo("help.insertUnorderedList",Qe.help.insertUnorderedList),this.indent=this.wrapCommand(function(){it.indent(Je)}),Ve.memo("help.indent",Qe.help.indent),this.outdent=this.wrapCommand(function(){it.outdent(Je)}),Ve.memo("help.outdent",Qe.help.outdent),this.insertImage=function(gt,ft){return ue.createImage(gt,ft).then(function(mt){dt(),"function"==typeof ft?ft(mt):("string"==typeof ft&&mt.attr("data-filename",ft),mt.css("width",_Mathmin(Ye.width(),mt.width()))),mt.show(),he.create(Je).insertNode(mt[0]),he.createFromNodeAfter(mt[0]).select(),ct()}).fail(function(mt){Ve.triggerEvent("image.upload.error",mt)})},this.insertImages=function(gt){T.each(gt,function(ft,mt){var yt=mt.name;Ze.maximumImageFileSize&&Ze.maximumImageFileSize<mt.size?Ve.triggerEvent("image.upload.error",Qe.image.maximumFileSizeError):ue.readFileAsDataURL(mt).then(function(vt){return Ge.insertImage(vt,yt)}).fail(function(){Ve.triggerEvent("image.upload.error")})})},this.insertImagesOrCallback=function(gt){var ft=Ze.callbacks;ft.onImageUpload?Ve.triggerEvent("image.upload",gt):this.insertImages(gt)},this.insertNode=this.wrapCommand(function(gt){var ft=this.createRange();ft.insertNode(gt),he.createFromNodeAfter(gt).select()}),this.insertText=this.wrapCommand(function(gt){var ft=this.createRange(),mt=ft.insertNode(B.createText(gt));he.create(mt,B.nodeLength(mt)).select()}),this.getSelectedText=function(){var gt=this.createRange();return gt.isOnAnchor()&&(gt=he.createFromNode(B.ancestor(gt.sc,B.isAnchor))),gt.toString()},this.pasteHTML=this.wrapCommand(function(gt){var ft=this.createRange().pasteHTML(gt);he.createFromNodeAfter(A.last(ft)).select()}),this.formatBlock=this.wrapCommand(function(gt){gt=O.isMSIE?"<"+gt+">":gt,document.execCommand("FormatBlock",!1,gt)}),this.formatPara=function(){this.formatBlock("P")},Ve.memo("help.formatPara",Qe.help.formatPara);for(var ht=1;6>=ht;ht++)this["formatH"+ht]=function(gt){return function(){this.formatBlock("H"+gt)}}(ht),Ve.memo("help.formatH"+ht,Qe.help["formatH"+ht]);this.fontSize=function(gt){var ft=this.createRange();if(ft&&ft.isCollapsed()){var mt=tt.styleNodes(ft),yt=A.head(mt);T(mt).css({"font-size":gt+"px"}),yt&&!B.nodeLength(yt)&&(yt.innerHTML=B.ZERO_WIDTH_NBSP_CHAR,he.createFromNodeAfter(yt.firstChild).select(),Ye.data(Ce,yt))}else dt(),T(tt.styleNodes(ft)).css({"font-size":gt+"px"}),ct()},this.insertHorizontalRule=this.wrapCommand(function(){var gt=this.createRange().insertNode(B.create("HR"));gt.nextSibling&&he.create(gt.nextSibling,0).normalize().select()}),Ve.memo("help.insertHorizontalRule",Qe.help.insertHorizontalRule),this.removeBogus=function(){var gt=Ye.data(Ce);if(gt){var ft=A.find(A.from(gt.childNodes),B.isText),mt=ft.nodeValue.indexOf(B.ZERO_WIDTH_NBSP_CHAR);-1!==mt&&ft.deleteData(mt,1),B.isEmpty(gt)&&B.remove(gt),Ye.removeData(Ce)}},this.lineHeight=this.wrapCommand(function(gt){tt.stylePara(this.createRange(),{lineHeight:gt})}),this.unlink=function(){var gt=this.createRange();if(gt.isOnAnchor()){var ft=B.ancestor(gt.sc,B.isAnchor);gt=he.createFromNode(ft),gt.select(),dt(),document.execCommand("unlink"),ct()}},this.createLink=this.wrapCommand(function(gt){var ft=gt.url,mt=gt.text,yt=gt.isNewWindow,vt=gt.range||this.createRange(),bt=vt.toString()!==mt;"string"==typeof ft&&(ft=ft.trim()),Ze.onCreateLink&&(ft=Ze.onCreateLink(ft));var Ct=[];if(bt){vt=vt.deleteContents();var xt=vt.insertNode(T("<A>"+mt+"</A>")[0]);Ct.push(xt)}else Ct=tt.styleNodes(vt,{nodeName:"A",expandClosestSibling:!0,onlyPartialContains:!0});T.each(Ct,function(Tt,Nt){ft=/^[A-Za-z][A-Za-z0-9+-.]*\:[\/\/]?/.test(ft)?ft:"http://"+ft,T(Nt).attr("href",ft),yt?T(Nt).attr("target","_blank"):T(Nt).removeAttr("target")});var kt=he.createFromNodeBefore(A.head(Ct)),wt=kt.getStartPoint(),St=he.createFromNodeAfter(A.last(Ct)),Lt=St.getEndPoint();he.create(wt.node,wt.offset,Lt.node,Lt.offset).select()}),this.getLinkInfo=function(){var gt=this.createRange().expand(B.isAnchor),ft=T(A.head(gt.nodes(B.isAnchor)));return{range:gt,text:gt.toString(),isNewWindow:!!ft.length&&"_blank"===ft.attr("target"),url:ft.length?ft.attr("href"):""}},this.color=this.wrapCommand(function(gt){var ft=gt.foreColor,mt=gt.backColor;ft&&document.execCommand("foreColor",!1,ft),mt&&document.execCommand("backColor",!1,mt)}),this.insertTable=this.wrapCommand(function(gt){var ft=gt.split("x"),mt=this.createRange().deleteContents();mt.insertNode(ot.createTable(ft[0],ft[1],Ze))}),this.floatMe=this.wrapCommand(function(gt){var ft=T(this.restoreTarget());ft.css("float",gt)}),this.resize=this.wrapCommand(function(gt){var ft=T(this.restoreTarget());ft.css({width:100*gt+"%",height:""})}),this.resizeTo=function(gt,ft,mt){var yt;if(mt){var vt=gt.y/gt.x,bt=ft.data("ratio");yt={width:bt>vt?gt.x:gt.y/bt,height:bt>vt?gt.x*bt:gt.y}}else yt={width:gt.x,height:gt.y};ft.css(yt)},this.removeMedia=this.wrapCommand(function(){var gt=T(this.restoreTarget()).detach();Ve.triggerEvent("media.delete",gt,Ye)}),this.hasFocus=function(){return Ye.is(":focus")},this.focus=function(){this.hasFocus()||Ye.focus()},this.isEmpty=function(){return B.isEmpty(Ye[0])||B.emptyPara===Ye.html()},this.empty=function(){Ve.invoke("code",B.emptyPara)}},clipboard:function(Ve){var Ge=this,qe=Ve.layoutInfo.editable;this.events={"summernote.keydown":function(Ye,Ze){Ge.needKeydownHook()&&(Ze.ctrlKey||Ze.metaKey)&&Ze.keyCode===pe.code.V&&(Ve.invoke("editor.saveRange"),Ge.$paste.focus(),setTimeout(function(){Ge.pasteByHook()},0))}},this.needKeydownHook=function(){return O.isMSIE&&10<O.browserVersion||O.isFF},this.initialize=function(){this.needKeydownHook()?(this.$paste=T("<div tabindex=\"-1\" />").attr("contenteditable",!0).css({position:"absolute",left:-1e5,opacity:0}),qe.before(this.$paste),this.$paste.on("paste",function(Xe){Ve.triggerEvent("paste",Xe)})):qe.on("paste",this.pasteByEvent)},this.destroy=function(){this.needKeydownHook()&&(this.$paste.remove(),this.$paste=null)},this.pasteByHook=function(){var Xe=this.$paste[0].firstChild;if(B.isImg(Xe)){for(var Ye=Xe.src,Ze=atob(Ye.split(",")[1]),Qe=new Uint8Array(Ze.length),Je=0;Je<Ze.length;Je++)Qe[Je]=Ze.charCodeAt(Je);var et=new Blob([Qe],{type:"image/png"});et.name="clipboard.png",Ve.invoke("editor.restoreRange"),Ve.invoke("editor.focus"),Ve.invoke("editor.insertImagesOrCallback",[et])}else{var tt=T("<div />").html(this.$paste.html()).html();Ve.invoke("editor.restoreRange"),Ve.invoke("editor.focus"),tt&&Ve.invoke("editor.pasteHTML",tt)}this.$paste.empty()},this.pasteByEvent=function(Xe){var Ye=Xe.originalEvent.clipboardData;if(Ye&&Ye.items&&Ye.items.length){var Ze=A.head(Ye.items);"file"===Ze.kind&&-1!==Ze.type.indexOf("image/")&&Ve.invoke("editor.insertImagesOrCallback",[Ze.getAsFile()]),Ve.invoke("editor.afterCommand")}}},dropzone:function(Ve){var Ge=T(document),qe=Ve.layoutInfo.editor,Xe=Ve.layoutInfo.editable,Ye=Ve.options,Ze=Ye.langInfo,Qe={},Je=T(["<div class=\"note-dropzone\">","  <div class=\"note-dropzone-message\"/>","</div>"].join("")).prependTo(qe),et=function(){Object.keys(Qe).forEach(function(ot){Ge.off(ot.substr(2).toLowerCase(),Qe[ot])}),Qe={}};this.initialize=function(){Ye.disableDragAndDrop?(Qe.onDrop=function(tt){tt.preventDefault()},Ge.on("drop",Qe.onDrop)):this.attachDragAndDropEvent()},this.attachDragAndDropEvent=function(){var tt=T(),ot=Je.find(".note-dropzone-message");Qe.onDragenter=function(nt){var it=Ve.invoke("codeview.isActivated"),lt=0<qe.width()&&0<qe.height();it||tt.length||!lt||(qe.addClass("dragover"),Je.width(qe.width()),Je.height(qe.height()),ot.text(Ze.image.dragImageHere)),tt=tt.add(nt.target)},Qe.onDragleave=function(nt){tt=tt.not(nt.target),tt.length||qe.removeClass("dragover")},Qe.onDrop=function(){tt=T(),qe.removeClass("dragover")},Ge.on("dragenter",Qe.onDragenter).on("dragleave",Qe.onDragleave).on("drop",Qe.onDrop),Je.on("dragenter",function(){Je.addClass("hover"),ot.text(Ze.image.dropImage)}).on("dragleave",function(){Je.removeClass("hover"),ot.text(Ze.image.dragImageHere)}),Je.on("drop",function(nt){var it=nt.originalEvent.dataTransfer;it&&it.files&&it.files.length?(nt.preventDefault(),Xe.focus(),Ve.invoke("editor.insertImagesOrCallback",it.files)):T.each(it.types,function(lt,dt){var ct=it.getData(dt);-1<dt.toLowerCase().indexOf("text")?Ve.invoke("editor.pasteHTML",ct):T(ct).each(function(){Ve.invoke("editor.insertNode",this)})})}).on("dragover",!1)},this.destroy=function(){et()}},codeview:function(Ve){var Ge=Ve.layoutInfo.editor,qe=Ve.layoutInfo.editable,Xe=Ve.layoutInfo.codable,Ye=Ve.options;this.sync=function(){var Ze=this.isActivated();Ze&&O.hasCodeMirror&&Xe.data("cmEditor").save()},this.isActivated=function(){return Ge.hasClass("codeview")},this.toggle=function(){this.isActivated()?this.deactivate():this.activate(),Ve.triggerEvent("codeview.toggled")},this.activate=function(){if(Xe.val(B.html(qe,Ye.prettifyHtml)),Xe.height(qe.height()),Ve.invoke("toolbar.updateCodeview",!0),Ge.addClass("codeview"),Xe.focus(),O.hasCodeMirror){var Ze=Le.fromTextArea(Xe[0],Ye.codemirror);if(Ye.codemirror.tern){var Qe=new Le.TernServer(Ye.codemirror.tern);Ze.ternServer=Qe,Ze.on("cursorActivity",function(Je){Qe.updateArgHints(Je)})}Ze.setSize(null,qe.outerHeight()),Xe.data("cmEditor",Ze)}},this.deactivate=function(){if(O.hasCodeMirror){var Ze=Xe.data("cmEditor");Xe.val(Ze.getValue()),Ze.toTextArea()}var Qe=B.value(Xe,Ye.prettifyHtml)||B.emptyPara,Je=qe.html()!==Qe;qe.html(Qe),qe.height(Ye.height?Xe.height():"auto"),Ge.removeClass("codeview"),Je&&Ve.triggerEvent("change",qe.html(),qe),qe.focus(),Ve.invoke("toolbar.updateCodeview",!1)},this.destroy=function(){this.isActivated()&&this.deactivate()}},statusbar:function(Ve){var Ge=T(document),qe=Ve.layoutInfo.statusbar,Xe=Ve.layoutInfo.editable,Ye=Ve.options;this.initialize=function(){Ye.airMode||Ye.disableResizeEditor||qe.on("mousedown",function(Ze){Ze.preventDefault(),Ze.stopPropagation();var Qe=Xe.offset().top-Ge.scrollTop();Ge.on("mousemove",function(Je){var et=Je.clientY-(Qe+24);et=0<Ye.minheight?_Mathmax(et,Ye.minheight):et,et=0<Ye.maxHeight?_Mathmin(et,Ye.maxHeight):et,Xe.height(et)}).one("mouseup",function(){Ge.off("mousemove")})})},this.destroy=function(){qe.off(),qe.remove()}},fullscreen:function(Ve){var Ge=Ve.layoutInfo.editor,qe=Ve.layoutInfo.toolbar,Xe=Ve.layoutInfo.editable,Ye=Ve.layoutInfo.codable,Ze=T(window),Qe=T("html, body");this.toggle=function(){var Je=function(tt){Xe.css("height",tt.h),Ye.css("height",tt.h),Ye.data("cmeditor")&&Ye.data("cmeditor").setsize(null,tt.h)};Ge.toggleClass("fullscreen"),this.isFullscreen()?(Xe.data("orgHeight",Xe.css("height")),Ze.on("resize",function(){Je({h:Ze.height()-qe.outerHeight()})}).trigger("resize"),Qe.css("overflow","hidden")):(Ze.off("resize"),Je({h:Xe.data("orgHeight")}),Qe.css("overflow","visible")),Ve.invoke("toolbar.updateFullscreen",this.isFullscreen())},this.isFullscreen=function(){return Ge.hasClass("fullscreen")}},handle:function(Ve){var Ge=this,qe=T(document),Xe=Ve.layoutInfo.editingArea,Ye=Ve.options;this.events={"summernote.mousedown":function(Qe,Je){Ge.update(Je.target)&&Je.preventDefault()},"summernote.keyup summernote.scroll summernote.change summernote.dialog.shown":function(){Ge.update()}},this.initialize=function(){this.$handle=T(["<div class=\"note-handle\">","<div class=\"note-control-selection\">","<div class=\"note-control-selection-bg\"></div>","<div class=\"note-control-holder note-control-nw\"></div>","<div class=\"note-control-holder note-control-ne\"></div>","<div class=\"note-control-holder note-control-sw\"></div>","<div class=\"",Ye.disableResizeImage?"note-control-holder":"note-control-sizing"," note-control-se\"></div>",Ye.disableResizeImage?"":"<div class=\"note-control-selection-info\"></div>","</div>","</div>"].join("")).prependTo(Xe),this.$handle.on("mousedown",function(Ze){if(B.isControlSizing(Ze.target)){Ze.preventDefault(),Ze.stopPropagation();var Qe=Ge.$handle.find(".note-control-selection").data("target"),Je=Qe.offset(),et=qe.scrollTop();qe.on("mousemove",function(tt){Ve.invoke("editor.resizeTo",{x:tt.clientX-Je.left,y:tt.clientY-(Je.top-et)},Qe,!tt.shiftKey),Ge.update(Qe[0])}).one("mouseup",function(tt){tt.preventDefault(),qe.off("mousemove"),Ve.invoke("editor.afterCommand")}),Qe.data("ratio")||Qe.data("ratio",Qe.height()/Qe.width())}})},this.destroy=function(){this.$handle.remove()},this.update=function(Ze){var Qe=B.isImg(Ze),Je=this.$handle.find(".note-control-selection");if(Ve.invoke("imagePopover.update",Ze),Qe){var et=T(Ze),tt=et.position(),ot={w:et.outerWidth(!0),h:et.outerHeight(!0)};Je.css({display:"block",left:tt.left,top:tt.top,width:ot.w,height:ot.h}).data("target",et);var nt=ot.w+"x"+ot.h;Je.find(".note-control-selection-info").text(nt),Ve.invoke("editor.saveTarget",Ze)}else this.hide();return Qe},this.hide=function(){Ve.invoke("editor.clearTarget"),this.$handle.children().hide()}},hintPopover:function(Ve){var Ge=this,qe=T.summernote.ui,Xe=5,Ye=Ve.options.hint||[],Ze=Ve.options.hintDirection||"bottom",Qe=T.isArray(Ye)?Ye:[Ye];this.events={"summernote.keyup":function(et,tt){tt.isDefaultPrevented()||Ge.handleKeyup(tt)},"summernote.keydown":function(et,tt){Ge.handleKeydown(tt)},"summernote.dialog.shown":function(){Ge.hide()}},this.shouldInitialize=function(){return 0<Qe.length},this.initialize=function(){this.lastWordRange=null,this.$popover=qe.popover({className:"note-hint-popover",hideArrow:!0,direction:""}).render().appendTo("body"),this.$popover.hide(),this.$content=this.$popover.find(".popover-content"),this.$content.on("click",".note-hint-item",function(){Ge.$content.find(".active").removeClass("active"),T(this).addClass("active"),Ge.replace()})},this.destroy=function(){this.$popover.remove()},this.selectItem=function(Je){this.$content.find(".active").removeClass("active"),Je.addClass("active"),this.$content[0].scrollTop=Je[0].offsetTop-this.$content.innerHeight()/2},this.moveDown=function(){var Je=this.$content.find(".note-hint-item.active"),et=Je.next();if(et.length)this.selectItem(et);else{var tt=Je.parent().next();tt.length||(tt=this.$content.find(".note-hint-group").first()),this.selectItem(tt.find(".note-hint-item").first())}},this.moveUp=function(){var Je=this.$content.find(".note-hint-item.active"),et=Je.prev();if(et.length)this.selectItem(et);else{var tt=Je.parent().prev();tt.length||(tt=this.$content.find(".note-hint-group").last()),this.selectItem(tt.find(".note-hint-item").last())}},this.replace=function(){var Je=this.$content.find(".note-hint-item.active");if(Je.length){var et=this.nodeFromItem(Je);this.lastWordRange.insertNode(et),he.createFromNode(et).collapse().select(),this.lastWordRange=null,this.hide(),Ve.invoke("editor.focus")}},this.nodeFromItem=function(Je){var et=Qe[Je.data("index")],tt=Je.data("item"),ot=et.content?et.content(tt):tt;return"string"==typeof ot&&(ot=B.createText(ot)),ot},this.createItemTemplates=function(Je,et){var tt=Qe[Je];return et.map(function(ot,nt){var it=T("<div class=\"note-hint-item\"/>");return it.append(tt.template?tt.template(ot):ot+""),it.data({index:Je,item:ot}),0===Je&&0===nt&&it.addClass("active"),it})},this.handleKeydown=function(Je){this.$popover.is(":visible")&&(Je.keyCode===pe.code.ENTER?(Je.preventDefault(),this.replace()):Je.keyCode===pe.code.UP?(Je.preventDefault(),this.moveUp()):Je.keyCode===pe.code.DOWN&&(Je.preventDefault(),this.moveDown()))},this.searchKeyword=function(Je,et,tt){var ot=Qe[Je];if(ot&&ot.match.test(et)&&ot.search){var nt=ot.match.exec(et);ot.search(nt[1],tt)}else tt()},this.createGroup=function(Je,et){var tt=T("<div class=\"note-hint-group note-hint-group-"+Je+"\"/>");return this.searchKeyword(Je,et,function(ot){ot=ot||[],ot.length&&(tt.html(Ge.createItemTemplates(Je,ot)),Ge.show())}),tt},this.handleKeyup=function(Je){if(!A.contains([pe.code.ENTER,pe.code.UP,pe.code.DOWN],Je.keyCode)){var et=Ve.invoke("editor.createRange").getWordRange(),tt=et.toString();if(Qe.length&&tt){this.$content.empty();var ot=N.rect2bnd(A.last(et.getClientRects()));ot&&(this.$popover.hide(),this.lastWordRange=et,Qe.forEach(function(nt,it){nt.match.test(tt)&&Ge.createGroup(it,tt).appendTo(Ge.$content)}),"top"===Ze?this.$popover.css({left:ot.left,top:ot.top-this.$popover.outerHeight()-Xe}):this.$popover.css({left:ot.left,top:ot.top+ot.height+Xe}))}else this.hide()}else if(Je.keyCode===pe.code.ENTER&&this.$popover.is(":visible"))return},this.show=function(){this.$popover.show()},this.hide=function(){this.$popover.hide()}},autoLink:function(Ve){var Ge=this,Xe=/^([A-Za-z][A-Za-z0-9+-.]*\:[\/\/]?|mailto:[A-Z0-9._%+-]+@)?(www\.)?(.+)$/i;this.events={"summernote.keyup":function(Ze,Qe){Qe.isDefaultPrevented()||Ge.handleKeyup(Qe)},"summernote.keydown":function(Ze,Qe){Ge.handleKeydown(Qe)}},this.initialize=function(){this.lastWordRange=null},this.destroy=function(){this.lastWordRange=null},this.replace=function(){if(this.lastWordRange){var Ye=this.lastWordRange.toString(),Ze=Ye.match(Xe);if(Ze&&(Ze[1]||Ze[2])){var Qe=Ze[1]?Ye:"http://"+Ye,Je=T("<a />").html(Ye).attr("href",Qe)[0];this.lastWordRange.insertNode(Je),this.lastWordRange=null,Ve.invoke("editor.focus")}}},this.handleKeydown=function(Ye){if(A.contains([pe.code.ENTER,pe.code.SPACE],Ye.keyCode)){var Ze=Ve.invoke("editor.createRange").getWordRange();this.lastWordRange=Ze}},this.handleKeyup=function(Ye){A.contains([pe.code.ENTER,pe.code.SPACE],Ye.keyCode)&&this.replace()}},autoSync:function(Ve){var Ge=Ve.layoutInfo.note;this.events={"summernote.change":function(){Ge.val(Ve.invoke("code"))}},this.shouldInitialize=function(){return B.isTextarea(Ge[0])}},placeholder:function(Ve){var Ge=this,qe=Ve.layoutInfo.editingArea,Xe=Ve.options;this.events={"summernote.init summernote.change":function(){Ge.update()},"summernote.codeview.toggled":function(){Ge.update()}},this.shouldInitialize=function(){return!!Xe.placeholder},this.initialize=function(){this.$placeholder=T("<div class=\"note-placeholder\">"),this.$placeholder.on("click",function(){Ve.invoke("focus")}).text(Xe.placeholder).prependTo(qe)},this.destroy=function(){this.$placeholder.remove()},this.update=function(){var Ye=!Ve.invoke("codeview.isActivated")&&Ve.invoke("editor.isEmpty");this.$placeholder.toggle(Ye)}},buttons:function(Ve){var Ge=this,qe=T.summernote.ui,Xe=Ve.layoutInfo.toolbar,Ye=Ve.options,Ze=Ye.langInfo,Qe=N.invertObject(Ye.keyMap[O.isMac?"mac":"pc"]),Je=this.representShortcut=function(et){var tt=Qe[et];return Ye.shortcuts&&tt?(O.isMac&&(tt=tt.replace("CMD","\u2318").replace("SHIFT","\u21E7")),tt=tt.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]")," ("+tt+")"):""};this.initialize=function(){this.addToolbarButtons(),this.addImagePopoverButtons(),this.addLinkPopoverButtons(),this.fontInstalledMap={}},this.destroy=function(){delete this.fontInstalledMap},this.isFontInstalled=function(et){return Ge.fontInstalledMap.hasOwnProperty(et)||(Ge.fontInstalledMap[et]=O.isFontInstalled(et)||A.contains(Ye.fontNamesIgnoreCheck,et)),Ge.fontInstalledMap[et]},this.addToolbarButtons=function(){Ve.memo("button.style",function(){return qe.buttonGroup([qe.button({className:"dropdown-toggle",contents:qe.icon(Ye.icons.magic)+" "+qe.icon(Ye.icons.caret,"span"),tooltip:Ze.style.style,data:{toggle:"dropdown"}}),qe.dropdown({className:"dropdown-style",items:Ve.options.styleTags,template:function(ct){"string"==typeof ct&&(ct={tag:ct,title:Ze.style.hasOwnProperty(ct)?Ze.style[ct]:ct});var pt=ct.tag,ht=ct.title,ut=ct.style?" style=\""+ct.style+"\" ":"",gt=ct.className?" class=\""+ct.className+"\"":"";return"<"+pt+ut+gt+">"+ht+"</"+pt+">"},click:Ve.createInvokeHandler("editor.formatBlock")})]).render()}),Ve.memo("button.bold",function(){return qe.button({className:"note-btn-bold",contents:qe.icon(Ye.icons.bold),tooltip:Ze.font.bold+Je("bold"),click:Ve.createInvokeHandler("editor.bold")}).render()}),Ve.memo("button.italic",function(){return qe.button({className:"note-btn-italic",contents:qe.icon(Ye.icons.italic),tooltip:Ze.font.italic+Je("italic"),click:Ve.createInvokeHandler("editor.italic")}).render()}),Ve.memo("button.underline",function(){return qe.button({className:"note-btn-underline",contents:qe.icon(Ye.icons.underline),tooltip:Ze.font.underline+Je("underline"),click:Ve.createInvokeHandler("editor.underline")}).render()}),Ve.memo("button.clear",function(){return qe.button({contents:qe.icon(Ye.icons.eraser),tooltip:Ze.font.clear+Je("removeFormat"),click:Ve.createInvokeHandler("editor.removeFormat")}).render()}),Ve.memo("button.strikethrough",function(){return qe.button({className:"note-btn-strikethrough",contents:qe.icon(Ye.icons.strikethrough),tooltip:Ze.font.strikethrough+Je("strikethrough"),click:Ve.createInvokeHandler("editor.strikethrough")}).render()}),Ve.memo("button.superscript",function(){return qe.button({className:"note-btn-superscript",contents:qe.icon(Ye.icons.superscript),tooltip:Ze.font.superscript,click:Ve.createInvokeHandler("editor.superscript")}).render()}),Ve.memo("button.subscript",function(){return qe.button({className:"note-btn-subscript",contents:qe.icon(Ye.icons.subscript),tooltip:Ze.font.subscript,click:Ve.createInvokeHandler("editor.subscript")}).render()}),Ve.memo("button.fontname",function(){return qe.buttonGroup([qe.button({className:"dropdown-toggle",contents:"<span class=\"note-current-fontname\"/> "+qe.icon(Ye.icons.caret,"span"),tooltip:Ze.font.name,data:{toggle:"dropdown"}}),qe.dropdownCheck({className:"dropdown-fontname",checkClassName:Ye.icons.menuCheck,items:Ye.fontNames.filter(Ge.isFontInstalled),template:function(ct){return"<span style=\"font-family:"+ct+"\">"+ct+"</span>"},click:Ve.createInvokeHandler("editor.fontName")})]).render()}),Ve.memo("button.fontsize",function(){return qe.buttonGroup([qe.button({className:"dropdown-toggle",contents:"<span class=\"note-current-fontsize\"/>"+qe.icon(Ye.icons.caret,"span"),tooltip:Ze.font.size,data:{toggle:"dropdown"}}),qe.dropdownCheck({className:"dropdown-fontsize",checkClassName:Ye.icons.menuCheck,items:Ye.fontSizes,click:Ve.createInvokeHandler("editor.fontSize")})]).render()}),Ve.memo("button.color",function(){return qe.buttonGroup({className:"note-color",children:[qe.button({className:"note-current-color-button",contents:qe.icon(Ye.icons.font+" note-recent-color"),tooltip:Ze.color.recent,click:function(ct){var pt=T(ct.currentTarget);Ve.invoke("editor.color",{backColor:pt.attr("data-backColor"),foreColor:pt.attr("data-foreColor")})},callback:function(ct){var pt=ct.find(".note-recent-color");pt.css("background-color","#FFFF00"),ct.attr("data-backColor","#FFFF00")}}),qe.button({className:"dropdown-toggle",contents:qe.icon(Ye.icons.caret,"span"),tooltip:Ze.color.more,data:{toggle:"dropdown"}}),qe.dropdown({items:["<li>","<div class=\"btn-group\">","  <div class=\"note-palette-title\">"+Ze.color.background+"</div>","  <div>","    <button type=\"button\" class=\"note-color-reset btn btn-default\" data-event=\"backColor\" data-value=\"inherit\">",Ze.color.transparent,"    </button>","  </div>","  <div class=\"note-holder\" data-event=\"backColor\"/>","</div>","<div class=\"btn-group\">","  <div class=\"note-palette-title\">"+Ze.color.foreground+"</div>","  <div>","    <button type=\"button\" class=\"note-color-reset btn btn-default\" data-event=\"removeFormat\" data-value=\"foreColor\">",Ze.color.resetToDefault,"    </button>","  </div>","  <div class=\"note-holder\" data-event=\"foreColor\"/>","</div>","</li>"].join(""),callback:function(ct){ct.find(".note-holder").each(function(){var pt=T(this);pt.append(qe.palette({colors:Ye.colors,eventName:pt.data("event")}).render())})},click:function(ct){var pt=T(ct.target),ht=pt.data("event"),ut=pt.data("value");if(ht&&ut){var gt="backColor"===ht?"background-color":"color",ft=pt.closest(".note-color").find(".note-recent-color"),mt=pt.closest(".note-color").find(".note-current-color-button");ft.css(gt,ut),mt.attr("data-"+ht,ut),Ve.invoke("editor."+ht,ut)}}})]}).render()}),Ve.memo("button.ul",function(){return qe.button({contents:qe.icon(Ye.icons.unorderedlist),tooltip:Ze.lists.unordered+Je("insertUnorderedList"),click:Ve.createInvokeHandler("editor.insertUnorderedList")}).render()}),Ve.memo("button.ol",function(){return qe.button({contents:qe.icon(Ye.icons.orderedlist),tooltip:Ze.lists.ordered+Je("insertOrderedList"),click:Ve.createInvokeHandler("editor.insertOrderedList")}).render()});var et=qe.button({contents:qe.icon(Ye.icons.alignLeft),tooltip:Ze.paragraph.left+Je("justifyLeft"),click:Ve.createInvokeHandler("editor.justifyLeft")}),tt=qe.button({contents:qe.icon(Ye.icons.alignCenter),tooltip:Ze.paragraph.center+Je("justifyCenter"),click:Ve.createInvokeHandler("editor.justifyCenter")}),ot=qe.button({contents:qe.icon(Ye.icons.alignRight),tooltip:Ze.paragraph.right+Je("justifyRight"),click:Ve.createInvokeHandler("editor.justifyRight")}),nt=qe.button({contents:qe.icon(Ye.icons.alignJustify),tooltip:Ze.paragraph.justify+Je("justifyFull"),click:Ve.createInvokeHandler("editor.justifyFull")}),it=qe.button({contents:qe.icon(Ye.icons.outdent),tooltip:Ze.paragraph.outdent+Je("outdent"),click:Ve.createInvokeHandler("editor.outdent")}),lt=qe.button({contents:qe.icon(Ye.icons.indent),tooltip:Ze.paragraph.indent+Je("indent"),click:Ve.createInvokeHandler("editor.indent")});Ve.memo("button.justifyLeft",N.invoke(et,"render")),Ve.memo("button.justifyCenter",N.invoke(tt,"render")),Ve.memo("button.justifyRight",N.invoke(ot,"render")),Ve.memo("button.justifyFull",N.invoke(nt,"render")),Ve.memo("button.outdent",N.invoke(it,"render")),Ve.memo("button.indent",N.invoke(lt,"render")),Ve.memo("button.paragraph",function(){return qe.buttonGroup([qe.button({className:"dropdown-toggle",contents:qe.icon(Ye.icons.alignLeft)+" "+qe.icon(Ye.icons.caret,"span"),tooltip:Ze.paragraph.paragraph,data:{toggle:"dropdown"}}),qe.dropdown([qe.buttonGroup({className:"note-align",children:[et,tt,ot,nt]}),qe.buttonGroup({className:"note-list",children:[it,lt]})])]).render()}),Ve.memo("button.height",function(){return qe.buttonGroup([qe.button({className:"dropdown-toggle",contents:qe.icon(Ye.icons.textHeight)+" "+qe.icon(Ye.icons.caret,"span"),tooltip:Ze.font.height,data:{toggle:"dropdown"}}),qe.dropdownCheck({items:Ye.lineHeights,checkClassName:Ye.icons.menuCheck,className:"dropdown-line-height",click:Ve.createInvokeHandler("editor.lineHeight")})]).render()}),Ve.memo("button.table",function(){return qe.buttonGroup([qe.button({className:"dropdown-toggle",contents:qe.icon(Ye.icons.table)+" "+qe.icon(Ye.icons.caret,"span"),tooltip:Ze.table.table,data:{toggle:"dropdown"}}),qe.dropdown({className:"note-table",items:["<div class=\"note-dimension-picker\">","  <div class=\"note-dimension-picker-mousecatcher\" data-event=\"insertTable\" data-value=\"1x1\"/>","  <div class=\"note-dimension-picker-highlighted\"/>","  <div class=\"note-dimension-picker-unhighlighted\"/>","</div>","<div class=\"note-dimension-display\">1 x 1</div>"].join("")})],{callback:function(ct){var pt=ct.find(".note-dimension-picker-mousecatcher");pt.css({width:Ye.insertTableMaxSize.col+"em",height:Ye.insertTableMaxSize.row+"em"}).mousedown(Ve.createInvokeHandler("editor.insertTable")).on("mousemove",Ge.tableMoveHandler)}}).render()}),Ve.memo("button.link",function(){return qe.button({contents:qe.icon(Ye.icons.link),tooltip:Ze.link.link+Je("linkDialog.show"),click:Ve.createInvokeHandler("linkDialog.show")}).render()}),Ve.memo("button.picture",function(){return qe.button({contents:qe.icon(Ye.icons.picture),tooltip:Ze.image.image,click:Ve.createInvokeHandler("imageDialog.show")}).render()}),Ve.memo("button.video",function(){return qe.button({contents:qe.icon(Ye.icons.video),tooltip:Ze.video.video,click:Ve.createInvokeHandler("videoDialog.show")}).render()}),Ve.memo("button.hr",function(){return qe.button({contents:qe.icon(Ye.icons.minus),tooltip:Ze.hr.insert+Je("insertHorizontalRule"),click:Ve.createInvokeHandler("editor.insertHorizontalRule")}).render()}),Ve.memo("button.fullscreen",function(){return qe.button({className:"btn-fullscreen",contents:qe.icon(Ye.icons.arrowsAlt),tooltip:Ze.options.fullscreen,click:Ve.createInvokeHandler("fullscreen.toggle")}).render()}),Ve.memo("button.codeview",function(){return qe.button({className:"btn-codeview",contents:qe.icon(Ye.icons.code),tooltip:Ze.options.codeview,click:Ve.createInvokeHandler("codeview.toggle")}).render()}),Ve.memo("button.redo",function(){return qe.button({contents:qe.icon(Ye.icons.redo),tooltip:Ze.history.redo+Je("redo"),click:Ve.createInvokeHandler("editor.redo")}).render()}),Ve.memo("button.undo",function(){return qe.button({contents:qe.icon(Ye.icons.undo),tooltip:Ze.history.undo+Je("undo"),click:Ve.createInvokeHandler("editor.undo")}).render()}),Ve.memo("button.help",function(){return qe.button({contents:qe.icon(Ye.icons.question),tooltip:Ze.options.help,click:Ve.createInvokeHandler("helpDialog.show")}).render()})},this.addImagePopoverButtons=function(){Ve.memo("button.imageSize100",function(){return qe.button({contents:"<span class=\"note-fontsize-10\">100%</span>",tooltip:Ze.image.resizeFull,click:Ve.createInvokeHandler("editor.resize","1")}).render()}),Ve.memo("button.imageSize50",function(){return qe.button({contents:"<span class=\"note-fontsize-10\">50%</span>",tooltip:Ze.image.resizeHalf,click:Ve.createInvokeHandler("editor.resize","0.5")}).render()}),Ve.memo("button.imageSize25",function(){return qe.button({contents:"<span class=\"note-fontsize-10\">25%</span>",tooltip:Ze.image.resizeQuarter,click:Ve.createInvokeHandler("editor.resize","0.25")}).render()}),Ve.memo("button.floatLeft",function(){return qe.button({contents:qe.icon(Ye.icons.alignLeft),tooltip:Ze.image.floatLeft,click:Ve.createInvokeHandler("editor.floatMe","left")}).render()}),Ve.memo("button.floatRight",function(){return qe.button({contents:qe.icon(Ye.icons.alignRight),tooltip:Ze.image.floatRight,click:Ve.createInvokeHandler("editor.floatMe","right")}).render()}),Ve.memo("button.floatNone",function(){return qe.button({contents:qe.icon(Ye.icons.alignJustify),tooltip:Ze.image.floatNone,click:Ve.createInvokeHandler("editor.floatMe","none")}).render()}),Ve.memo("button.removeMedia",function(){return qe.button({contents:qe.icon(Ye.icons.trash),tooltip:Ze.image.remove,click:Ve.createInvokeHandler("editor.removeMedia")}).render()})},this.addLinkPopoverButtons=function(){Ve.memo("button.linkDialogShow",function(){return qe.button({contents:qe.icon(Ye.icons.link),tooltip:Ze.link.edit,click:Ve.createInvokeHandler("linkDialog.show")}).render()}),Ve.memo("button.unlink",function(){return qe.button({contents:qe.icon(Ye.icons.unlink),tooltip:Ze.link.unlink,click:Ve.createInvokeHandler("editor.unlink")}).render()})},this.build=function(et,tt){for(var ot=0,nt=tt.length;ot<nt;ot++){for(var it=tt[ot],lt=it[0],dt=it[1],ct=qe.buttonGroup({className:"note-"+lt}).render(),pt=0,ht=dt.length,ut;pt<ht;pt++)ut=Ve.memo("button."+dt[pt]),ut&&ct.append("function"==typeof ut?ut(Ve):ut);ct.appendTo(et)}},this.updateCurrentStyle=function(){var et=Ve.invoke("editor.currentStyle");if(this.updateBtnStates({".note-btn-bold":function(){return"bold"===et["font-bold"]},".note-btn-italic":function(){return"italic"===et["font-italic"]},".note-btn-underline":function(){return"underline"===et["font-underline"]},".note-btn-subscript":function(){return"subscript"===et["font-subscript"]},".note-btn-superscript":function(){return"superscript"===et["font-superscript"]},".note-btn-strikethrough":function(){return"strikethrough"===et["font-strikethrough"]}}),et["font-family"]){var tt=et["font-family"].split(",").map(function(lt){return lt.replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,"")}),ot=A.find(tt,Ge.isFontInstalled);Xe.find(".dropdown-fontname li a").each(function(){var lt=T(this).data("value")+""==ot+"";this.className=lt?"checked":""}),Xe.find(".note-current-fontname").text(ot)}if(et["font-size"]){var nt=et["font-size"];Xe.find(".dropdown-fontsize li a").each(function(){var lt=T(this).data("value")+""==nt+"";this.className=lt?"checked":""}),Xe.find(".note-current-fontsize").text(nt)}if(et["line-height"]){var it=et["line-height"];Xe.find(".dropdown-line-height li a").each(function(){var lt=T(this).data("value")+""==it+"";this.className=lt?"checked":""})}},this.updateBtnStates=function(et){T.each(et,function(tt,ot){qe.toggleBtnActive(Xe.find(tt),ot())})},this.tableMoveHandler=function(et){var tt=18,ot=T(et.target.parentNode),nt=ot.next(),it=ot.find(".note-dimension-picker-mousecatcher"),lt=ot.find(".note-dimension-picker-highlighted"),dt=ot.find(".note-dimension-picker-unhighlighted"),ct;if(et.offsetX===void 0){var pt=T(et.target).offset();ct={x:et.pageX-pt.left,y:et.pageY-pt.top}}else ct={x:et.offsetX,y:et.offsetY};var ht={c:_Mathceil(ct.x/tt)||1,r:_Mathceil(ct.y/tt)||1};lt.css({width:ht.c+"em",height:ht.r+"em"}),it.data("value",ht.c+"x"+ht.r),3<ht.c&&ht.c<Ye.insertTableMaxSize.col&&dt.css({width:ht.c+1+"em"}),3<ht.r&&ht.r<Ye.insertTableMaxSize.row&&dt.css({height:ht.r+1+"em"}),nt.html(ht.c+" x "+ht.r)}},toolbar:function(Ve){var Ge=T.summernote.ui,qe=Ve.layoutInfo.note,Xe=Ve.layoutInfo.toolbar,Ye=Ve.options;this.shouldInitialize=function(){return!Ye.airMode},this.initialize=function(){Ye.toolbar=Ye.toolbar||[],Ye.toolbar.length?Ve.invoke("buttons.build",Xe,Ye.toolbar):Xe.hide(),Ye.toolbarContainer&&Xe.appendTo(Ye.toolbarContainer),qe.on("summernote.keyup summernote.mouseup summernote.change",function(){Ve.invoke("buttons.updateCurrentStyle")}),Ve.invoke("buttons.updateCurrentStyle")},this.destroy=function(){Xe.children().remove()},this.updateFullscreen=function(Ze){Ge.toggleBtnActive(Xe.find(".btn-fullscreen"),Ze)},this.updateCodeview=function(Ze){Ge.toggleBtnActive(Xe.find(".btn-codeview"),Ze),Ze?this.deactivate():this.activate()},this.activate=function(Ze){var Qe=Xe.find("button");Ze||(Qe=Qe.not(".btn-codeview")),Ge.toggleBtn(Qe,!0)},this.deactivate=function(Ze){var Qe=Xe.find("button");Ze||(Qe=Qe.not(".btn-codeview")),Ge.toggleBtn(Qe,!1)}},linkDialog:function(Ve){var Ge=this,qe=T.summernote.ui,Xe=Ve.layoutInfo.editor,Ye=Ve.options,Ze=Ye.langInfo;this.initialize=function(){var Qe=Ye.dialogsInBody?T(document.body):Xe,Je="<div class=\"form-group\"><label>"+Ze.link.textToDisplay+"</label><input class=\"note-link-text form-control\" type=\"text\" /></div><div class=\"form-group\"><label>"+Ze.link.url+"</label><input class=\"note-link-url form-control\" type=\"text\" value=\"http://\" /></div>"+(Ye.disableLinkTarget?"":"<div class=\"checkbox\"><label><input type=\"checkbox\" checked> "+Ze.link.openInNewWindow+"</label></div>"),et="<button href=\"#\" class=\"btn -dark note-link-btn disabled\" disabled>"+Ze.link.insert+"</button>";this.$dialog=qe.dialog({className:"link-dialog",title:Ze.link.insert,fade:Ye.dialogsFade,body:Je,footer:et}).render().appendTo(Qe)},this.destroy=function(){qe.hideDialog(this.$dialog),this.$dialog.remove()},this.bindEnterKey=function(Qe,Je){Qe.on("keypress",function(et){et.keyCode===pe.code.ENTER&&Je.trigger("click")})},this.toggleLinkBtn=function(Qe,Je,et){qe.toggleBtn(Qe,Je.val()&&et.val())},this.showLinkDialog=function(Qe){return T.Deferred(function(Je){var et=Ge.$dialog.find(".note-link-text"),tt=Ge.$dialog.find(".note-link-url"),ot=Ge.$dialog.find(".note-link-btn"),nt=Ge.$dialog.find("input[type=checkbox]");qe.onDialogShown(Ge.$dialog,function(){Ve.triggerEvent("dialog.shown"),Qe.url||(Qe.url=Qe.text),et.val(Qe.text);var it=function(){Ge.toggleLinkBtn(ot,et,tt),Qe.text=et.val()};et.on("input",it).on("paste",function(){setTimeout(it,0)});var lt=function(){Ge.toggleLinkBtn(ot,et,tt),Qe.text||et.val(tt.val())};tt.on("input",lt).on("paste",function(){setTimeout(lt,0)}).val(Qe.url).trigger("focus"),Ge.toggleLinkBtn(ot,et,tt),Ge.bindEnterKey(tt,ot),Ge.bindEnterKey(et,ot),nt.prop("checked",Qe.isNewWindow),ot.one("click",function(dt){dt.preventDefault(),Je.resolve({range:Qe.range,url:tt.val(),text:et.val(),isNewWindow:nt.is(":checked")}),Ge.$dialog.modal("hide")})}),qe.onDialogHidden(Ge.$dialog,function(){et.off("input paste keypress"),tt.off("input paste keypress"),ot.off("click"),"pending"===Je.state()&&Je.reject()}),qe.showDialog(Ge.$dialog)}).promise()},this.show=function(){var Qe=Ve.invoke("editor.getLinkInfo");Ve.invoke("editor.saveRange"),this.showLinkDialog(Qe).then(function(Je){Ve.invoke("editor.restoreRange"),Ve.invoke("editor.createLink",Je)}).fail(function(){Ve.invoke("editor.restoreRange")})},Ve.memo("help.linkDialog.show",Ye.langInfo.help["linkDialog.show"])},linkPopover:function(Ve){var Ge=this,qe=T.summernote.ui,Xe=Ve.options;this.events={"summernote.keyup summernote.mouseup summernote.change summernote.scroll":function(){Ge.update()},"summernote.dialog.shown":function(){Ge.hide()}},this.shouldInitialize=function(){return!A.isEmpty(Xe.popover.link)},this.initialize=function(){this.$popover=qe.popover({className:"note-link-popover",callback:function(Qe){var Je=Qe.find(".popover-content");Je.prepend("<span><a target=\"_blank\"></a>&nbsp;</span>")}}).render().appendTo("body");var Ye=this.$popover.find(".popover-content");Ve.invoke("buttons.build",Ye,Xe.popover.link)},this.destroy=function(){this.$popover.remove()},this.update=function(){if(!Ve.invoke("editor.hasFocus"))return void this.hide();var Ye=Ve.invoke("editor.createRange");if(Ye.isCollapsed()&&Ye.isOnAnchor()){var Ze=B.ancestor(Ye.sc,B.isAnchor),Qe=T(Ze).attr("href");this.$popover.find("a").attr("href",Qe).html(Qe);var Je=B.posFromPlaceholder(Ze);this.$popover.css({display:"block",left:Je.left,top:Je.top})}else this.hide()},this.hide=function(){this.$popover.hide()}},imageDialog:function(Ve){var Ge=this,qe=T.summernote.ui,Xe=Ve.layoutInfo.editor,Ye=Ve.options,Ze=Ye.langInfo;this.initialize=function(){var Qe=Ye.dialogsInBody?T(document.body):Xe,Je="";if(Ye.maximumImageFileSize){var et=_Mathfloor(Math.log(Ye.maximumImageFileSize)/6.931471805599453),tt=1*(Ye.maximumImageFileSize/Math.pow(1024,et)).toFixed(2)+" "+" KMGTP"[et]+"B";Je="<small>"+Ze.image.maximumFileSize+" : "+tt+"</small>"}var ot="<div class=\"form-group note-group-select-from-files\"><label>"+Ze.image.selectFromFiles+"</label><input class=\"note-image-input form-control\" type=\"file\" name=\"files\" accept=\"image/*\" multiple=\"multiple\" />"+Je+"</div><div class=\"form-group note-group-image-url\" style=\"overflow:auto;\"><label>"+Ze.image.url+"</label><input class=\"note-image-url form-control col-md-12\" type=\"text\" /></div>",nt="<button href=\"#\" class=\"btn -dark note-image-btn disabled\" disabled>"+Ze.image.insert+"</button>";this.$dialog=qe.dialog({title:Ze.image.insert,fade:Ye.dialogsFade,body:ot,footer:nt}).render().appendTo(Qe)},this.destroy=function(){qe.hideDialog(this.$dialog),this.$dialog.remove()},this.bindEnterKey=function(Qe,Je){Qe.on("keypress",function(et){et.keyCode===pe.code.ENTER&&Je.trigger("click")})},this.show=function(){Ve.invoke("editor.saveRange"),this.showImageDialog().then(function(Qe){qe.hideDialog(Ge.$dialog),Ve.invoke("editor.restoreRange"),"string"==typeof Qe?Ve.invoke("editor.insertImage",Qe):Ve.invoke("editor.insertImagesOrCallback",Qe)}).fail(function(){Ve.invoke("editor.restoreRange")})},this.showImageDialog=function(){return T.Deferred(function(Qe){var Je=Ge.$dialog.find(".note-image-input"),et=Ge.$dialog.find(".note-image-url"),tt=Ge.$dialog.find(".note-image-btn");qe.onDialogShown(Ge.$dialog,function(){Ve.triggerEvent("dialog.shown"),Je.replaceWith(Je.clone().on("change",function(){Qe.resolve(this.files||this.value)}).val("")),tt.click(function(ot){ot.preventDefault(),Qe.resolve(et.val())}),et.on("keyup paste",function(){var ot=et.val();qe.toggleBtn(tt,ot)}).val("").trigger("focus"),Ge.bindEnterKey(et,tt)}),qe.onDialogHidden(Ge.$dialog,function(){Je.off("change"),et.off("keyup paste keypress"),tt.off("click"),"pending"===Qe.state()&&Qe.reject()}),qe.showDialog(Ge.$dialog)})}},imagePopover:function(Ve){var Ge=T.summernote.ui,qe=Ve.options;this.shouldInitialize=function(){return!A.isEmpty(qe.popover.image)},this.initialize=function(){this.$popover=Ge.popover({className:"note-image-popover"}).render().appendTo("body");var Xe=this.$popover.find(".popover-content");Ve.invoke("buttons.build",Xe,qe.popover.image)},this.destroy=function(){this.$popover.remove()},this.update=function(Xe){if(B.isImg(Xe)){var Ye=B.posFromPlaceholder(Xe);this.$popover.css({display:"block",left:Ye.left,top:Ye.top})}else this.hide()},this.hide=function(){this.$popover.hide()}},videoDialog:function(Ve){var Ge=this,qe=T.summernote.ui,Xe=Ve.layoutInfo.editor,Ye=Ve.options,Ze=Ye.langInfo;this.initialize=function(){var Qe=Ye.dialogsInBody?T(document.body):Xe,Je="<div class=\"form-group row-fluid\"><label>"+Ze.video.url+" <small class=\"text-muted\">"+Ze.video.providers+"</small></label><input class=\"note-video-url form-control span12\" type=\"text\" /></div>",et="<button href=\"#\" class=\"btn -dark note-video-btn disabled\" disabled>"+Ze.video.insert+"</button>";this.$dialog=qe.dialog({title:Ze.video.insert,fade:Ye.dialogsFade,body:Je,footer:et}).render().appendTo(Qe)},this.destroy=function(){qe.hideDialog(this.$dialog),this.$dialog.remove()},this.bindEnterKey=function(Qe,Je){Qe.on("keypress",function(et){et.keyCode===pe.code.ENTER&&Je.trigger("click")})},this.createVideoNode=function(Qe){var Je=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,et=Qe.match(Je),tt=/(?:www\.|\/\/)instagram\.com\/p\/(.[a-zA-Z0-9_-]*)/,ot=Qe.match(tt),nt=/\/\/vine\.co\/v\/([a-zA-Z0-9]+)/,it=Qe.match(nt),lt=/\/\/(player\.)?vimeo\.com\/([a-z]*\/)*([0-9]{6,11})[?]?.*/,dt=Qe.match(lt),ct=/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/,pt=Qe.match(ct),ht=/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/,ut=Qe.match(ht),gt=/^.+.(mp4|m4v)$/,ft=Qe.match(gt),mt=/^.+.(ogg|ogv)$/,yt=Qe.match(mt),vt=/^.+.(webm)$/,bt=Qe.match(vt),Ct;if(et&&11===et[1].length){var xt=et[1];Ct=T("<iframe>").attr("frameborder",0).attr("src","//www.youtube.com/embed/"+xt).attr("width","640").attr("height","360")}else if(ot&&ot[0].length)Ct=T("<iframe>").attr("frameborder",0).attr("src","https://instagram.com/p/"+ot[1]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true");else if(it&&it[0].length)Ct=T("<iframe>").attr("frameborder",0).attr("src",it[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed");else if(dt&&dt[3].length)Ct=T("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("src","//player.vimeo.com/video/"+dt[3]).attr("width","640").attr("height","360");else if(pt&&pt[2].length)Ct=T("<iframe>").attr("frameborder",0).attr("src","//www.dailymotion.com/embed/video/"+pt[2]).attr("width","640").attr("height","360");else if(ut&&ut[1].length)Ct=T("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","498").attr("width","510").attr("src","//player.youku.com/embed/"+ut[1]);else if(ft||yt||bt)Ct=T("<video controls>").attr("src",Qe).attr("width","640").attr("height","360");else return!1;return Ct.addClass("note-video-clip"),Ct[0]},this.show=function(){var Qe=Ve.invoke("editor.getSelectedText");Ve.invoke("editor.saveRange"),this.showVideoDialog(Qe).then(function(Je){qe.hideDialog(Ge.$dialog),Ve.invoke("editor.restoreRange");var et=Ge.createVideoNode(Je);et&&Ve.invoke("editor.insertNode",et)}).fail(function(){Ve.invoke("editor.restoreRange")})},this.showVideoDialog=function(Qe){return T.Deferred(function(Je){var et=Ge.$dialog.find(".note-video-url"),tt=Ge.$dialog.find(".note-video-btn");qe.onDialogShown(Ge.$dialog,function(){Ve.triggerEvent("dialog.shown"),et.val(Qe).on("input",function(){qe.toggleBtn(tt,et.val())}).trigger("focus"),tt.click(function(ot){ot.preventDefault(),Je.resolve(et.val())}),Ge.bindEnterKey(et,tt)}),qe.onDialogHidden(Ge.$dialog,function(){et.off("input"),tt.off("click"),"pending"===Je.state()&&Je.reject()}),qe.showDialog(Ge.$dialog)})}},helpDialog:function(Ve){var Ge=this,qe=T.summernote.ui,Xe=Ve.layoutInfo.editor,Ye=Ve.options,Ze=Ye.langInfo;this.createShortCutList=function(){var Qe=Ye.keyMap[O.isMac?"mac":"pc"];return Object.keys(Qe).map(function(Je){var et=Qe[Je],tt=T("<div><div class=\"help-list-item\"/></div>");return tt.append(T("<label><kbd>"+Je+"</kdb></label>").css({width:180,"margin-right":10})).append(T("<span/>").html(Ve.memo("help."+et)||et)),tt.html()}).join("")},this.initialize=function(){var Qe=Ye.dialogsInBody?T(document.body):Xe,Je=["<p class=\"text-center\">","<a href=\"http://summernote.org/\" target=\"_blank\">Summernote 0.8.2</a> \xB7 ","<a href=\"https://github.com/summernote/summernote\" target=\"_blank\">Project</a> \xB7 ","<a href=\"https://github.com/summernote/summernote/issues\" target=\"_blank\">Issues</a>","</p>"].join("");this.$dialog=qe.dialog({title:Ze.options.help,fade:Ye.dialogsFade,body:this.createShortCutList(),footer:Je,callback:function(tt){tt.find(".modal-body").css({"max-height":300,overflow:"scroll"})}}).render().appendTo(Qe)},this.destroy=function(){qe.hideDialog(this.$dialog),this.$dialog.remove()},this.showHelpDialog=function(){return T.Deferred(function(Qe){qe.onDialogShown(Ge.$dialog,function(){Ve.triggerEvent("dialog.shown"),Qe.resolve()}),qe.showDialog(Ge.$dialog)}).promise()},this.show=function(){Ve.invoke("editor.saveRange"),this.showHelpDialog().then(function(){Ve.invoke("editor.restoreRange")})}},airPopover:function(Ve){var Ge=this,qe=T.summernote.ui,Xe=Ve.options;this.events={"summernote.keyup summernote.mouseup summernote.scroll":function(){Ge.update()},"summernote.change summernote.dialog.shown":function(){Ge.hide()},"summernote.focusout":function(Qe,Je){!O.isFF&&(Je.relatedTarget&&B.ancestor(Je.relatedTarget,N.eq(Ge.$popover[0]))||Ge.hide())}},this.shouldInitialize=function(){return Xe.airMode&&!A.isEmpty(Xe.popover.air)},this.initialize=function(){this.$popover=qe.popover({className:"note-air-popover"}).render().appendTo("body");var Ze=this.$popover.find(".popover-content");Ve.invoke("buttons.build",Ze,Xe.popover.air)},this.destroy=function(){this.$popover.remove()},this.update=function(){var Ze=Ve.invoke("editor.currentStyle");if(Ze.range&&!Ze.range.isCollapsed()){var Qe=A.last(Ze.range.getClientRects());if(Qe){var Je=N.rect2bnd(Qe);this.$popover.css({display:"block",left:_Mathmax(Je.left+Je.width/2,0)-20,top:Je.top+Je.height})}}else this.hide()},this.hide=function(){this.$popover.hide()}}},buttons:{},lang:"en-US",toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],popover:{image:[["imagesize",["imageSize100","imageSize50","imageSize25"]],["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]],link:[["link",["linkDialogShow","unlink"]]],air:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]]},airMode:!1,width:null,height:null,focus:!1,tabSize:4,styleWithSpan:!0,shortcuts:!0,textareaAutoSync:!0,direction:null,styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontSizes:["8","9","10","11","12","14","18","24","36"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],tableClassName:"table -bordered -dark",insertTableMaxSize:{col:10,row:10},dialogsInBody:!1,dialogsFade:!1,maximumImageFileSize:null,callbacks:{onInit:null,onFocus:null,onBlur:null,onEnter:null,onKeyup:null,onKeydown:null,onImageUpload:null,onImageUploadError:null},codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"linkDialog.show"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"linkDialog.show"}},icons:{align:"note-icon-align",alignCenter:"note-icon-align-center",alignJustify:"note-icon-align-justify",alignLeft:"note-icon-align-left",alignRight:"note-icon-align-right",indent:"note-icon-align-indent",outdent:"note-icon-align-outdent",arrowsAlt:"note-icon-arrows-alt",bold:"note-icon-bold",caret:"note-icon-caret",circle:"note-icon-circle",close:"note-icon-close",code:"note-icon-code",eraser:"note-icon-eraser",font:"note-icon-font",frame:"note-icon-frame",italic:"note-icon-italic",link:"note-icon-link",unlink:"note-icon-chain-broken",magic:"note-icon-magic",menuCheck:"note-icon-check",minus:"note-icon-minus",orderedlist:"note-icon-orderedlist",pencil:"note-icon-pencil",picture:"note-icon-picture",question:"note-icon-question",redo:"note-icon-redo",square:"note-icon-square",strikethrough:"note-icon-strikethrough",subscript:"note-icon-subscript",superscript:"note-icon-superscript",table:"note-icon-table",textHeight:"note-icon-text-height",trash:"note-icon-trash",underline:"note-icon-underline",undo:"note-icon-undo",unorderedlist:"note-icon-unorderedlist",video:"note-icon-video"}}})})},{codemirror:2}],2:[function(c,C,S){(function(L,T){"object"==typeof S&&"undefined"!=typeof C?C.exports=T():"function"==typeof define&&define.amd?define(T):L.CodeMirror=T()})(this,function(){"use strict";function L(td){return new RegExp("(^|\\s)"+td+"(?:$|\\s)\\s*")}function T(td){for(var od=td.childNodes.length;0<od;--od)td.removeChild(td.firstChild);return td}function N(td,od){return T(td).appendChild(od)}function A(td,od,nd,rd){var ld=document.createElement(td);if(nd&&(ld.className=nd),rd&&(ld.style.cssText=rd),"string"==typeof od)ld.appendChild(document.createTextNode(od));else if(od)for(var sd=0;sd<od.length;++sd)ld.appendChild(od[sd]);return ld}function D(td,od,nd,rd){var ld=A(td,od,nd,rd);return ld.setAttribute("role","presentation"),ld}function I(td,od){if(3==od.nodeType&&(od=od.parentNode),td.contains)return td.contains(od);do if(11==od.nodeType&&(od=od.host),od==td)return!0;while(od=od.parentNode)}function H(){var td;try{td=document.activeElement}catch(od){td=document.body||null}for(;td&&td.shadowRoot&&td.shadowRoot.activeElement;)td=td.shadowRoot.activeElement;return td}function E(td,od){var nd=td.className;L(od).test(nd)||(td.className+=(nd?" ":"")+od)}function M(td,od){for(var nd=td.split(" "),rd=0;rd<nd.length;rd++)nd[rd]&&!L(nd[rd]).test(od)&&(od+=" "+nd[rd]);return od}function P(td){var od=Array.prototype.slice.call(arguments,1);return function(){return td.apply(null,od)}}function F(td,od,nd){for(var rd in od||(od={}),td)td.hasOwnProperty(rd)&&(!1!==nd||!od.hasOwnProperty(rd))&&(od[rd]=td[rd]);return od}function R(td,od,nd,rd,ld){null==od&&(od=td.search(/[^\s\u00a0]/),-1==od&&(od=td.length));for(var sd=rd||0,ad=ld||0,dd;;){if(dd=td.indexOf("\t",sd),0>dd||dd>=od)return ad+(od-sd);ad+=dd-sd,ad+=nd-ad%nd,sd=dd+1}}function O(td,od){for(var nd=0;nd<td.length;++nd)if(td[nd]==od)return nd;return-1}function z(td,od,nd){for(var rd=0,ld=0,sd;;){sd=td.indexOf("\t",rd),-1==sd&&(sd=td.length);var ad=sd-rd;if(sd==td.length||ld+ad>=od)return rd+_Mathmin(ad,od-ld);if(ld+=sd-rd,ld+=nd-ld%nd,rd=sd+1,ld>=od)return rd}}function W(td){for(;Bs.length<=td;)Bs.push(B(Bs)+" ");return Bs[td]}function B(td){return td[td.length-1]}function U(td,od){for(var nd=[],rd=0;rd<td.length;rd++)nd[rd]=od(td[rd],rd);return nd}function K(td,od,nd){for(var rd=0,ld=nd(od);rd<td.length&&nd(td[rd])<=ld;)rd++;td.splice(rd,0,od)}function V(){}function G(td,od){var nd;return Object.create?nd=Object.create(td):(V.prototype=td,nd=new V),od&&F(od,nd),nd}function q(td){return /\w/.test(td)||"\x80"<td&&(td.toUpperCase()!=td.toLowerCase()||$s.test(td))}function _(td,od){return od?-1<od.source.indexOf("\\w")&&q(td)||od.test(td):q(td)}function X(td){for(var od in td)if(td.hasOwnProperty(od)&&td[od])return!1;return!0}function Y(td){return 768<=td.charCodeAt(0)&&Us.test(td)}function Z(td,od,nd){for(;(0>nd?0<od:od<td.length)&&Y(td.charAt(od));)od+=nd;return od}function Q(td,od,nd){for(var rd=od>nd?-1:1;;){if(od==nd)return od;var ld=(od+nd)/2,sd=0>rd?_Mathceil(ld):_Mathfloor(ld);if(sd==od)return td(sd)?od:nd;td(sd)?nd=sd:od=sd+rd}}function J(td,od,nd){var rd=this;this.input=nd,rd.scrollbarFiller=A("div",null,"CodeMirror-scrollbar-filler"),rd.scrollbarFiller.setAttribute("cm-not-content","true"),rd.gutterFiller=A("div",null,"CodeMirror-gutter-filler"),rd.gutterFiller.setAttribute("cm-not-content","true"),rd.lineDiv=D("div",null,"CodeMirror-code"),rd.selectionDiv=A("div",null,null,"position: relative; z-index: 1"),rd.cursorDiv=A("div",null,"CodeMirror-cursors"),rd.measure=A("div",null,"CodeMirror-measure"),rd.lineMeasure=A("div",null,"CodeMirror-measure"),rd.lineSpace=D("div",[rd.measure,rd.lineMeasure,rd.selectionDiv,rd.cursorDiv,rd.lineDiv],null,"position: relative; outline: none");var ld=D("div",[rd.lineSpace],"CodeMirror-lines");rd.mover=A("div",[ld],null,"position: relative"),rd.sizer=A("div",[rd.mover],"CodeMirror-sizer"),rd.sizerWidth=null,rd.heightForcer=A("div",null,null,"position: absolute; height: "+Fs+"px; width: 1px;"),rd.gutters=A("div",null,"CodeMirror-gutters"),rd.lineGutter=null,rd.scroller=A("div",[rd.sizer,rd.heightForcer,rd.gutters],"CodeMirror-scroll"),rd.scroller.setAttribute("tabIndex","-1"),rd.wrapper=A("div",[rd.scrollbarFiller,rd.gutterFiller,rd.scroller],"CodeMirror"),ps&&8>hs&&(rd.gutters.style.zIndex=-1,rd.scroller.style.paddingRight=0),us||ls&&Ss||(rd.scroller.draggable=!0),td&&(td.appendChild?td.appendChild(rd.wrapper):td(rd.wrapper)),rd.viewFrom=rd.viewTo=od.first,rd.reportedViewFrom=rd.reportedViewTo=od.first,rd.view=[],rd.renderedView=null,rd.externalMeasured=null,rd.viewOffset=0,rd.lastWrapHeight=rd.lastWrapWidth=0,rd.updateLineNumbers=null,rd.nativeBarWidth=rd.barHeight=rd.barWidth=0,rd.scrollbarsClipped=!1,rd.lineNumWidth=rd.lineNumInnerWidth=rd.lineNumChars=null,rd.alignWidgets=!1,rd.cachedCharWidth=rd.cachedTextHeight=rd.cachedPaddingH=null,rd.maxLine=null,rd.maxLineLength=0,rd.maxLineChanged=!1,rd.wheelDX=rd.wheelDY=rd.wheelStartX=rd.wheelStartY=null,rd.shift=!1,rd.selForContextMenu=null,rd.activeTouch=null,nd.init(rd)}function ee(td,od){if(od-=td.first,0>od||od>=td.size)throw new Error("There is no line "+(od+td.first)+" in the document.");for(var nd=td;!nd.lines;)for(var rd=0;;++rd){var ld=nd.children[rd],sd=ld.chunkSize();if(od<sd){nd=ld;break}od-=sd}return nd.lines[od]}function oe(td,od,nd){var rd=[],ld=od.line;return td.iter(od.line,nd.line+1,function(sd){var ad=sd.text;ld==nd.line&&(ad=ad.slice(0,nd.ch)),ld==od.line&&(ad=ad.slice(od.ch)),rd.push(ad),++ld}),rd}function ne(td,od,nd){var rd=[];return td.iter(od,nd,function(ld){rd.push(ld.text)}),rd}function re(td,od){var nd=od-td.height;if(nd)for(var rd=td;rd;rd=rd.parent)rd.height+=nd}function le(td){if(null==td.parent)return null;for(var od=td.parent,nd=O(od.lines,td),rd=od.parent;rd;od=rd,rd=rd.parent)for(var ld=0;;++ld){if(rd.children[ld]==od)break;nd+=rd.children[ld].chunkSize()}return nd+od.first}function se(td,od){var nd=td.first;outer:do{for(var rd=0;rd<td.children.length;++rd){var ld=td.children[rd],sd=ld.height;if(od<sd){td=ld;continue outer}od-=sd,nd+=ld.chunkSize()}return nd}while(!td.lines);for(var ad=0;ad<td.lines.length;++ad){var dd=td.lines[ad],cd=dd.height;if(od<cd)break;od-=cd}return nd+ad}function ae(td,od){return od>=td.first&&od<td.first+td.size}function de(td,od){return td.lineNumberFormatter(od+td.firstLineNumber)+""}function ce(td,od,nd){return void 0===nd&&(nd=null),this instanceof ce?void(this.line=td,this.ch=od,this.sticky=nd):new ce(td,od,nd)}function pe(td,od){return td.line-od.line||td.ch-od.ch}function he(td,od){return td.sticky==od.sticky&&0==pe(td,od)}function ue(td){return ce(td.line,td.ch)}function ge(td,od){return 0>pe(td,od)?od:td}function fe(td,od){return 0>pe(td,od)?td:od}function ye(td,od){return _Mathmax(td.first,_Mathmin(od,td.first+td.size-1))}function ve(td,od){if(od.line<td.first)return ce(td.first,0);var nd=td.first+td.size-1;return od.line>nd?ce(nd,ee(td,nd).text.length):be(od,ee(td,od.line).text.length)}function be(td,od){var nd=td.ch;return null==nd||nd>od?ce(td.line,od):0>nd?ce(td.line,0):td}function Ce(td,od){for(var nd=[],rd=0;rd<od.length;rd++)nd[rd]=ve(td,od[rd]);return nd}function xe(){js=!0}function ke(){Ks=!0}function Se(td,od,nd){this.marker=td,this.from=od,this.to=nd}function Le(td,od){if(td)for(var nd=0,rd;nd<td.length;++nd)if(rd=td[nd],rd.marker==od)return rd}function Te(td,od){for(var rd=0,nd;rd<td.length;++rd)td[rd]!=od&&(nd||(nd=[])).push(td[rd]);return nd}function Ne(td,od){td.markedSpans=td.markedSpans?td.markedSpans.concat([od]):[od],od.marker.attachLine(td)}function Ae(td,od,nd){var rd;if(td)for(var ld=0;ld<td.length;++ld){var sd=td[ld],ad=sd.marker,dd=null==sd.from||(ad.inclusiveLeft?sd.from<=od:sd.from<od);if(dd||sd.from==od&&"bookmark"==ad.type&&(!nd||!sd.marker.insertLeft)){var cd=null==sd.to||(ad.inclusiveRight?sd.to>=od:sd.to>od);(rd||(rd=[])).push(new Se(ad,sd.from,cd?null:sd.to))}}return rd}function De(td,od,nd){var rd;if(td)for(var ld=0;ld<td.length;++ld){var sd=td[ld],ad=sd.marker,dd=null==sd.to||(ad.inclusiveRight?sd.to>=od:sd.to>od);if(dd||sd.from==od&&"bookmark"==ad.type&&(!nd||sd.marker.insertLeft)){var cd=null==sd.from||(ad.inclusiveLeft?sd.from<=od:sd.from<od);(rd||(rd=[])).push(new Se(ad,cd?null:sd.from-od,null==sd.to?null:sd.to-od))}}return rd}function Ie(td,od){if(od.full)return null;var nd=ae(td,od.from.line)&&ee(td,od.from.line).markedSpans,rd=ae(td,od.to.line)&&ee(td,od.to.line).markedSpans;if(!nd&&!rd)return null;var ld=od.from.ch,sd=od.to.ch,ad=0==pe(od.from,od.to),dd=Ae(nd,ld,ad),cd=De(rd,sd,ad),pd=1==od.text.length,hd=B(od.text).length+(pd?ld:0);if(dd)for(var ud=0,gd;ud<dd.length;++ud)if(gd=dd[ud],null==gd.to){var fd=Le(cd,gd.marker);fd?pd&&(gd.to=null==fd.to?null:fd.to+hd):gd.to=ld}if(cd)for(var md=0,yd;md<cd.length;++md)if(yd=cd[md],null!=yd.to&&(yd.to+=hd),null==yd.from){var vd=Le(dd,yd.marker);vd||(yd.from=hd,pd&&(dd||(dd=[])).push(yd))}else yd.from+=hd,pd&&(dd||(dd=[])).push(yd);dd&&(dd=He(dd)),cd&&cd!=dd&&(cd=He(cd));var bd=[dd];if(!pd){var Cd=od.text.length-2,xd;if(0<Cd&&dd)for(var kd=0;kd<dd.length;++kd)null==dd[kd].to&&(xd||(xd=[])).push(new Se(dd[kd].marker,null,null));for(var wd=0;wd<Cd;++wd)bd.push(xd);bd.push(cd)}return bd}function He(td){for(var od=0,nd;od<td.length;++od)nd=td[od],null!=nd.from&&nd.from==nd.to&&!1!==nd.marker.clearWhenEmpty&&td.splice(od--,1);return td.length?td:null}function Ee(td,od,nd){var rd=null;if(td.iter(od.line,nd.line+1,function(fd){if(fd.markedSpans)for(var md=0,yd;md<fd.markedSpans.length;++md)yd=fd.markedSpans[md].marker,yd.readOnly&&(!rd||-1==O(rd,yd))&&(rd||(rd=[])).push(yd)}),!rd)return null;for(var ld=[{from:od,to:nd}],sd=0;sd<rd.length;++sd)for(var ad=rd[sd],dd=ad.find(0),cd=0,pd;cd<ld.length;++cd)if(pd=ld[cd],!(0>pe(pd.to,dd.from)||0<pe(pd.from,dd.to))){var hd=[cd,1],ud=pe(pd.from,dd.from),gd=pe(pd.to,dd.to);!(0>ud)&&(ad.inclusiveLeft||ud)||hd.push({from:pd.from,to:dd.from}),!(0<gd)&&(ad.inclusiveRight||gd)||hd.push({from:dd.to,to:pd.to}),ld.splice.apply(ld,hd),cd+=hd.length-3}return ld}function Me(td){var od=td.markedSpans;if(od){for(var nd=0;nd<od.length;++nd)od[nd].marker.detachLine(td);td.markedSpans=null}}function Pe(td,od){if(od){for(var nd=0;nd<od.length;++nd)od[nd].marker.attachLine(td);td.markedSpans=od}}function Fe(td){return td.inclusiveLeft?-1:0}function Re(td){return td.inclusiveRight?1:0}function Oe(td,od){var nd=td.lines.length-od.lines.length;if(0!=nd)return nd;var rd=td.find(),ld=od.find(),sd=pe(rd.from,ld.from)||Fe(td)-Fe(od);if(sd)return-sd;var ad=pe(rd.to,ld.to)||Re(td)-Re(od);return ad?ad:od.id-td.id}function ze(td,od){var nd=Ks&&td.markedSpans,rd;if(nd)for(var ld=void 0,sd=0;sd<nd.length;++sd)ld=nd[sd],ld.marker.collapsed&&null==(od?ld.from:ld.to)&&(!rd||0>Oe(rd,ld.marker))&&(rd=ld.marker);return rd}function We(td){return ze(td,!0)}function Be(td){return ze(td,!1)}function $e(td,od,nd,rd,ld){var sd=ee(td,od),ad=Ks&&sd.markedSpans;if(ad)for(var dd=0,cd;dd<ad.length;++dd)if(cd=ad[dd],!!cd.marker.collapsed){var pd=cd.marker.find(0),hd=pe(pd.from,nd)||Fe(cd.marker)-Fe(ld),ud=pe(pd.to,rd)||Re(cd.marker)-Re(ld);if(!(0<=hd&&0>=ud||0>=hd&&0<=ud)&&(0>=hd&&(cd.marker.inclusiveRight&&ld.inclusiveLeft?0<=pe(pd.to,nd):0<pe(pd.to,nd))||0<=hd&&(cd.marker.inclusiveRight&&ld.inclusiveLeft?0>=pe(pd.from,rd):0>pe(pd.from,rd))))return!0}}function Ue(td){for(var od;od=We(td);)td=od.find(-1,!0).line;return td}function je(td){for(var od;od=Be(td);)td=od.find(1,!0).line;return td}function Ke(td){for(var od,nd;od=Be(td);)td=od.find(1,!0).line,(nd||(nd=[])).push(td);return nd}function Ve(td,od){var nd=ee(td,od),rd=Ue(nd);return nd==rd?od:le(rd)}function Ge(td,od){if(od>td.lastLine())return od;var nd=ee(td,od),rd;if(!qe(td,nd))return od;for(;rd=Be(nd);)nd=rd.find(1,!0).line;return le(nd)+1}function qe(td,od){var nd=Ks&&od.markedSpans;if(nd)for(var rd=void 0,ld=0;ld<nd.length;++ld)if(rd=nd[ld],!!rd.marker.collapsed){if(null==rd.from)return!0;if(!rd.marker.widgetNode&&0==rd.from&&rd.marker.inclusiveLeft&&Xe(td,od,rd))return!0}}function Xe(td,od,nd){if(null==nd.to){var rd=nd.marker.find(1,!0);return Xe(td,rd.line,Le(rd.line.markedSpans,nd.marker))}if(nd.marker.inclusiveRight&&nd.to==od.text.length)return!0;for(var ld=void 0,sd=0;sd<od.markedSpans.length;++sd)if(ld=od.markedSpans[sd],ld.marker.collapsed&&!ld.marker.widgetNode&&ld.from==nd.to&&(null==ld.to||ld.to!=nd.from)&&(ld.marker.inclusiveLeft||nd.marker.inclusiveRight)&&Xe(td,od,ld))return!0}function Ye(td){td=Ue(td);for(var od=0,nd=td.parent,rd=0,ld;rd<nd.lines.length&&(ld=nd.lines[rd],ld!=td);++rd)od+=ld.height;for(var sd=nd.parent;sd;nd=sd,sd=nd.parent)for(var ad=0,dd;ad<sd.children.length&&(dd=sd.children[ad],dd!=nd);++ad)od+=dd.height;return od}function Ze(td){if(0==td.height)return 0;for(var od=td.text.length,rd=td,nd,ld;nd=We(rd);)ld=nd.find(0,!0),rd=ld.from.line,od+=ld.from.ch-ld.to.ch;for(rd=td;nd=Be(rd);){var sd=nd.find(0,!0);od-=rd.text.length-sd.from.ch,rd=sd.to.line,od+=rd.text.length-sd.to.ch}return od}function Qe(td){var od=td.display,nd=td.doc;od.maxLine=ee(nd,nd.first),od.maxLineLength=Ze(od.maxLine),od.maxLineChanged=!0,nd.iter(function(rd){var ld=Ze(rd);ld>od.maxLineLength&&(od.maxLineLength=ld,od.maxLine=rd)})}function Je(td,od,nd,rd){if(!td)return rd(od,nd,"ltr",0);for(var ld=!1,sd=0,ad;sd<td.length;++sd)ad=td[sd],(ad.from<nd&&ad.to>od||od==nd&&ad.to==od)&&(rd(_Mathmax(ad.from,od),_Mathmin(ad.to,nd),1==ad.level?"rtl":"ltr",sd),ld=!0);ld||rd(od,nd,"ltr")}function et(td,od,nd){var rd;Vs=null;for(var ld=0,sd;ld<td.length;++ld){if(sd=td[ld],sd.from<od&&sd.to>od)return ld;sd.to==od&&(sd.from!=sd.to&&"before"==nd?rd=ld:Vs=ld),sd.from==od&&(sd.from!=sd.to&&"before"!=nd?rd=ld:Vs=ld)}return null==rd?Vs:rd}function tt(td,od){var nd=td.order;return null==nd&&(nd=td.order=Gs(td.text,od)),nd}function ot(td,od){return td._handlers&&td._handlers[od]||qs}function nt(td,od,nd){if(td.removeEventListener)td.removeEventListener(od,nd,!1);else if(td.detachEvent)td.detachEvent("on"+od,nd);else{var rd=td._handlers,ld=rd&&rd[od];if(ld){var sd=O(ld,nd);-1<sd&&(rd[od]=ld.slice(0,sd).concat(ld.slice(sd+1)))}}}function it(td,od){var nd=ot(td,od);if(nd.length)for(var rd=Array.prototype.slice.call(arguments,2),ld=0;ld<nd.length;++ld)nd[ld].apply(null,rd)}function lt(td,od,nd){return"string"==typeof od&&(od={type:od,preventDefault:function(){this.defaultPrevented=!0}}),it(td,nd||od.type,td,od),gt(od)||od.codemirrorIgnore}function dt(td){var od=td._handlers&&td._handlers.cursorActivity;if(od)for(var nd=td.curOp.cursorActivityHandlers||(td.curOp.cursorActivityHandlers=[]),rd=0;rd<od.length;++rd)-1==O(nd,od[rd])&&nd.push(od[rd])}function ct(td,od){return 0<ot(td,od).length}function pt(td){td.prototype.on=function(od,nd){_s(this,od,nd)},td.prototype.off=function(od,nd){nt(this,od,nd)}}function ht(td){td.preventDefault?td.preventDefault():td.returnValue=!1}function ut(td){td.stopPropagation?td.stopPropagation():td.cancelBubble=!0}function gt(td){return null==td.defaultPrevented?!1==td.returnValue:td.defaultPrevented}function ft(td){ht(td),ut(td)}function mt(td){return td.target||td.srcElement}function yt(td){var od=td.which;return null==od&&(1&td.button?od=1:2&td.button?od=3:4&td.button&&(od=2)),Ls&&td.ctrlKey&&1==od&&(od=3),od}function vt(td){if(null==Ys){var od=A("span","\u200B");N(td,A("span",[od,document.createTextNode("x")])),0!=td.firstChild.offsetHeight&&(Ys=1>=od.offsetWidth&&2<od.offsetHeight&&!(ps&&8>hs))}var nd=Ys?A("span","\u200B"):A("span","\xA0",null,"display: inline-block; width: 1px; margin-right: -1px");return nd.setAttribute("cm-text",""),nd}function bt(td){if(null!=Zs)return Zs;var od=N(td,document.createTextNode("A\u062EA")),nd=Es(od,0,1).getBoundingClientRect(),rd=Es(od,1,2).getBoundingClientRect();return T(td),nd&&nd.left!=nd.right&&(Zs=3>rd.right-nd.right)}function Ct(td){if(null!=ta)return ta;var od=N(td,A("span","x")),nd=od.getBoundingClientRect(),rd=Es(od,0,1).getBoundingClientRect();return ta=1<_Mathabs(nd.left-rd.left)}function xt(td,od){2<arguments.length&&(od.dependencies=Array.prototype.slice.call(arguments,2)),oa[td]=od}function wt(td){if("string"==typeof td&&na.hasOwnProperty(td))td=na[td];else if(td&&"string"==typeof td.name&&na.hasOwnProperty(td.name)){var od=na[td.name];"string"==typeof od&&(od={name:od}),td=G(od,td),td.name=od.name}else{if("string"==typeof td&&/^[\w\-]+\/[\w\-]+\+xml$/.test(td))return wt("application/xml");if("string"==typeof td&&/^[\w\-]+\/[\w\-]+\+json$/.test(td))return wt("application/json")}return"string"==typeof td?{name:td}:td||{name:"null"}}function St(td,od){od=wt(od);var nd=oa[od.name];if(!nd)return St(td,"text/plain");var rd=nd(td,od);if(ia.hasOwnProperty(od.name)){var ld=ia[od.name];for(var sd in ld)ld.hasOwnProperty(sd)&&(rd.hasOwnProperty(sd)&&(rd["_"+sd]=rd[sd]),rd[sd]=ld[sd])}if(rd.name=od.name,od.helperType&&(rd.helperType=od.helperType),od.modeProps)for(var ad in od.modeProps)rd[ad]=od.modeProps[ad];return rd}function Lt(td,od){var nd=ia.hasOwnProperty(td)?ia[td]:ia[td]={};F(od,nd)}function Tt(td,od){if(!0===od)return od;if(td.copyState)return td.copyState(od);var nd={};for(var rd in od){var ld=od[rd];ld instanceof Array&&(ld=ld.concat([])),nd[rd]=ld}return nd}function Nt(td,od){for(var nd;td.innerMode&&(nd=td.innerMode(od),nd&&nd.mode!=td);)od=nd.state,td=nd.mode;return nd||{mode:td,state:od}}function At(td,od,nd){return!td.startState||td.startState(od,nd)}function Dt(td,od,nd,rd){var ld=[td.state.modeGen],sd={};Ot(td,od.text,td.doc.mode,nd,function(pd,hd){return ld.push(pd,hd)},sd,rd);for(var ad=nd.state,dd=function(pd){nd.baseTokens=ld;var hd=td.state.overlays[pd],ud=1,gd=0;nd.state=!0,Ot(td,od.text,hd.mode,nd,function(fd,md){for(var yd=ud,vd;gd<fd;)vd=ld[ud],vd>fd&&ld.splice(ud,1,fd,ld[ud+1],vd),ud+=2,gd=_Mathmin(fd,vd);if(md)if(hd.opaque)ld.splice(yd,ud-yd,fd,"overlay "+md),ud=yd+2;else for(;yd<ud;yd+=2){var bd=ld[yd+1];ld[yd+1]=(bd?bd+" ":"")+"overlay "+md}},sd),nd.state=ad,nd.baseTokens=null,nd.baseTokenPos=1},cd=0;cd<td.state.overlays.length;++cd)dd(cd);return{styles:ld,classes:sd.bgClass||sd.textClass?sd:null}}function It(td,od,nd){if(!od.styles||od.styles[0]!=td.state.modeGen){var rd=Ht(td,le(od)),ld=od.text.length>td.options.maxHighlightLength&&Tt(td.doc.mode,rd.state),sd=Dt(td,od,rd);ld&&(rd.state=ld),od.stateAfter=rd.save(!ld),od.styles=sd.styles,sd.classes?od.styleClasses=sd.classes:od.styleClasses&&(od.styleClasses=null),nd===td.doc.highlightFrontier&&(td.doc.modeFrontier=_Mathmax(td.doc.modeFrontier,++td.doc.highlightFrontier))}return od.styles}function Ht(td,od,nd){var rd=td.doc,ld=td.display;if(!rd.mode.startState)return new sa(rd,!0,od);var sd=zt(td,od,nd),ad=sd>rd.first&&ee(rd,sd-1).stateAfter,dd=ad?sa.fromSaved(rd,ad,sd):new sa(rd,At(rd.mode),sd);return rd.iter(sd,od,function(cd){Et(td,cd.text,dd);var pd=dd.line;cd.stateAfter=pd==od-1||0==pd%5||pd>=ld.viewFrom&&pd<ld.viewTo?dd.save():null,dd.nextLine()}),nd&&(rd.modeFrontier=dd.line),dd}function Et(td,od,nd,rd){var ld=td.doc.mode,sd=new ra(od,td.options.tabSize,nd);for(sd.start=sd.pos=rd||0,""==od&&Mt(ld,nd.state);!sd.eol();)Pt(ld,sd,nd.state),sd.start=sd.pos}function Mt(td,od){if(td.blankLine)return td.blankLine(od);if(td.innerMode){var nd=Nt(td,od);if(nd.mode.blankLine)return nd.mode.blankLine(nd.state)}}function Pt(td,od,nd,rd){for(var ld=0;10>ld;ld++){rd&&(rd[0]=Nt(td,nd).mode);var sd=td.token(od,nd);if(od.pos>od.start)return sd}throw new Error("Mode "+td.name+" failed to advance stream.")}function Ft(td,od,nd,rd){var ld=td.doc,sd=ld.mode,ad;od=ve(ld,od);var dd=ee(ld,od.line),cd=Ht(td,od.line,nd),pd=new ra(dd.text,td.options.tabSize,cd),hd;for(rd&&(hd=[]);(rd||pd.pos<od.ch)&&!pd.eol();)pd.start=pd.pos,ad=Pt(sd,pd,cd.state),rd&&hd.push(new aa(pd,ad,Tt(ld.mode,cd.state)));return rd?hd:new aa(pd,ad,cd.state)}function Rt(td,od){if(td)for(;;){var nd=td.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!nd)break;td=td.slice(0,nd.index)+td.slice(nd.index+nd[0].length);var rd=nd[1]?"bgClass":"textClass";null==od[rd]?od[rd]=nd[2]:!new RegExp("(?:^|s)"+nd[2]+"(?:$|s)").test(od[rd])&&(od[rd]+=" "+nd[2])}return td}function Ot(td,od,nd,rd,ld,sd,ad){var dd=nd.flattenSpans;null==dd&&(dd=td.options.flattenSpans);var cd=0,pd=null,hd=new ra(od,td.options.tabSize,rd),gd=td.options.addModeClass&&[null],ud;for(""==od&&Rt(Mt(nd,rd.state),sd);!hd.eol();){if(hd.pos>td.options.maxHighlightLength?(dd=!1,ad&&Et(td,od,rd,hd.pos),hd.pos=od.length,ud=null):ud=Rt(Pt(nd,hd,rd.state,gd),sd),gd){var fd=gd[0].name;fd&&(ud="m-"+(ud?fd+" "+ud:fd))}if(!dd||pd!=ud){for(;cd<hd.start;)cd=_Mathmin(hd.start,cd+5e3),ld(cd,pd);pd=ud}hd.start=hd.pos}for(;cd<hd.pos;){var md=_Mathmin(hd.pos,cd+5e3);ld(md,pd),cd=md}}function zt(td,od,nd){for(var sd=td.doc,ad=nd?-1:od-(td.doc.mode.innerMode?1e3:100),dd=od,rd,ld;dd>ad;--dd){if(dd<=sd.first)return sd.first;var cd=ee(sd,dd-1),pd=cd.stateAfter;if(pd&&(!nd||dd+(pd instanceof la?pd.lookAhead:0)<=sd.modeFrontier))return dd;var hd=R(cd.text,null,td.options.tabSize);(null==ld||rd>hd)&&(ld=dd-1,rd=hd)}return ld}function Wt(td,od){if(td.modeFrontier=_Mathmin(td.modeFrontier,od),!(td.highlightFrontier<od-10)){for(var nd=td.first,rd=od-1,ld;rd>nd;rd--)if(ld=ee(td,rd).stateAfter,ld&&(!(ld instanceof la)||rd+ld.lookAhead<od)){nd=rd+1;break}td.highlightFrontier=_Mathmin(td.highlightFrontier,nd)}}function Bt(td,od,nd,rd){td.text=od,td.stateAfter&&(td.stateAfter=null),td.styles&&(td.styles=null),null!=td.order&&(td.order=null),Me(td),Pe(td,nd);var ld=rd?rd(td):1;ld!=td.height&&re(td,ld)}function $t(td){td.parent=null,Me(td)}function Ut(td,od){if(!td||/^\s*$/.test(td))return null;var nd=od.addModeClass?pa:ca;return nd[td]||(nd[td]=td.replace(/\S+/g,"cm-$&"))}function jt(td,od){var nd=D("span",null,null,us?"padding-right: .1px":null),rd={pre:D("pre",[nd],"CodeMirror-line"),content:nd,col:0,pos:0,cm:td,trailingSpace:!1,splitSpaces:(ps||us)&&td.getOption("lineWrapping")};od.measure={};for(var ld=0;ld<=(od.rest?od.rest.length:0);ld++){var sd=ld?od.rest[ld-1]:od.line,ad=void 0;rd.pos=0,rd.addToken=Vt,bt(td.display.measure)&&(ad=tt(sd,td.doc.direction))&&(rd.addToken=qt(rd.addToken,ad)),rd.map=[];var dd=od!=td.display.externalMeasured&&le(sd);Xt(sd,rd,It(td,sd,dd)),sd.styleClasses&&(sd.styleClasses.bgClass&&(rd.bgClass=M(sd.styleClasses.bgClass,rd.bgClass||"")),sd.styleClasses.textClass&&(rd.textClass=M(sd.styleClasses.textClass,rd.textClass||""))),0==rd.map.length&&rd.map.push(0,0,rd.content.appendChild(vt(td.display.measure))),0==ld?(od.measure.map=rd.map,od.measure.cache={}):((od.measure.maps||(od.measure.maps=[])).push(rd.map),(od.measure.caches||(od.measure.caches=[])).push({}))}if(us){var cd=rd.content.lastChild;(/\bcm-tab\b/.test(cd.className)||cd.querySelector&&cd.querySelector(".cm-tab"))&&(rd.content.className="cm-tab-wrap-hack")}return it(td,"renderLine",td,od.line,rd.pre),rd.pre.className&&(rd.textClass=M(rd.pre.className,rd.textClass||"")),rd}function Kt(td){var od=A("span","\u2022","cm-invalidchar");return od.title="\\u"+td.charCodeAt(0).toString(16),od.setAttribute("aria-label",od.title),od}function Vt(td,od,nd,rd,ld,sd,ad){if(od){var dd=td.splitSpaces?Gt(od,td.trailingSpace):od,cd=td.cm.state.specialChars,pd=!1,hd;if(!cd.test(od))td.col+=od.length,hd=document.createTextNode(dd),td.map.push(td.pos,td.pos+od.length,hd),ps&&9>hs&&(pd=!0),td.pos+=od.length;else{hd=document.createDocumentFragment();for(var ud=0;;){cd.lastIndex=ud;var gd=cd.exec(od),fd=gd?gd.index-ud:od.length-ud;if(fd){var md=document.createTextNode(dd.slice(ud,ud+fd));ps&&9>hs?hd.appendChild(A("span",[md])):hd.appendChild(md),td.map.push(td.pos,td.pos+fd,md),td.col+=fd,td.pos+=fd}if(!gd)break;ud+=fd+1;var yd=void 0;if("\t"==gd[0]){var vd=td.cm.options.tabSize,bd=vd-td.col%vd;yd=hd.appendChild(A("span",W(bd),"cm-tab")),yd.setAttribute("role","presentation"),yd.setAttribute("cm-text","\t"),td.col+=bd}else"\r"==gd[0]||"\n"==gd[0]?(yd=hd.appendChild(A("span","\r"==gd[0]?"\u240D":"\u2424","cm-invalidchar")),yd.setAttribute("cm-text",gd[0]),td.col+=1):(yd=td.cm.options.specialCharPlaceholder(gd[0]),yd.setAttribute("cm-text",gd[0]),ps&&9>hs?hd.appendChild(A("span",[yd])):hd.appendChild(yd),td.col+=1);td.map.push(td.pos,td.pos+1,yd),td.pos++}}if(td.trailingSpace=32==dd.charCodeAt(od.length-1),nd||rd||ld||pd||ad){var Cd=nd||"";rd&&(Cd+=rd),ld&&(Cd+=ld);var xd=A("span",[hd],Cd,ad);return sd&&(xd.title=sd),td.content.appendChild(xd)}td.content.appendChild(hd)}}function Gt(td,od){if(1<td.length&&!/  /.test(td))return td;for(var nd=od,rd="",ld=0,sd;ld<td.length;ld++)sd=td.charAt(ld)," "==sd&&nd&&(ld==td.length-1||32==td.charCodeAt(ld+1))&&(sd="\xA0"),rd+=sd,nd=" "==sd;return rd}function qt(td,od){return function(nd,rd,ld,sd,ad,dd,cd){ld=ld?ld+" cm-force-border":"cm-force-border";for(var pd=nd.pos,hd=pd+rd.length,ud;;){ud=void 0;for(var gd=0;gd<od.length&&(ud=od[gd],!(ud.to>pd&&ud.from<=pd));gd++);if(ud.to>=hd)return td(nd,rd,ld,sd,ad,dd,cd);td(nd,rd.slice(0,ud.to-pd),ld,sd,null,dd,cd),sd=null,rd=rd.slice(ud.to-pd),pd=ud.to}}}function _t(td,od,nd,rd){var ld=!rd&&nd.widgetNode;ld&&td.map.push(td.pos,td.pos+od,ld),!rd&&td.cm.display.input.needsContentAttribute&&(!ld&&(ld=td.content.appendChild(document.createElement("span"))),ld.setAttribute("cm-marker",nd.id)),ld&&(td.cm.display.input.setUneditable(ld),td.content.appendChild(ld)),td.pos+=od,td.trailingSpace=!1}function Xt(td,od,nd){var rd=td.markedSpans,ld=td.text,sd=0;if(!rd){for(var ad=1;ad<nd.length;ad+=2)od.addToken(od,ld.slice(sd,sd=nd[ad]),Ut(nd[ad+1],od.cm.options));return}for(var dd=ld.length,cd=0,pd=1,hd="",fd=0,ud,gd,md,yd,vd,bd,Cd;;){if(fd==cd){md=yd=vd=bd=gd="",Cd=null,fd=Infinity;for(var xd=[],kd=void 0,wd=0;wd<rd.length;++wd){var Sd=rd[wd],Ld=Sd.marker;"bookmark"==Ld.type&&Sd.from==cd&&Ld.widgetNode?xd.push(Ld):Sd.from<=cd&&(null==Sd.to||Sd.to>cd||Ld.collapsed&&Sd.to==cd&&Sd.from==cd)?(null!=Sd.to&&Sd.to!=cd&&fd>Sd.to&&(fd=Sd.to,yd=""),Ld.className&&(md+=" "+Ld.className),Ld.css&&(gd=(gd?gd+";":"")+Ld.css),Ld.startStyle&&Sd.from==cd&&(vd+=" "+Ld.startStyle),Ld.endStyle&&Sd.to==fd&&(kd||(kd=[])).push(Ld.endStyle,Sd.to),Ld.title&&!bd&&(bd=Ld.title),Ld.collapsed&&(!Cd||0>Oe(Cd.marker,Ld))&&(Cd=Sd)):Sd.from>cd&&fd>Sd.from&&(fd=Sd.from)}if(kd)for(var Td=0;Td<kd.length;Td+=2)kd[Td+1]==fd&&(yd+=" "+kd[Td]);if(!Cd||Cd.from==cd)for(var Nd=0;Nd<xd.length;++Nd)_t(od,0,xd[Nd]);if(Cd&&(Cd.from||0)==cd){if(_t(od,(null==Cd.to?dd+1:Cd.to)-cd,Cd.marker,null==Cd.from),null==Cd.to)return;Cd.to==cd&&(Cd=!1)}}if(cd>=dd)break;for(var Ad=_Mathmin(dd,fd);;){if(hd){var Dd=cd+hd.length;if(!Cd){var Id=Dd>Ad?hd.slice(0,Ad-cd):hd;od.addToken(od,Id,ud?ud+md:md,vd,cd+Id.length==fd?yd:"",bd,gd)}if(Dd>=Ad){hd=hd.slice(Ad-cd),cd=Ad;break}cd=Dd,vd=""}hd=ld.slice(sd,sd=nd[pd++]),ud=Ut(nd[pd++],od.cm.options)}}}function Yt(td,od,nd){this.line=od,this.rest=Ke(od),this.size=this.rest?le(B(this.rest))-nd+1:1,this.node=this.text=null,this.hidden=qe(td,od)}function Zt(td,od,nd){for(var rd=[],sd=od,ld,ad;sd<nd;sd=ld)ad=new Yt(td.doc,ee(td.doc,sd),sd),ld=sd+ad.size,rd.push(ad);return rd}function Qt(td){ha?ha.ops.push(td):td.ownsGroup=ha={ops:[td],delayedCallbacks:[]}}function Jt(td){var od=td.delayedCallbacks,nd=0;do{for(;nd<od.length;nd++)od[nd].call(null);for(var rd=0,ld;rd<td.ops.length;rd++)if(ld=td.ops[rd],ld.cursorActivityHandlers)for(;ld.cursorActivityCalled<ld.cursorActivityHandlers.length;)ld.cursorActivityHandlers[ld.cursorActivityCalled++].call(null,ld.cm)}while(nd<od.length)}function oo(td,od){var nd=td.ownsGroup;if(nd)try{Jt(nd)}finally{ha=null,od(nd)}}function io(td,od){var nd=ot(td,od);if(nd.length){var rd=Array.prototype.slice.call(arguments,2),ld;ha?ld=ha.delayedCallbacks:ua?ld=ua:(ld=ua=[],setTimeout(ro,0));for(var sd=function(dd){ld.push(function(){return nd[dd].apply(null,rd)})},ad=0;ad<nd.length;++ad)sd(ad)}}function ro(){var td=ua;ua=null;for(var od=0;od<td.length;++od)td[od]()}function lo(td,od,nd,rd){for(var ld=0,sd;ld<od.changes.length;ld++)sd=od.changes[ld],"text"==sd?ho(td,od):"gutter"==sd?go(td,od,nd,rd):"class"==sd?uo(td,od):"widget"==sd&&fo(td,od,rd);od.changes=null}function ao(td){return td.node==td.text&&(td.node=A("div",null,null,"position: relative"),td.text.parentNode&&td.text.parentNode.replaceChild(td.node,td.text),td.node.appendChild(td.text),ps&&8>hs&&(td.node.style.zIndex=2)),td.node}function co(td,od){var nd=od.bgClass?od.bgClass+" "+(od.line.bgClass||""):od.line.bgClass;if(nd&&(nd+=" CodeMirror-linebackground"),od.background)nd?od.background.className=nd:(od.background.parentNode.removeChild(od.background),od.background=null);else if(nd){var rd=ao(od);od.background=rd.insertBefore(A("div",null,nd),rd.firstChild),td.display.input.setUneditable(od.background)}}function po(td,od){var nd=td.display.externalMeasured;return nd&&nd.line==od.line?(td.display.externalMeasured=null,od.measure=nd.measure,nd.built):jt(td,od)}function ho(td,od){var nd=od.text.className,rd=po(td,od);od.text==od.node&&(od.node=rd.pre),od.text.parentNode.replaceChild(rd.pre,od.text),od.text=rd.pre,rd.bgClass!=od.bgClass||rd.textClass!=od.textClass?(od.bgClass=rd.bgClass,od.textClass=rd.textClass,uo(td,od)):nd&&(od.text.className=nd)}function uo(td,od){co(td,od),od.line.wrapClass?ao(od).className=od.line.wrapClass:od.node!=od.text&&(od.node.className="");var nd=od.textClass?od.textClass+" "+(od.line.textClass||""):od.line.textClass;od.text.className=nd||""}function go(td,od,nd,rd){if(od.gutter&&(od.node.removeChild(od.gutter),od.gutter=null),od.gutterBackground&&(od.node.removeChild(od.gutterBackground),od.gutterBackground=null),od.line.gutterClass){var ld=ao(od);od.gutterBackground=A("div",null,"CodeMirror-gutter-background "+od.line.gutterClass,"left: "+(td.options.fixedGutter?rd.fixedPos:-rd.gutterTotalWidth)+"px; width: "+rd.gutterTotalWidth+"px"),td.display.input.setUneditable(od.gutterBackground),ld.insertBefore(od.gutterBackground,od.text)}var sd=od.line.gutterMarkers;if(td.options.lineNumbers||sd){var ad=ao(od),dd=od.gutter=A("div",null,"CodeMirror-gutter-wrapper","left: "+(td.options.fixedGutter?rd.fixedPos:-rd.gutterTotalWidth)+"px");if(td.display.input.setUneditable(dd),ad.insertBefore(dd,od.text),od.line.gutterClass&&(dd.className+=" "+od.line.gutterClass),!td.options.lineNumbers||sd&&sd["CodeMirror-linenumbers"]||(od.lineNumber=dd.appendChild(A("div",de(td.options,nd),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+rd.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+td.display.lineNumInnerWidth+"px"))),sd)for(var cd=0;cd<td.options.gutters.length;++cd){var pd=td.options.gutters[cd],hd=sd.hasOwnProperty(pd)&&sd[pd];hd&&dd.appendChild(A("div",[hd],"CodeMirror-gutter-elt","left: "+rd.gutterLeft[pd]+"px; width: "+rd.gutterWidth[pd]+"px"))}}}function fo(td,od,nd){od.alignable&&(od.alignable=null);for(var rd=od.node.firstChild,ld=void 0;rd;rd=ld)ld=rd.nextSibling,"CodeMirror-linewidget"==rd.className&&od.node.removeChild(rd);yo(td,od,nd)}function mo(td,od,nd,rd){var ld=po(td,od);return od.text=od.node=ld.pre,ld.bgClass&&(od.bgClass=ld.bgClass),ld.textClass&&(od.textClass=ld.textClass),uo(td,od),go(td,od,nd,rd),yo(td,od,rd),od.node}function yo(td,od,nd){if(vo(td,od.line,od,nd,!0),od.rest)for(var rd=0;rd<od.rest.length;rd++)vo(td,od.rest[rd],od,nd,!1)}function vo(td,od,nd,rd,ld){if(od.widgets)for(var sd=ao(nd),ad=0,dd=od.widgets;ad<dd.length;++ad){var cd=dd[ad],pd=A("div",[cd.node],"CodeMirror-linewidget");cd.handleMouseEvents||pd.setAttribute("cm-ignore-events","true"),bo(cd,pd,nd,rd),td.display.input.setUneditable(pd),ld&&cd.above?sd.insertBefore(pd,nd.gutter||nd.text):sd.appendChild(pd),io(cd,"redraw")}}function bo(td,od,nd,rd){if(td.noHScroll){(nd.alignable||(nd.alignable=[])).push(od);var ld=rd.wrapperWidth;od.style.left=rd.fixedPos+"px",td.coverGutter||(ld-=rd.gutterTotalWidth,od.style.paddingLeft=rd.gutterTotalWidth+"px"),od.style.width=ld+"px"}td.coverGutter&&(od.style.zIndex=5,od.style.position="relative",!td.noHScroll&&(od.style.marginLeft=-rd.gutterTotalWidth+"px"))}function Co(td){if(null!=td.height)return td.height;var od=td.doc.cm;if(!od)return 0;if(!I(document.body,td.node)){var nd="position: relative;";td.coverGutter&&(nd+="margin-left: -"+od.display.gutters.offsetWidth+"px;"),td.noHScroll&&(nd+="width: "+od.display.wrapper.clientWidth+"px;"),N(od.display.measure,A("div",[td.node],null,nd))}return td.height=td.node.parentNode.offsetHeight}function xo(td,od){for(var nd=mt(od);nd!=td.wrapper;nd=nd.parentNode)if(!nd||1==nd.nodeType&&"true"==nd.getAttribute("cm-ignore-events")||nd.parentNode==td.sizer&&nd!=td.mover)return!0}function ko(td){return td.lineSpace.offsetTop}function wo(td){return td.mover.offsetHeight-td.lineSpace.offsetHeight}function So(td){if(td.cachedPaddingH)return td.cachedPaddingH;var od=N(td.measure,A("pre","x")),nd=window.getComputedStyle?window.getComputedStyle(od):od.currentStyle,rd={left:parseInt(nd.paddingLeft),right:parseInt(nd.paddingRight)};return isNaN(rd.left)||isNaN(rd.right)||(td.cachedPaddingH=rd),rd}function Lo(td){return Fs-td.display.nativeBarWidth}function To(td){return td.display.scroller.clientWidth-Lo(td)-td.display.barWidth}function No(td){return td.display.scroller.clientHeight-Lo(td)-td.display.barHeight}function Ao(td,od,nd){var rd=td.options.lineWrapping,ld=rd&&To(td);if(!od.measure.heights||rd&&od.measure.width!=ld){var sd=od.measure.heights=[];if(rd){od.measure.width=ld;for(var ad=od.text.firstChild.getClientRects(),dd=0;dd<ad.length-1;dd++){var cd=ad[dd],pd=ad[dd+1];2<_Mathabs(cd.bottom-pd.bottom)&&sd.push((cd.bottom+pd.top)/2-nd.top)}}sd.push(nd.bottom-nd.top)}}function Do(td,od,nd){if(td.line==od)return{map:td.measure.map,cache:td.measure.cache};for(var rd=0;rd<td.rest.length;rd++)if(td.rest[rd]==od)return{map:td.measure.maps[rd],cache:td.measure.caches[rd]};for(var ld=0;ld<td.rest.length;ld++)if(le(td.rest[ld])>nd)return{map:td.measure.maps[ld],cache:td.measure.caches[ld],before:!0}}function Io(td,od){od=Ue(od);var nd=le(od),rd=td.display.externalMeasured=new Yt(td.doc,od,nd);rd.lineN=nd;var ld=rd.built=jt(td,rd);return rd.text=ld.pre,N(td.display.lineMeasure,ld.pre),rd}function Ho(td,od,nd,rd){return Po(td,Mo(td,od),nd,rd)}function Eo(td,od){if(od>=td.display.viewFrom&&od<td.display.viewTo)return td.display.view[un(td,od)];var nd=td.display.externalMeasured;if(nd&&od>=nd.lineN&&od<nd.lineN+nd.size)return nd}function Mo(td,od){var nd=le(od),rd=Eo(td,nd);rd&&!rd.text?rd=null:rd&&rd.changes&&(lo(td,rd,nd,an(td)),td.curOp.forceUpdate=!0),rd||(rd=Io(td,od));var ld=Do(rd,od,nd);return{line:od,view:rd,rect:null,map:ld.map,cache:ld.cache,before:ld.before,hasHeights:!1}}function Po(td,od,nd,rd,ld){od.before&&(nd=-1);var sd=nd+(rd||""),ad;return od.cache.hasOwnProperty(sd)?ad=od.cache[sd]:(!od.rect&&(od.rect=od.view.text.getBoundingClientRect()),!od.hasHeights&&(Ao(td,od.view,od.rect),od.hasHeights=!0),ad=Oo(td,od,nd,rd),!ad.bogus&&(od.cache[sd]=ad)),{left:ad.left,right:ad.right,top:ld?ad.rtop:ad.top,bottom:ld?ad.rbottom:ad.bottom}}function Fo(td,od,nd){for(var pd=0,rd,ld,sd,ad,dd,cd;pd<td.length;pd+=3)if(dd=td[pd],cd=td[pd+1],od<dd?(ld=0,sd=1,ad="left"):od<cd?(ld=od-dd,sd=ld+1):(pd==td.length-3||od==cd&&td[pd+3]>od)&&(sd=cd-dd,ld=sd-1,od>=cd&&(ad="right")),null!=ld){if(rd=td[pd+2],dd==cd&&nd==(rd.insertLeft?"left":"right")&&(ad=nd),"left"==nd&&0==ld)for(;pd&&td[pd-2]==td[pd-3]&&td[pd-1].insertLeft;)rd=td[(pd-=3)+2],ad="left";if("right"==nd&&ld==cd-dd)for(;pd<td.length-3&&td[pd+3]==td[pd+4]&&!td[pd+5].insertLeft;)rd=td[(pd+=3)+2],ad="right";break}return{node:rd,start:ld,end:sd,collapse:ad,coverStart:dd,coverEnd:cd}}function Ro(td,od){var nd=ga;if("left"==od)for(var rd=0;rd<td.length&&(nd=td[rd]).left==nd.right;rd++);else for(var ld=td.length-1;0<=ld&&(nd=td[ld]).left==nd.right;ld--);return nd}function Oo(td,od,nd,rd){var ld=Fo(od.map,nd,rd),sd=ld.node,ad=ld.start,dd=ld.end,cd=ld.collapse,pd;if(3==sd.nodeType){for(var hd=0;4>hd;hd++){for(;ad&&Y(od.line.text.charAt(ld.coverStart+ad));)--ad;for(;ld.coverStart+dd<ld.coverEnd&&Y(od.line.text.charAt(ld.coverStart+dd));)++dd;if(pd=ps&&9>hs&&0==ad&&dd==ld.coverEnd-ld.coverStart?sd.parentNode.getBoundingClientRect():Ro(Es(sd,ad,dd).getClientRects(),rd),pd.left||pd.right||0==ad)break;dd=ad,--ad,cd="right"}ps&&11>hs&&(pd=zo(td.display.measure,pd))}else{0<ad&&(cd=rd="right");var ud;pd=td.options.lineWrapping&&1<(ud=sd.getClientRects()).length?ud["right"==rd?ud.length-1:0]:sd.getBoundingClientRect()}if(ps&&9>hs&&!ad&&(!pd||!pd.left&&!pd.right)){var gd=sd.parentNode.getClientRects()[0];pd=gd?{left:gd.left,right:gd.left+sn(td.display),top:gd.top,bottom:gd.bottom}:ga}for(var fd=pd.top-od.rect.top,md=pd.bottom-od.rect.top,vd=od.view.measure.heights,bd=0;bd<vd.length-1&&!((fd+md)/2<vd[bd]);bd++);var Cd=bd?vd[bd-1]:0,xd=vd[bd],kd={left:("right"==cd?pd.right:pd.left)-od.rect.left,right:("left"==cd?pd.left:pd.right)-od.rect.left,top:Cd,bottom:xd};return pd.left||pd.right||(kd.bogus=!0),td.options.singleCursorHeightPerLine||(kd.rtop=fd,kd.rbottom=md),kd}function zo(td,od){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!Ct(td))return od;var nd=screen.logicalXDPI/screen.deviceXDPI,rd=screen.logicalYDPI/screen.deviceYDPI;return{left:od.left*nd,right:od.right*nd,top:od.top*rd,bottom:od.bottom*rd}}function Wo(td){if(td.measure&&(td.measure.cache={},td.measure.heights=null,td.rest))for(var od=0;od<td.rest.length;od++)td.measure.caches[od]={}}function Bo(td){td.display.externalMeasure=null,T(td.display.lineMeasure);for(var od=0;od<td.display.view.length;od++)Wo(td.display.view[od])}function $o(td){Bo(td),td.display.cachedCharWidth=td.display.cachedTextHeight=td.display.cachedPaddingH=null,td.options.lineWrapping||(td.display.maxLineChanged=!0),td.display.lineNumChars=null}function Uo(){return fs&&ks?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function jo(){return fs&&ks?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Ko(td){var od=0;if(td.widgets)for(var nd=0;nd<td.widgets.length;++nd)td.widgets[nd].above&&(od+=Co(td.widgets[nd]));return od}function Vo(td,od,nd,rd,ld){if(!ld){var sd=Ko(od);nd.top+=sd,nd.bottom+=sd}if("line"==rd)return nd;rd||(rd="local");var ad=Ye(od);if("local"==rd?ad+=ko(td.display):ad-=td.display.viewOffset,"page"==rd||"window"==rd){var dd=td.display.lineSpace.getBoundingClientRect();ad+=dd.top+("window"==rd?0:jo());var cd=dd.left+("window"==rd?0:Uo());nd.left+=cd,nd.right+=cd}return nd.top+=ad,nd.bottom+=ad,nd}function Go(td,od,nd){if("div"==nd)return od;var rd=od.left,ld=od.top;if("page"==nd)rd-=Uo(),ld-=jo();else if("local"==nd||!nd){var sd=td.display.sizer.getBoundingClientRect();rd+=sd.left,ld+=sd.top}var ad=td.display.lineSpace.getBoundingClientRect();return{left:rd-ad.left,top:ld-ad.top}}function qo(td,od,nd,rd,ld){return rd||(rd=ee(td.doc,od.line)),Vo(td,rd,Ho(td,rd,od.ch,ld),nd)}function _o(td,od,nd,rd,ld,sd){function ad(md,yd){var vd=Po(td,ld,md,yd?"right":"left",sd);return yd?vd.left=vd.right:vd.right=vd.left,Vo(td,rd,vd,nd)}function dd(md,yd,vd){var bd=cd[yd],Cd=1==bd.level;return ad(vd?md-1:md,Cd!=vd)}rd=rd||ee(td.doc,od.line),ld||(ld=Mo(td,rd));var cd=tt(rd,td.doc.direction),pd=od.ch,hd=od.sticky;if(pd>=rd.text.length?(pd=rd.text.length,hd="before"):0>=pd&&(pd=0,hd="after"),!cd)return ad("before"==hd?pd-1:pd,"before"==hd);var ud=et(cd,pd,hd),gd=Vs,fd=dd(pd,ud,"before"==hd);return null!=gd&&(fd.other=dd(pd,gd,"before"!=hd)),fd}function Xo(td,od){var nd=0;od=ve(td.doc,od),td.options.lineWrapping||(nd=sn(td.display)*od.ch);var rd=ee(td.doc,od.line),ld=Ye(rd)+ko(td.display);return{left:nd,right:nd,top:ld,bottom:ld+rd.height}}function Yo(td,od,nd,rd,ld){var sd=ce(td,od,nd);return sd.xRel=ld,rd&&(sd.outside=!0),sd}function Zo(td,od,nd){var rd=td.doc;if(nd+=td.display.viewOffset,0>nd)return Yo(rd.first,0,null,!0,-1);var ld=se(rd,nd),sd=rd.first+rd.size-1;if(ld>sd)return Yo(rd.first+rd.size-1,ee(rd,sd).text.length,null,!0,1);0>od&&(od=0);for(var ad=ee(rd,ld);;){var dd=tn(td,ad,ld,od,nd),cd=Be(ad),pd=cd&&cd.find(0,!0);if(cd&&(dd.ch>pd.from.ch||dd.ch==pd.from.ch&&0<dd.xRel))ld=le(ad=pd.to.line);else return dd}}function Qo(td,od,nd,rd){rd-=Ko(od);var ld=od.text.length,sd=Q(function(ad){return Po(td,nd,ad-1).bottom<=rd},ld,0);return ld=Q(function(ad){return Po(td,nd,ad).top>rd},sd,ld),{begin:sd,end:ld}}function Jo(td,od,nd,rd){nd||(nd=Mo(td,od));var ld=Vo(td,od,Po(td,nd,rd),"line").top;return Qo(td,od,nd,ld)}function en(td,od,nd,rd){return!(td.bottom<=nd)&&(!!(td.top>nd)||(rd?td.left:td.right)>od)}function tn(td,od,nd,rd,ld){ld-=Ye(od);var sd=Mo(td,od),ad=Ko(od),dd=0,cd=od.text.length,pd=!0,hd=tt(od,td.doc.direction);if(hd){var ud=(td.options.lineWrapping?rn:nn)(td,od,nd,sd,hd,rd,ld);pd=1!=ud.level,dd=pd?ud.from:ud.to-1,cd=pd?ud.to:ud.from-1}var gd=null,fd=null,md=Q(function(wd){var Sd=Po(td,sd,wd);return(Sd.top+=ad,Sd.bottom+=ad,!!en(Sd,rd,ld,!1))&&(Sd.top<=ld&&Sd.left<=rd&&(gd=wd,fd=Sd),!0)},dd,cd),bd=!1,yd,vd;if(fd){var Cd=rd-fd.left<fd.right-rd,xd=Cd==pd;md=gd+(xd?0:1),vd=xd?"after":"before",yd=Cd?fd.left:fd.right}else{pd||md!=cd&&md!=dd||md++,vd=0==md?"after":md==od.text.length?"before":Po(td,sd,md-(pd?1:0)).bottom+ad<=ld==pd?"after":"before";var kd=_o(td,ce(nd,md,vd),"line",od,sd);yd=kd.left,bd=ld<kd.top||ld>=kd.bottom}return md=Z(od.text,md,1),Yo(nd,md,vd,bd,rd-yd)}function nn(td,od,nd,rd,ld,sd,ad){var dd=Q(function(ud){var gd=ld[ud],fd=1!=gd.level;return en(_o(td,ce(nd,fd?gd.to:gd.from,fd?"before":"after"),"line",od,rd),sd,ad,!0)},0,ld.length-1),cd=ld[dd];if(0<dd){var pd=1!=cd.level,hd=_o(td,ce(nd,pd?cd.from:cd.to,pd?"after":"before"),"line",od,rd);en(hd,sd,ad,!0)&&hd.top>ad&&(cd=ld[dd-1])}return cd}function rn(td,od,nd,rd,ld,sd,ad){var dd=Qo(td,od,rd,ad),cd=dd.begin,pd=dd.end;/\s/.test(od.text.charAt(pd-1))&&pd--;for(var hd=null,ud=null,gd=0,fd;gd<ld.length;gd++)if(fd=ld[gd],!(fd.from>=pd||fd.to<=cd)){var md=1!=fd.level,yd=Po(td,rd,md?_Mathmin(pd,fd.to)-1:_Mathmax(cd,fd.from)).right,vd=yd<sd?sd-yd+1e9:yd-sd;(!hd||ud>vd)&&(hd=fd,ud=vd)}return hd||(hd=ld[ld.length-1]),hd.from<cd&&(hd={from:cd,to:hd.to,level:hd.level}),hd.to>pd&&(hd={from:hd.from,to:pd,level:hd.level}),hd}function ln(td){if(null!=td.cachedTextHeight)return td.cachedTextHeight;if(null==fa){fa=A("pre");for(var od=0;49>od;++od)fa.appendChild(document.createTextNode("x")),fa.appendChild(A("br"));fa.appendChild(document.createTextNode("x"))}N(td.measure,fa);var nd=fa.offsetHeight/50;return 3<nd&&(td.cachedTextHeight=nd),T(td.measure),nd||1}function sn(td){if(null!=td.cachedCharWidth)return td.cachedCharWidth;var od=A("span","xxxxxxxxxx"),nd=A("pre",[od]);N(td.measure,nd);var rd=od.getBoundingClientRect(),ld=(rd.right-rd.left)/10;return 2<ld&&(td.cachedCharWidth=ld),ld||10}function an(td){for(var od=td.display,nd={},rd={},ld=od.gutters.clientLeft,sd=od.gutters.firstChild,ad=0;sd;sd=sd.nextSibling,++ad)nd[td.options.gutters[ad]]=sd.offsetLeft+sd.clientLeft+ld,rd[td.options.gutters[ad]]=sd.clientWidth;return{fixedPos:dn(od),gutterTotalWidth:od.gutters.offsetWidth,gutterLeft:nd,gutterWidth:rd,wrapperWidth:od.wrapper.clientWidth}}function dn(td){return td.scroller.getBoundingClientRect().left-td.sizer.getBoundingClientRect().left}function cn(td){var od=ln(td.display),nd=td.options.lineWrapping,rd=nd&&_Mathmax(5,td.display.scroller.clientWidth/sn(td.display)-3);return function(ld){if(qe(td.doc,ld))return 0;var sd=0;if(ld.widgets)for(var ad=0;ad<ld.widgets.length;ad++)ld.widgets[ad].height&&(sd+=ld.widgets[ad].height);return nd?sd+(_Mathceil(ld.text.length/rd)||1)*od:sd+od}}function pn(td){var od=td.doc,nd=cn(td);od.iter(function(rd){var ld=nd(rd);ld!=rd.height&&re(rd,ld)})}function hn(td,od,nd,rd){var ld=td.display;if(!nd&&"true"==mt(od).getAttribute("cm-not-content"))return null;var dd=ld.lineSpace.getBoundingClientRect(),sd,ad;try{sd=od.clientX-dd.left,ad=od.clientY-dd.top}catch(ud){return null}var cd=Zo(td,sd,ad),pd;if(rd&&1==cd.xRel&&(pd=ee(td.doc,cd.line).text).length==cd.ch){var hd=R(pd,pd.length,td.options.tabSize)-pd.length;cd=ce(cd.line,_Mathmax(0,_Mathround((sd-So(td.display).left)/sn(td.display))-hd))}return cd}function un(td,od){if(od>=td.display.viewTo)return null;if(od-=td.display.viewFrom,0>od)return null;for(var nd=td.display.view,rd=0;rd<nd.length;rd++)if(od-=nd[rd].size,0>od)return rd}function gn(td){td.display.input.showSelection(td.display.input.prepareSelection())}function mn(td,od){void 0===od&&(od=!0);for(var nd=td.doc,rd={},ld=rd.cursors=document.createDocumentFragment(),sd=rd.selection=document.createDocumentFragment(),ad=0;ad<nd.sel.ranges.length;ad++)if(od||ad!=nd.sel.primIndex){var dd=nd.sel.ranges[ad];if(!(dd.from().line>=td.display.viewTo||dd.to().line<td.display.viewFrom)){var cd=dd.empty();(cd||td.options.showCursorWhenSelecting)&&yn(td,dd.head,ld),cd||bn(td,dd,sd)}}return rd}function yn(td,od,nd){var rd=_o(td,od,"div",null,null,!td.options.singleCursorHeightPerLine),ld=nd.appendChild(A("div","\xA0","CodeMirror-cursor"));if(ld.style.left=rd.left+"px",ld.style.top=rd.top+"px",ld.style.height=_Mathmax(0,rd.bottom-rd.top)*td.options.cursorHeight+"px",rd.other){var sd=nd.appendChild(A("div","\xA0","CodeMirror-cursor CodeMirror-secondarycursor"));sd.style.display="",sd.style.left=rd.other.left+"px",sd.style.top=rd.other.top+"px",sd.style.height=.85*(rd.other.bottom-rd.other.top)+"px"}}function vn(td,od){return td.top-od.top||td.left-od.left}function bn(td,od,nd){function rd(xd,kd,wd,Sd){0>kd&&(kd=0),kd=_Mathround(kd),Sd=_Mathround(Sd),dd.appendChild(A("div",null,"CodeMirror-selected","position: absolute; left: "+xd+"px;\n                             top: "+kd+"px; width: "+(null==wd?hd-xd:wd)+"px;\n                             height: "+(Sd-kd)+"px"))}function ld(xd,kd,wd){function Sd(Hd,Ed){return qo(td,ce(xd,Hd),"div",Td,Ed)}function Ld(Hd,Ed,Md){var Pd=Jo(td,Td,null,Hd),Fd="ltr"==Ed==("after"==Md)?"left":"right",Rd="after"==Md?Pd.begin:Pd.end-(/\s/.test(Td.text.charAt(Pd.end-1))?2:1);return Sd(Rd,Fd)[Fd]}var Td=ee(ad,xd),Nd=Td.text.length,Id=tt(Td,ad.direction),Ad,Dd;return Je(Id,kd||0,null==wd?Nd:wd,function(Hd,Ed,Md,Pd){var Fd="ltr"==Md,Rd=Sd(Hd,Fd?"left":"right"),Od=Sd(Ed-1,Fd?"right":"left"),zd=null==kd&&0==Hd,Wd=null==wd&&Ed==Nd,Bd=0==Pd,$d=!Id||Pd==Id.length-1;if(3>=Od.top-Rd.top){var Ud=(ud?zd:Wd)&&Bd,jd=(ud?Wd:zd)&&$d,Kd=Ud?pd:(Fd?Rd:Od).left,Vd=jd?hd:(Fd?Od:Rd).right;rd(Kd,Rd.top,Vd-Kd,Rd.bottom)}else{var Gd,qd,_d,Xd;Fd?(Gd=ud&&zd&&Bd?pd:Rd.left,qd=ud?hd:Ld(Hd,Md,"before"),_d=ud?pd:Ld(Ed,Md,"after"),Xd=ud&&Wd&&$d?hd:Od.right):(Gd=ud?Ld(Hd,Md,"before"):pd,qd=!ud&&zd&&Bd?hd:Rd.right,_d=!ud&&Wd&&$d?pd:Od.left,Xd=ud?Ld(Ed,Md,"after"):hd),rd(Gd,Rd.top,qd-Gd,Rd.bottom),Rd.bottom<Od.top&&rd(pd,Rd.bottom,null,Od.top),rd(_d,Od.top,Xd-_d,Od.bottom)}(!Ad||0>vn(Rd,Ad))&&(Ad=Rd),0>vn(Od,Ad)&&(Ad=Od),(!Dd||0>vn(Rd,Dd))&&(Dd=Rd),0>vn(Od,Dd)&&(Dd=Od)}),{start:Ad,end:Dd}}var sd=td.display,ad=td.doc,dd=document.createDocumentFragment(),cd=So(td.display),pd=cd.left,hd=_Mathmax(sd.sizerWidth,To(td)-sd.sizer.offsetLeft)-cd.right,ud="ltr"==ad.direction,gd=od.from(),fd=od.to();if(gd.line==fd.line)ld(gd.line,gd.ch,fd.ch);else{var md=ee(ad,gd.line),yd=ee(ad,fd.line),vd=Ue(md)==Ue(yd),bd=ld(gd.line,gd.ch,vd?md.text.length+1:null).end,Cd=ld(fd.line,vd?0:null,fd.ch).start;vd&&(bd.top<Cd.top-2?(rd(bd.right,bd.top,null,bd.bottom),rd(pd,Cd.top,Cd.left,Cd.bottom)):rd(bd.right,bd.top,Cd.left-bd.right,bd.bottom)),bd.bottom<Cd.top&&rd(pd,bd.bottom,null,Cd.top)}nd.appendChild(dd)}function Cn(td){if(td.state.focused){var od=td.display;clearInterval(od.blinker);var nd=!0;od.cursorDiv.style.visibility="",0<td.options.cursorBlinkRate?od.blinker=setInterval(function(){return od.cursorDiv.style.visibility=(nd=!nd)?"":"hidden"},td.options.cursorBlinkRate):0>td.options.cursorBlinkRate&&(od.cursorDiv.style.visibility="hidden")}}function xn(td){td.state.focused||(td.display.input.focus(),wn(td))}function kn(td){td.state.delayingBlurEvent=!0,setTimeout(function(){td.state.delayingBlurEvent&&(td.state.delayingBlurEvent=!1,Sn(td))},100)}function wn(td,od){td.state.delayingBlurEvent&&(td.state.delayingBlurEvent=!1),"nocursor"==td.options.readOnly||(!td.state.focused&&(it(td,"focus",td,od),td.state.focused=!0,E(td.display.wrapper,"CodeMirror-focused"),!td.curOp&&td.display.selForContextMenu!=td.doc.sel&&(td.display.input.reset(),us&&setTimeout(function(){return td.display.input.reset(!0)},20)),td.display.input.receivedFocus()),Cn(td))}function Sn(td,od){td.state.delayingBlurEvent||(td.state.focused&&(it(td,"blur",td,od),td.state.focused=!1,Hs(td.display.wrapper,"CodeMirror-focused")),clearInterval(td.display.blinker),setTimeout(function(){td.state.focused||(td.display.shift=!1)},150))}function Ln(td){for(var od=td.display,nd=od.lineDiv.offsetTop,rd=0;rd<od.view.length;rd++){var ld=od.view[rd],sd=void 0;if(!ld.hidden){if(ps&&8>hs){var ad=ld.node.offsetTop+ld.node.offsetHeight;sd=ad-nd,nd=ad}else{var dd=ld.node.getBoundingClientRect();sd=dd.bottom-dd.top}var cd=ld.line.height-sd;if(2>sd&&(sd=ln(od)),(.005<cd||-.005>cd)&&(re(ld.line,sd),Tn(ld.line),ld.rest))for(var pd=0;pd<ld.rest.length;pd++)Tn(ld.rest[pd])}}}function Tn(td){if(td.widgets)for(var od=0;od<td.widgets.length;++od){var nd=td.widgets[od],rd=nd.node.parentNode;rd&&(nd.height=rd.offsetHeight)}}function Nn(td,od,nd){var rd=nd&&null!=nd.top?_Mathmax(0,nd.top):td.scroller.scrollTop;rd=_Mathfloor(rd-ko(td));var ld=nd&&null!=nd.bottom?nd.bottom:rd+td.wrapper.clientHeight,sd=se(od,rd),ad=se(od,ld);if(nd&&nd.ensure){var dd=nd.ensure.from.line,cd=nd.ensure.to.line;dd<sd?(sd=dd,ad=se(od,Ye(ee(od,dd))+td.wrapper.clientHeight)):_Mathmin(cd,od.lastLine())>=ad&&(sd=se(od,Ye(ee(od,cd))-td.wrapper.clientHeight),ad=cd)}return{from:sd,to:_Mathmax(ad,sd+1)}}function An(td){var od=td.display,nd=od.view;if(od.alignWidgets||od.gutters.firstChild&&td.options.fixedGutter){for(var rd=dn(od)-od.scroller.scrollLeft+td.doc.scrollLeft,ld=od.gutters.offsetWidth,sd=rd+"px",ad=0;ad<nd.length;ad++)if(!nd[ad].hidden){td.options.fixedGutter&&(nd[ad].gutter&&(nd[ad].gutter.style.left=sd),nd[ad].gutterBackground&&(nd[ad].gutterBackground.style.left=sd));var dd=nd[ad].alignable;if(dd)for(var cd=0;cd<dd.length;cd++)dd[cd].style.left=sd}td.options.fixedGutter&&(od.gutters.style.left=rd+ld+"px")}}function Dn(td){if(!td.options.lineNumbers)return!1;var od=td.doc,nd=de(td.options,od.first+od.size-1),rd=td.display;if(nd.length!=rd.lineNumChars){var ld=rd.measure.appendChild(A("div",[A("div",nd)],"CodeMirror-linenumber CodeMirror-gutter-elt")),sd=ld.firstChild.offsetWidth,ad=ld.offsetWidth-sd;return rd.lineGutter.style.width="",rd.lineNumInnerWidth=_Mathmax(sd,rd.lineGutter.offsetWidth-ad)+1,rd.lineNumWidth=rd.lineNumInnerWidth+ad,rd.lineNumChars=rd.lineNumInnerWidth?nd.length:-1,rd.lineGutter.style.width=rd.lineNumWidth+"px",xi(td),!0}return!1}function In(td,od){if(!lt(td,"scrollCursorIntoView")){var nd=td.display,rd=nd.sizer.getBoundingClientRect(),ld=null;if(0>od.top+rd.top?ld=!0:od.bottom+rd.top>(window.innerHeight||document.documentElement.clientHeight)&&(ld=!1),null!=ld&&!Cs){var sd=A("div","\u200B",null,"position: absolute;\n                         top: "+(od.top-nd.viewOffset-ko(td.display))+"px;\n                         height: "+(od.bottom-od.top+Lo(td)+nd.barHeight)+"px;\n                         left: "+od.left+"px; width: "+_Mathmax(2,od.right-od.left)+"px;");td.display.lineSpace.appendChild(sd),sd.scrollIntoView(ld),td.display.lineSpace.removeChild(sd)}}}function Hn(td,od,nd,rd){null==rd&&(rd=0);var ld;td.options.lineWrapping||od!=nd||(od=od.ch?ce(od.line,"before"==od.sticky?od.ch-1:od.ch,"after"):od,nd="before"==od.sticky?ce(od.line,od.ch+1,"before"):od);for(var sd=0;5>sd;sd++){var ad=!1,dd=_o(td,od),cd=nd&&nd!=od?_o(td,nd):dd;ld={left:_Mathmin(dd.left,cd.left),top:_Mathmin(dd.top,cd.top)-rd,right:_Mathmax(dd.left,cd.left),bottom:_Mathmax(dd.bottom,cd.bottom)+rd};var pd=Mn(td,ld),hd=td.doc.scrollTop,ud=td.doc.scrollLeft;if(null!=pd.scrollTop&&(Bn(td,pd.scrollTop),1<_Mathabs(td.doc.scrollTop-hd)&&(ad=!0)),null!=pd.scrollLeft&&(Un(td,pd.scrollLeft),1<_Mathabs(td.doc.scrollLeft-ud)&&(ad=!0)),!ad)break}return ld}function En(td,od){var nd=Mn(td,od);null!=nd.scrollTop&&Bn(td,nd.scrollTop),null!=nd.scrollLeft&&Un(td,nd.scrollLeft)}function Mn(td,od){var nd=td.display,rd=ln(td.display);0>od.top&&(od.top=0);var ld=td.curOp&&null!=td.curOp.scrollTop?td.curOp.scrollTop:nd.scroller.scrollTop,sd=No(td),ad={};od.bottom-od.top>sd&&(od.bottom=od.top+sd);var dd=td.doc.height+wo(nd),cd=od.top<rd,pd=od.bottom>dd-rd;if(od.top<ld)ad.scrollTop=cd?0:od.top;else if(od.bottom>ld+sd){var hd=_Mathmin(od.top,(pd?dd:od.bottom)-sd);hd!=ld&&(ad.scrollTop=hd)}var ud=td.curOp&&null!=td.curOp.scrollLeft?td.curOp.scrollLeft:nd.scroller.scrollLeft,gd=To(td)-(td.options.fixedGutter?nd.gutters.offsetWidth:0),fd=od.right-od.left>gd;return fd&&(od.right=od.left+gd),10>od.left?ad.scrollLeft=0:od.left<ud?ad.scrollLeft=_Mathmax(0,od.left-(fd?0:10)):od.right>gd+ud-3&&(ad.scrollLeft=od.right+(fd?0:10)-gd),ad}function Pn(td,od){null==od||(zn(td),td.curOp.scrollTop=(null==td.curOp.scrollTop?td.doc.scrollTop:td.curOp.scrollTop)+od)}function Fn(td){zn(td);var od=td.getCursor();td.curOp.scrollToPos={from:od,to:od,margin:td.options.cursorScrollMargin}}function Rn(td,od,nd){(null!=od||null!=nd)&&zn(td),null!=od&&(td.curOp.scrollLeft=od),null!=nd&&(td.curOp.scrollTop=nd)}function On(td,od){zn(td),td.curOp.scrollToPos=od}function zn(td){var od=td.curOp.scrollToPos;if(od){td.curOp.scrollToPos=null;var nd=Xo(td,od.from),rd=Xo(td,od.to);Wn(td,nd,rd,od.margin)}}function Wn(td,od,nd,rd){var ld=Mn(td,{left:_Mathmin(od.left,nd.left),top:_Mathmin(od.top,nd.top)-rd,right:_Mathmax(od.right,nd.right),bottom:_Mathmax(od.bottom,nd.bottom)+rd});Rn(td,ld.scrollLeft,ld.scrollTop)}function Bn(td,od){2>_Mathabs(td.doc.scrollTop-od)||(!ls&&bi(td,{top:od}),$n(td,od,!0),ls&&bi(td),pi(td,100))}function $n(td,od,nd){od=_Mathmin(td.display.scroller.scrollHeight-td.display.scroller.clientHeight,od),(td.display.scroller.scrollTop!=od||nd)&&(td.doc.scrollTop=od,td.display.scrollbars.setScrollTop(od),td.display.scroller.scrollTop!=od&&(td.display.scroller.scrollTop=od))}function Un(td,od,nd,rd){od=_Mathmin(od,td.display.scroller.scrollWidth-td.display.scroller.clientWidth),(nd?od==td.doc.scrollLeft:2>_Mathabs(td.doc.scrollLeft-od))&&!rd||(td.doc.scrollLeft=od,An(td),td.display.scroller.scrollLeft!=od&&(td.display.scroller.scrollLeft=od),td.display.scrollbars.setScrollLeft(od))}function jn(td){var od=td.display,nd=od.gutters.offsetWidth,rd=_Mathround(td.doc.height+wo(td.display));return{clientHeight:od.scroller.clientHeight,viewHeight:od.wrapper.clientHeight,scrollWidth:od.scroller.scrollWidth,clientWidth:od.scroller.clientWidth,viewWidth:od.wrapper.clientWidth,barLeft:td.options.fixedGutter?nd:0,docHeight:rd,scrollHeight:rd+Lo(td)+od.barHeight,nativeBarWidth:od.nativeBarWidth,gutterWidth:nd}}function Kn(td,od){od||(od=jn(td));var nd=td.display.barWidth,rd=td.display.barHeight;Vn(td,od);for(var ld=0;4>ld&&nd!=td.display.barWidth||rd!=td.display.barHeight;ld++)nd!=td.display.barWidth&&td.options.lineWrapping&&Ln(td),Vn(td,jn(td)),nd=td.display.barWidth,rd=td.display.barHeight}function Vn(td,od){var nd=td.display,rd=nd.scrollbars.update(od);nd.sizer.style.paddingRight=(nd.barWidth=rd.right)+"px",nd.sizer.style.paddingBottom=(nd.barHeight=rd.bottom)+"px",nd.heightForcer.style.borderBottom=rd.bottom+"px solid transparent",rd.right&&rd.bottom?(nd.scrollbarFiller.style.display="block",nd.scrollbarFiller.style.height=rd.bottom+"px",nd.scrollbarFiller.style.width=rd.right+"px"):nd.scrollbarFiller.style.display="",rd.bottom&&td.options.coverGutterNextToScrollbar&&td.options.fixedGutter?(nd.gutterFiller.style.display="block",nd.gutterFiller.style.height=rd.bottom+"px",nd.gutterFiller.style.width=od.gutterWidth+"px"):nd.gutterFiller.style.display=""}function Gn(td){td.display.scrollbars&&(td.display.scrollbars.clear(),td.display.scrollbars.addClass&&Hs(td.display.wrapper,td.display.scrollbars.addClass)),td.display.scrollbars=new va[td.options.scrollbarStyle](function(od){td.display.wrapper.insertBefore(od,td.display.scrollbarFiller),_s(od,"mousedown",function(){td.state.focused&&setTimeout(function(){return td.display.input.focus()},0)}),od.setAttribute("cm-not-content","true")},function(od,nd){"horizontal"==nd?Un(td,od):Bn(td,od)},td),td.display.scrollbars.addClass&&E(td.display.wrapper,td.display.scrollbars.addClass)}function qn(td){td.curOp={cm:td,viewChanged:!1,startHeight:td.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++ba},Qt(td.curOp)}function _n(td){var od=td.curOp;oo(od,function(nd){for(var rd=0;rd<nd.ops.length;rd++)nd.ops[rd].cm.curOp=null;Xn(nd)})}function Xn(td){for(var od=td.ops,nd=0;nd<od.length;nd++)Yn(od[nd]);for(var rd=0;rd<od.length;rd++)Zn(od[rd]);for(var ld=0;ld<od.length;ld++)Qn(od[ld]);for(var sd=0;sd<od.length;sd++)Jn(od[sd]);for(var ad=0;ad<od.length;ad++)ei(od[ad])}function Yn(td){var od=td.cm,nd=od.display;gi(od),td.updateMaxLine&&Qe(od),td.mustUpdate=td.viewChanged||td.forceUpdate||null!=td.scrollTop||td.scrollToPos&&(td.scrollToPos.from.line<nd.viewFrom||td.scrollToPos.to.line>=nd.viewTo)||nd.maxLineChanged&&od.options.lineWrapping,td.update=td.mustUpdate&&new Ca(od,td.mustUpdate&&{top:td.scrollTop,ensure:td.scrollToPos},td.forceUpdate)}function Zn(td){td.updatedDisplay=td.mustUpdate&&yi(td.cm,td.update)}function Qn(td){var od=td.cm,nd=od.display;td.updatedDisplay&&Ln(od),td.barMeasure=jn(od),nd.maxLineChanged&&!od.options.lineWrapping&&(td.adjustWidthTo=Ho(od,nd.maxLine,nd.maxLine.text.length).left+3,od.display.sizerWidth=td.adjustWidthTo,td.barMeasure.scrollWidth=_Mathmax(nd.scroller.clientWidth,nd.sizer.offsetLeft+td.adjustWidthTo+Lo(od)+od.display.barWidth),td.maxScrollLeft=_Mathmax(0,nd.sizer.offsetLeft+td.adjustWidthTo-To(od))),(td.updatedDisplay||td.selectionChanged)&&(td.preparedSelection=nd.input.prepareSelection())}function Jn(td){var od=td.cm;null!=td.adjustWidthTo&&(od.display.sizer.style.minWidth=td.adjustWidthTo+"px",td.maxScrollLeft<od.doc.scrollLeft&&Un(od,_Mathmin(od.display.scroller.scrollLeft,td.maxScrollLeft),!0),od.display.maxLineChanged=!1);var nd=td.focus&&td.focus==H();td.preparedSelection&&od.display.input.showSelection(td.preparedSelection,nd),(td.updatedDisplay||td.startHeight!=od.doc.height)&&Kn(od,td.barMeasure),td.updatedDisplay&&ki(od,td.barMeasure),td.selectionChanged&&Cn(od),od.state.focused&&td.updateInput&&od.display.input.reset(td.typing),nd&&xn(td.cm)}function ei(td){var od=td.cm,nd=od.display,rd=od.doc;if(td.updatedDisplay&&vi(od,td.update),null!=nd.wheelStartX&&(null!=td.scrollTop||null!=td.scrollLeft||td.scrollToPos)&&(nd.wheelStartX=nd.wheelStartY=null),null!=td.scrollTop&&$n(od,td.scrollTop,td.forceScroll),null!=td.scrollLeft&&Un(od,td.scrollLeft,!0,!0),td.scrollToPos){var ld=Hn(od,ve(rd,td.scrollToPos.from),ve(rd,td.scrollToPos.to),td.scrollToPos.margin);In(od,ld)}var sd=td.maybeHiddenMarkers,ad=td.maybeUnhiddenMarkers;if(sd)for(var dd=0;dd<sd.length;++dd)sd[dd].lines.length||it(sd[dd],"hide");if(ad)for(var cd=0;cd<ad.length;++cd)ad[cd].lines.length&&it(ad[cd],"unhide");nd.wrapper.offsetHeight&&(rd.scrollTop=od.display.scroller.scrollTop),td.changeObjs&&it(od,"changes",od,td.changeObjs),td.update&&td.update.finish()}function ti(td,od){if(td.curOp)return od();qn(td);try{return od()}finally{_n(td)}}function oi(td,od){return function(){if(td.curOp)return od.apply(td,arguments);qn(td);try{return od.apply(td,arguments)}finally{_n(td)}}}function ni(td){return function(){if(this.curOp)return td.apply(this,arguments);qn(this);try{return td.apply(this,arguments)}finally{_n(this)}}}function ii(td){return function(){var od=this.cm;if(!od||od.curOp)return td.apply(this,arguments);qn(od);try{return td.apply(this,arguments)}finally{_n(od)}}}function ri(td,od,nd,rd){null==od&&(od=td.doc.first),null==nd&&(nd=td.doc.first+td.doc.size),rd||(rd=0);var ld=td.display;if(rd&&nd<ld.viewTo&&(null==ld.updateLineNumbers||ld.updateLineNumbers>od)&&(ld.updateLineNumbers=od),td.curOp.viewChanged=!0,od>=ld.viewTo)Ks&&Ve(td.doc,od)<ld.viewTo&&si(td);else if(nd<=ld.viewFrom)Ks&&Ge(td.doc,nd+rd)>ld.viewFrom?si(td):(ld.viewFrom+=rd,ld.viewTo+=rd);else if(od<=ld.viewFrom&&nd>=ld.viewTo)si(td);else if(od<=ld.viewFrom){var sd=ai(td,nd,nd+rd,1);sd?(ld.view=ld.view.slice(sd.index),ld.viewFrom=sd.lineN,ld.viewTo+=rd):si(td)}else if(nd>=ld.viewTo){var ad=ai(td,od,od,-1);ad?(ld.view=ld.view.slice(0,ad.index),ld.viewTo=ad.lineN):si(td)}else{var dd=ai(td,od,od,-1),cd=ai(td,nd,nd+rd,1);dd&&cd?(ld.view=ld.view.slice(0,dd.index).concat(Zt(td,dd.lineN,cd.lineN)).concat(ld.view.slice(cd.index)),ld.viewTo+=rd):si(td)}var pd=ld.externalMeasured;pd&&(nd<pd.lineN?pd.lineN+=rd:od<pd.lineN+pd.size&&(ld.externalMeasured=null))}function li(td,od,nd){td.curOp.viewChanged=!0;var rd=td.display,ld=td.display.externalMeasured;if(ld&&od>=ld.lineN&&od<ld.lineN+ld.size&&(rd.externalMeasured=null),!(od<rd.viewFrom||od>=rd.viewTo)){var sd=rd.view[un(td,od)];if(null!=sd.node){var ad=sd.changes||(sd.changes=[]);-1==O(ad,nd)&&ad.push(nd)}}}function si(td){td.display.viewFrom=td.display.viewTo=td.doc.first,td.display.view=[],td.display.viewOffset=0}function ai(td,od,nd,rd){var ld=un(td,od),ad=td.display.view,sd;if(!Ks||nd==td.doc.first+td.doc.size)return{index:ld,lineN:nd};for(var dd=td.display.viewFrom,cd=0;cd<ld;cd++)dd+=ad[cd].size;if(dd!=od){if(0<rd){if(ld==ad.length-1)return null;sd=dd+ad[ld].size-od,ld++}else sd=dd-od;od+=sd,nd+=sd}for(;Ve(td.doc,nd)!=nd;){if(ld==(0>rd?0:ad.length-1))return null;nd+=rd*ad[ld-(0>rd?1:0)].size,ld+=rd}return{index:ld,lineN:nd}}function di(td,od,nd){var rd=td.display,ld=rd.view;0==ld.length||od>=rd.viewTo||nd<=rd.viewFrom?(rd.view=Zt(td,od,nd),rd.viewFrom=od):(rd.viewFrom>od?rd.view=Zt(td,od,rd.viewFrom).concat(rd.view):rd.viewFrom<od&&(rd.view=rd.view.slice(un(td,od))),rd.viewFrom=od,rd.viewTo<nd?rd.view=rd.view.concat(Zt(td,rd.viewTo,nd)):rd.viewTo>nd&&(rd.view=rd.view.slice(0,un(td,nd)))),rd.viewTo=nd}function ci(td){for(var od=td.display.view,nd=0,rd=0,ld;rd<od.length;rd++)ld=od[rd],ld.hidden||ld.node&&!ld.changes||++nd;return nd}function pi(td,od){td.doc.highlightFrontier<td.display.viewTo&&td.state.highlight.set(od,P(hi,td))}function hi(td){var od=td.doc;if(!(od.highlightFrontier>=td.display.viewTo)){var nd=+new Date+td.options.workTime,rd=Ht(td,od.highlightFrontier),ld=[];od.iter(rd.line,_Mathmin(od.first+od.size,td.display.viewTo+500),function(sd){if(rd.line>=td.display.viewFrom){var ad=sd.styles,dd=sd.text.length>td.options.maxHighlightLength?Tt(od.mode,rd.state):null,cd=Dt(td,sd,rd,!0);dd&&(rd.state=dd),sd.styles=cd.styles;var pd=sd.styleClasses,hd=cd.classes;hd?sd.styleClasses=hd:pd&&(sd.styleClasses=null);for(var ud=!ad||ad.length!=sd.styles.length||pd!=hd&&(!pd||!hd||pd.bgClass!=hd.bgClass||pd.textClass!=hd.textClass),gd=0;!ud&&gd<ad.length;++gd)ud=ad[gd]!=sd.styles[gd];ud&&ld.push(rd.line),sd.stateAfter=rd.save(),rd.nextLine()}else sd.text.length<=td.options.maxHighlightLength&&Et(td,sd.text,rd),sd.stateAfter=0==rd.line%5?rd.save():null,rd.nextLine();return+new Date>nd?(pi(td,td.options.workDelay),!0):void 0}),od.highlightFrontier=rd.line,od.modeFrontier=_Mathmax(od.modeFrontier,rd.line),ld.length&&ti(td,function(){for(var sd=0;sd<ld.length;sd++)li(td,ld[sd],"text")})}}function gi(td){var od=td.display;!od.scrollbarsClipped&&od.scroller.offsetWidth&&(od.nativeBarWidth=od.scroller.offsetWidth-od.scroller.clientWidth,od.heightForcer.style.height=Lo(td)+"px",od.sizer.style.marginBottom=-od.nativeBarWidth+"px",od.sizer.style.borderRightWidth=Lo(td)+"px",od.scrollbarsClipped=!0)}function fi(td){if(td.hasFocus())return null;var od=H();if(!od||!I(td.display.lineDiv,od))return null;var nd={activeElt:od};if(window.getSelection){var rd=window.getSelection();rd.anchorNode&&rd.extend&&I(td.display.lineDiv,rd.anchorNode)&&(nd.anchorNode=rd.anchorNode,nd.anchorOffset=rd.anchorOffset,nd.focusNode=rd.focusNode,nd.focusOffset=rd.focusOffset)}return nd}function mi(td){if(td&&td.activeElt&&td.activeElt!=H()&&(td.activeElt.focus(),td.anchorNode&&I(document.body,td.anchorNode)&&I(document.body,td.focusNode))){var od=window.getSelection(),nd=document.createRange();nd.setEnd(td.anchorNode,td.anchorOffset),nd.collapse(!1),od.removeAllRanges(),od.addRange(nd),od.extend(td.focusNode,td.focusOffset)}}function yi(td,od){var nd=td.display,rd=td.doc;if(od.editorIsHidden)return si(td),!1;if(!od.force&&od.visible.from>=nd.viewFrom&&od.visible.to<=nd.viewTo&&(null==nd.updateLineNumbers||nd.updateLineNumbers>=nd.viewTo)&&nd.renderedView==nd.view&&0==ci(td))return!1;Dn(td)&&(si(td),od.dims=an(td));var ld=rd.first+rd.size,sd=_Mathmax(od.visible.from-td.options.viewportMargin,rd.first),ad=_Mathmin(ld,od.visible.to+td.options.viewportMargin);nd.viewFrom<sd&&20>sd-nd.viewFrom&&(sd=_Mathmax(rd.first,nd.viewFrom)),nd.viewTo>ad&&20>nd.viewTo-ad&&(ad=_Mathmin(ld,nd.viewTo)),Ks&&(sd=Ve(td.doc,sd),ad=Ge(td.doc,ad));var dd=sd!=nd.viewFrom||ad!=nd.viewTo||nd.lastWrapHeight!=od.wrapperHeight||nd.lastWrapWidth!=od.wrapperWidth;di(td,sd,ad),nd.viewOffset=Ye(ee(td.doc,nd.viewFrom)),td.display.mover.style.top=nd.viewOffset+"px";var cd=ci(td);if(!dd&&0==cd&&!od.force&&nd.renderedView==nd.view&&(null==nd.updateLineNumbers||nd.updateLineNumbers>=nd.viewTo))return!1;var pd=fi(td);return 4<cd&&(nd.lineDiv.style.display="none"),Ci(td,nd.updateLineNumbers,od.dims),4<cd&&(nd.lineDiv.style.display=""),nd.renderedView=nd.view,mi(pd),T(nd.cursorDiv),T(nd.selectionDiv),nd.gutters.style.height=nd.sizer.style.minHeight=0,dd&&(nd.lastWrapHeight=od.wrapperHeight,nd.lastWrapWidth=od.wrapperWidth,pi(td,400)),nd.updateLineNumbers=null,!0}function vi(td,od){for(var nd=od.viewport,rd=!0;;rd=!1){if((!rd||!td.options.lineWrapping||od.oldDisplayWidth==To(td))&&(nd&&null!=nd.top&&(nd={top:_Mathmin(td.doc.height+wo(td.display)-No(td),nd.top)}),od.visible=Nn(td.display,td.doc,nd),od.visible.from>=td.display.viewFrom&&od.visible.to<=td.display.viewTo))break;if(!yi(td,od))break;Ln(td);var ld=jn(td);gn(td),Kn(td,ld),ki(td,ld),od.force=!1}od.signal(td,"update",td),(td.display.viewFrom!=td.display.reportedViewFrom||td.display.viewTo!=td.display.reportedViewTo)&&(od.signal(td,"viewportChange",td,td.display.viewFrom,td.display.viewTo),td.display.reportedViewFrom=td.display.viewFrom,td.display.reportedViewTo=td.display.viewTo)}function bi(td,od){var nd=new Ca(td,od);if(yi(td,nd)){Ln(td),vi(td,nd);var rd=jn(td);gn(td),Kn(td,rd),ki(td,rd),nd.finish()}}function Ci(td,od,nd){function rd(md){var yd=md.nextSibling;return us&&Ls&&td.display.currentWheelTarget==md?md.style.display="none":md.parentNode.removeChild(md),yd}for(var ld=td.display,sd=td.options.lineNumbers,ad=ld.lineDiv,dd=ad.firstChild,cd=ld.view,pd=ld.viewFrom,hd=0,ud;hd<cd.length;hd++){if(ud=cd[hd],ud.hidden);else if(!ud.node||ud.node.parentNode!=ad){var gd=mo(td,ud,pd,nd);ad.insertBefore(gd,dd)}else{for(;dd!=ud.node;)dd=rd(dd);var fd=sd&&null!=od&&od<=pd&&ud.lineNumber;ud.changes&&(-1<O(ud.changes,"gutter")&&(fd=!1),lo(td,ud,pd,nd)),fd&&(T(ud.lineNumber),ud.lineNumber.appendChild(document.createTextNode(de(td.options,pd)))),dd=ud.node.nextSibling}pd+=ud.size}for(;dd;)dd=rd(dd)}function xi(td){var od=td.display.gutters.offsetWidth;td.display.sizer.style.marginLeft=od+"px"}function ki(td,od){td.display.sizer.style.minHeight=od.docHeight+"px",td.display.heightForcer.style.top=od.docHeight+"px",td.display.gutters.style.height=od.docHeight+td.display.barHeight+Lo(td)+"px"}function wi(td){var od=td.display.gutters,nd=td.options.gutters;T(od);for(var rd=0;rd<nd.length;++rd){var ld=nd[rd],sd=od.appendChild(A("div",null,"CodeMirror-gutter "+ld));"CodeMirror-linenumbers"==ld&&(td.display.lineGutter=sd,sd.style.width=(td.display.lineNumWidth||1)+"px")}od.style.display=rd?"":"none",xi(td)}function Si(td){var od=O(td.gutters,"CodeMirror-linenumbers");-1==od&&td.lineNumbers?td.gutters=td.gutters.concat(["CodeMirror-linenumbers"]):-1<od&&!td.lineNumbers&&(td.gutters=td.gutters.slice(0),td.gutters.splice(od,1))}function Li(td){var od=td.wheelDeltaX,nd=td.wheelDeltaY;return null==od&&td.detail&&td.axis==td.HORIZONTAL_AXIS&&(od=td.detail),null==nd&&td.detail&&td.axis==td.VERTICAL_AXIS?nd=td.detail:null==nd&&(nd=td.wheelDelta),{x:od,y:nd}}function Ti(td){var od=Li(td);return od.x*=ka,od.y*=ka,od}function Ni(td,od){var nd=Li(od),rd=nd.x,ld=nd.y,sd=td.display,ad=sd.scroller,dd=ad.scrollWidth>ad.clientWidth,cd=ad.scrollHeight>ad.clientHeight;if(rd&&dd||ld&&cd){if(ld&&Ls&&us)outer:for(var pd=od.target,hd=sd.view;pd!=ad;pd=pd.parentNode)for(var ud=0;ud<hd.length;ud++)if(hd[ud].node==pd){td.display.currentWheelTarget=pd;break outer}if(rd&&!ls&&!ys&&null!=ka)return ld&&cd&&Bn(td,_Mathmax(0,ad.scrollTop+ld*ka)),Un(td,_Mathmax(0,ad.scrollLeft+rd*ka)),(!ld||ld&&cd)&&ht(od),void(sd.wheelStartX=null);if(ld&&null!=ka){var gd=ld*ka,fd=td.doc.scrollTop,md=fd+sd.wrapper.clientHeight;0>gd?fd=_Mathmax(0,fd+gd-50):md=_Mathmin(td.doc.height,md+gd+50),bi(td,{top:fd,bottom:md})}20>xa&&(null==sd.wheelStartX?(sd.wheelStartX=ad.scrollLeft,sd.wheelStartY=ad.scrollTop,sd.wheelDX=rd,sd.wheelDY=ld,setTimeout(function(){if(null!=sd.wheelStartX){var yd=ad.scrollLeft-sd.wheelStartX,vd=ad.scrollTop-sd.wheelStartY,bd=vd&&sd.wheelDY&&vd/sd.wheelDY||yd&&sd.wheelDX&&yd/sd.wheelDX;sd.wheelStartX=sd.wheelStartY=null,bd&&(ka=(ka*xa+bd)/(xa+1),++xa)}},200)):(sd.wheelDX+=rd,sd.wheelDY+=ld))}}function Ai(td,od){var nd=td[od];td.sort(function(pd,hd){return pe(pd.from(),hd.from())}),od=O(td,nd);for(var rd=1;rd<td.length;rd++){var ld=td[rd],sd=td[rd-1];if(0<=pe(sd.to(),ld.from())){var ad=fe(sd.from(),ld.from()),dd=ge(sd.to(),ld.to()),cd=sd.empty()?ld.from()==ld.head:sd.from()==sd.head;rd<=od&&--od,td.splice(--rd,2,new Sa(cd?dd:ad,cd?ad:dd))}}return new wa(td,od)}function Di(td,od){return new wa([new Sa(td,od||td)],0)}function Ii(td){return td.text?ce(td.from.line+td.text.length-1,B(td.text).length+(1==td.text.length?td.from.ch:0)):td.to}function Hi(td,od){if(0>pe(td,od.from))return td;if(0>=pe(td,od.to))return Ii(od);var nd=td.line+od.text.length-(od.to.line-od.from.line)-1,rd=td.ch;return td.line==od.to.line&&(rd+=Ii(od).ch-od.to.ch),ce(nd,rd)}function Ei(td,od){for(var nd=[],rd=0,ld;rd<td.sel.ranges.length;rd++)ld=td.sel.ranges[rd],nd.push(new Sa(Hi(ld.anchor,od),Hi(ld.head,od)));return Ai(nd,td.sel.primIndex)}function Mi(td,od,nd){return td.line==od.line?ce(nd.line,td.ch-od.ch+nd.ch):ce(nd.line+(td.line-od.line),td.ch)}function Pi(td,od,nd){for(var rd=[],ld=ce(td.first,0),sd=ld,ad=0;ad<od.length;ad++){var dd=od[ad],cd=Mi(dd.from,ld,sd),pd=Mi(Ii(dd),ld,sd);if(ld=dd.to,sd=pd,"around"==nd){var hd=td.sel.ranges[ad],ud=0>pe(hd.head,hd.anchor);rd[ad]=new Sa(ud?pd:cd,ud?cd:pd)}else rd[ad]=new Sa(cd,cd)}return new wa(rd,td.sel.primIndex)}function Fi(td){td.doc.mode=St(td.options,td.doc.modeOption),Ri(td)}function Ri(td){td.doc.iter(function(od){od.stateAfter&&(od.stateAfter=null),od.styles&&(od.styles=null)}),td.doc.modeFrontier=td.doc.highlightFrontier=td.doc.first,pi(td,100),td.state.modeGen++,td.curOp&&ri(td)}function Oi(td,od){return 0==od.from.ch&&0==od.to.ch&&""==B(od.text)&&(!td.cm||td.cm.options.wholeLineUpdateBefore)}function zi(td,od,nd,rd){function ld(Cd){return nd?nd[Cd]:null}function sd(Cd,xd,kd){Bt(Cd,xd,kd,rd),io(Cd,"change",Cd,od)}function ad(Cd,xd){for(var kd=[],wd=Cd;wd<xd;++wd)kd.push(new da(pd[wd],ld(wd),rd));return kd}var dd=od.from,cd=od.to,pd=od.text,hd=ee(td,dd.line),ud=ee(td,cd.line),gd=B(pd),fd=ld(pd.length-1),md=cd.line-dd.line;if(od.full)td.insert(0,ad(0,pd.length)),td.remove(pd.length,td.size-pd.length);else if(Oi(td,od)){var yd=ad(0,pd.length-1);sd(ud,ud.text,fd),md&&td.remove(dd.line,md),yd.length&&td.insert(dd.line,yd)}else if(hd==ud){if(1==pd.length)sd(hd,hd.text.slice(0,dd.ch)+gd+hd.text.slice(cd.ch),fd);else{var vd=ad(1,pd.length-1);vd.push(new da(gd+hd.text.slice(cd.ch),fd,rd)),sd(hd,hd.text.slice(0,dd.ch)+pd[0],ld(0)),td.insert(dd.line+1,vd)}}else if(1==pd.length)sd(hd,hd.text.slice(0,dd.ch)+pd[0]+ud.text.slice(cd.ch),ld(0)),td.remove(dd.line+1,md);else{sd(hd,hd.text.slice(0,dd.ch)+pd[0],ld(0)),sd(ud,gd+ud.text.slice(cd.ch),fd);var bd=ad(1,pd.length-1);1<md&&td.remove(dd.line+1,md-1),td.insert(dd.line+1,bd)}io(td,"change",td,od)}function Wi(td,od,nd){function rd(ld,sd,ad){if(ld.linked)for(var dd=0,cd;dd<ld.linked.length;++dd)if(cd=ld.linked[dd],cd.doc!=sd){var pd=ad&&cd.sharedHist;(!nd||pd)&&(od(cd.doc,pd),rd(cd.doc,ld,pd))}}rd(td,null,!0)}function Bi(td,od){if(od.cm)throw new Error("This document is already in use.");td.doc=od,od.cm=td,pn(td),Fi(td),$i(td),td.options.lineWrapping||Qe(td),td.options.mode=od.modeOption,ri(td)}function $i(td){("rtl"==td.doc.direction?E:Hs)(td.display.lineDiv,"CodeMirror-rtl")}function Ui(td){ti(td,function(){$i(td),ri(td)})}function ji(td){this.done=[],this.undone=[],this.undoDepth=Infinity,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=td||1}function Ki(td,od){var nd={from:ue(od.from),to:Ii(od),text:oe(td,od.from,od.to)};return Zi(td,nd,od.from.line,od.to.line+1),Wi(td,function(rd){return Zi(rd,nd,od.from.line,od.to.line+1)},!0),nd}function Vi(td){for(;td.length;){var od=B(td);if(od.ranges)td.pop();else break}}function Gi(td,od){return od?(Vi(td.done),B(td.done)):td.done.length&&!B(td.done).ranges?B(td.done):1<td.done.length&&!td.done[td.done.length-2].ranges?(td.done.pop(),B(td.done)):void 0}function qi(td,od,nd,rd){var ld=td.history;ld.undone.length=0;var sd=+new Date,ad,dd;if((ld.lastOp==rd||ld.lastOrigin==od.origin&&od.origin&&("+"==od.origin.charAt(0)&&td.cm&&ld.lastModTime>sd-td.cm.options.historyEventDelay||"*"==od.origin.charAt(0)))&&(ad=Gi(ld,ld.lastOp==rd)))dd=B(ad.changes),0==pe(od.from,od.to)&&0==pe(od.from,dd.to)?dd.to=Ii(od):ad.changes.push(Ki(td,od));else{var cd=B(ld.done);for(cd&&cd.ranges||Yi(td.sel,ld.done),ad={changes:[Ki(td,od)],generation:ld.generation},ld.done.push(ad);ld.done.length>ld.undoDepth;)ld.done.shift(),ld.done[0].ranges||ld.done.shift()}ld.done.push(nd),ld.generation=++ld.maxGeneration,ld.lastModTime=ld.lastSelTime=sd,ld.lastOp=ld.lastSelOp=rd,ld.lastOrigin=ld.lastSelOrigin=od.origin,dd||it(td,"historyAdded")}function _i(td,od,nd,rd){var ld=od.charAt(0);return"*"==ld||"+"==ld&&nd.ranges.length==rd.ranges.length&&nd.somethingSelected()==rd.somethingSelected()&&new Date-td.history.lastSelTime<=(td.cm?td.cm.options.historyEventDelay:500)}function Xi(td,od,nd,rd){var ld=td.history,sd=rd&&rd.origin;nd==ld.lastSelOp||sd&&ld.lastSelOrigin==sd&&(ld.lastModTime==ld.lastSelTime&&ld.lastOrigin==sd||_i(td,sd,B(ld.done),od))?ld.done[ld.done.length-1]=od:Yi(od,ld.done),ld.lastSelTime=+new Date,ld.lastSelOrigin=sd,ld.lastSelOp=nd,rd&&!1!==rd.clearRedo&&Vi(ld.undone)}function Yi(td,od){var nd=B(od);nd&&nd.ranges&&nd.equals(td)||od.push(td)}function Zi(td,od,nd,rd){var ld=od["spans_"+td.id],sd=0;td.iter(_Mathmax(td.first,nd),_Mathmin(td.first+td.size,rd),function(ad){ad.markedSpans&&((ld||(ld=od["spans_"+td.id]={}))[sd]=ad.markedSpans),++sd})}function Qi(td){if(!td)return null;for(var nd=0,od;nd<td.length;++nd)td[nd].marker.explicitlyCleared?od||(od=td.slice(0,nd)):od&&od.push(td[nd]);return od?od.length?od:null:td}function Ji(td,od){var nd=od["spans_"+td.id];if(!nd)return null;for(var rd=[],ld=0;ld<od.text.length;++ld)rd.push(Qi(nd[ld]));return rd}function er(td,od){var nd=Ji(td,od),rd=Ie(td,od);if(!nd)return rd;if(!rd)return nd;for(var ld=0;ld<nd.length;++ld){var sd=nd[ld],ad=rd[ld];if(sd&&ad)spans:for(var dd=0,cd;dd<ad.length;++dd){cd=ad[dd];for(var pd=0;pd<sd.length;++pd)if(sd[pd].marker==cd.marker)continue spans;sd.push(cd)}else ad&&(nd[ld]=ad)}return nd}function tr(td,od,nd){for(var rd=[],ld=0,sd;ld<td.length;++ld){if(sd=td[ld],sd.ranges){rd.push(nd?wa.prototype.deepCopy.call(sd):sd);continue}var ad=sd.changes,dd=[];rd.push({changes:dd});for(var cd=0;cd<ad.length;++cd){var pd=ad[cd],hd=void 0;if(dd.push({from:pd.from,to:pd.to,text:pd.text}),od)for(var ud in pd)(hd=ud.match(/^spans_(\d+)$/))&&-1<O(od,+hd[1])&&(B(dd)[ud]=pd[ud],delete pd[ud])}}return rd}function or(td,od,nd,rd){if(rd){var ld=td.anchor;if(nd){var sd=0>pe(od,ld);sd==0>pe(nd,ld)?sd!=0>pe(od,nd)&&(od=nd):(ld=od,od=nd)}return new Sa(ld,od)}return new Sa(nd||od,od)}function nr(td,od,nd,rd,ld){null==ld&&(ld=td.cm&&(td.cm.display.shift||td.extend)),dr(td,new wa([or(td.sel.primary(),od,nd,ld)],0),rd)}function ir(td,od,nd){for(var rd=[],ld=td.cm&&(td.cm.display.shift||td.extend),sd=0;sd<td.sel.ranges.length;sd++)rd[sd]=or(td.sel.ranges[sd],od[sd],null,ld);var ad=Ai(rd,td.sel.primIndex);dr(td,ad,nd)}function rr(td,od,nd,rd){var ld=td.sel.ranges.slice(0);ld[od]=nd,dr(td,Ai(ld,td.sel.primIndex),rd)}function lr(td,od,nd,rd){dr(td,Di(od,nd),rd)}function sr(td,od,nd){var rd={ranges:od.ranges,update:function(ld){var sd=this;this.ranges=[];for(var ad=0;ad<ld.length;ad++)sd.ranges[ad]=new Sa(ve(td,ld[ad].anchor),ve(td,ld[ad].head))},origin:nd&&nd.origin};return it(td,"beforeSelectionChange",td,rd),td.cm&&it(td.cm,"beforeSelectionChange",td.cm,rd),rd.ranges==od.ranges?od:Ai(rd.ranges,rd.ranges.length-1)}function ar(td,od,nd){var rd=td.history.done,ld=B(rd);ld&&ld.ranges?(rd[rd.length-1]=od,cr(td,od,nd)):dr(td,od,nd)}function dr(td,od,nd){cr(td,od,nd),Xi(td,td.sel,td.cm?td.cm.curOp.id:NaN,nd)}function cr(td,od,nd){(ct(td,"beforeSelectionChange")||td.cm&&ct(td.cm,"beforeSelectionChange"))&&(od=sr(td,od,nd));var rd=nd&&nd.bias||(0>pe(od.primary().head,td.sel.primary().head)?-1:1);pr(td,ur(td,od,rd,!0)),!(nd&&!1===nd.scroll)&&td.cm&&Fn(td.cm)}function pr(td,od){od.equals(td.sel)||(td.sel=od,td.cm&&(td.cm.curOp.updateInput=td.cm.curOp.selectionChanged=!0,dt(td.cm)),io(td,"cursorActivity",td))}function hr(td){pr(td,ur(td,td.sel,null,!1))}function ur(td,od,nd,rd){for(var sd=0,ld;sd<od.ranges.length;sd++){var ad=od.ranges[sd],dd=od.ranges.length==td.sel.ranges.length&&td.sel.ranges[sd],cd=fr(td,ad.anchor,dd&&dd.anchor,nd,rd),pd=fr(td,ad.head,dd&&dd.head,nd,rd);(ld||cd!=ad.anchor||pd!=ad.head)&&(!ld&&(ld=od.ranges.slice(0,sd)),ld[sd]=new Sa(cd,pd))}return ld?Ai(ld,od.primIndex):od}function gr(td,od,nd,rd,ld){var sd=ee(td,od.line);if(sd.markedSpans)for(var ad=0;ad<sd.markedSpans.length;++ad){var dd=sd.markedSpans[ad],cd=dd.marker;if((null==dd.from||(cd.inclusiveLeft?dd.from<=od.ch:dd.from<od.ch))&&(null==dd.to||(cd.inclusiveRight?dd.to>=od.ch:dd.to>od.ch))){if(ld&&(it(cd,"beforeCursorEnter"),cd.explicitlyCleared))if(!sd.markedSpans)break;else{--ad;continue}if(!cd.atomic)continue;if(nd){var pd=cd.find(0>rd?1:-1),hd=void 0;if((0>rd?cd.inclusiveRight:cd.inclusiveLeft)&&(pd=mr(td,pd,-rd,pd&&pd.line==od.line?sd:null)),pd&&pd.line==od.line&&(hd=pe(pd,nd))&&(0>rd?0>hd:0<hd))return gr(td,pd,od,rd,ld)}var ud=cd.find(0>rd?-1:1);return(0>rd?cd.inclusiveLeft:cd.inclusiveRight)&&(ud=mr(td,ud,rd,ud.line==od.line?sd:null)),ud?gr(td,ud,od,rd,ld):null}}return od}function fr(td,od,nd,rd,ld){var sd=rd||1,ad=gr(td,od,nd,sd,ld)||!ld&&gr(td,od,nd,sd,!0)||gr(td,od,nd,-sd,ld)||!ld&&gr(td,od,nd,-sd,!0);return ad?ad:(td.cantEdit=!0,ce(td.first,0))}function mr(td,od,nd,rd){return 0>nd&&0==od.ch?od.line>td.first?ve(td,ce(od.line-1)):null:0<nd&&od.ch==(rd||ee(td,od.line)).text.length?od.line<td.first+td.size-1?ce(od.line+1,0):null:new ce(od.line,od.ch+nd)}function yr(td){td.setSelection(ce(td.firstLine(),0),ce(td.lastLine()),Os)}function vr(td,od,nd){var rd={canceled:!1,from:od.from,to:od.to,text:od.text,origin:od.origin,cancel:function(){return rd.canceled=!0}};return nd&&(rd.update=function(ld,sd,ad,dd){ld&&(rd.from=ve(td,ld)),sd&&(rd.to=ve(td,sd)),ad&&(rd.text=ad),void 0!==dd&&(rd.origin=dd)}),it(td,"beforeChange",td,rd),td.cm&&it(td.cm,"beforeChange",td.cm,rd),rd.canceled?null:{from:rd.from,to:rd.to,text:rd.text,origin:rd.origin}}function br(td,od,nd){if(td.cm){if(!td.cm.curOp)return oi(td.cm,br)(td,od,nd);if(td.cm.state.suppressEdits)return}if(!((ct(td,"beforeChange")||td.cm&&ct(td.cm,"beforeChange"))&&(od=vr(td,od,!0),!od))){var rd=js&&!nd&&Ee(td,od.from,od.to);if(rd)for(var ld=rd.length-1;0<=ld;--ld)Cr(td,{from:rd[ld].from,to:rd[ld].to,text:ld?[""]:od.text,origin:od.origin});else Cr(td,od)}}function Cr(td,od){if(1!=od.text.length||""!=od.text[0]||0!=pe(od.from,od.to)){var nd=Ei(td,od);qi(td,od,nd,td.cm?td.cm.curOp.id:NaN),wr(td,od,nd,Ie(td,od));var rd=[];Wi(td,function(ld,sd){sd||-1!=O(rd,ld.history)||(Ar(ld.history,od),rd.push(ld.history)),wr(ld,od,null,Ie(ld,od))})}}function xr(td,od,nd){if(!(td.cm&&td.cm.state.suppressEdits&&!nd)){for(var rd=td.history,sd=td.sel,ad="undo"==od?rd.done:rd.undone,dd="undo"==od?rd.undone:rd.done,cd=0,ld;cd<ad.length&&(ld=ad[cd],nd?!ld.ranges||ld.equals(td.sel):!!ld.ranges);cd++);if(cd!=ad.length){for(rd.lastOrigin=rd.lastSelOrigin=null;;)if(ld=ad.pop(),ld.ranges){if(Yi(ld,dd),nd&&!ld.equals(td.sel))return void dr(td,ld,{clearRedo:!1});sd=ld}else break;var pd=[];Yi(sd,dd),dd.push({changes:pd,generation:rd.generation}),rd.generation=ld.generation||++rd.maxGeneration;for(var hd=ct(td,"beforeChange")||td.cm&&ct(td.cm,"beforeChange"),ud=function(md){var yd=ld.changes[md];if(yd.origin=od,hd&&!vr(td,yd,!1))return ad.length=0,{};pd.push(Ki(td,yd));var vd=md?Ei(td,yd):B(ad);wr(td,yd,vd,er(td,yd)),!md&&td.cm&&td.cm.scrollIntoView({from:yd.from,to:Ii(yd)});var bd=[];Wi(td,function(Cd,xd){xd||-1!=O(bd,Cd.history)||(Ar(Cd.history,yd),bd.push(Cd.history)),wr(Cd,yd,null,er(Cd,yd))})},gd=ld.changes.length-1,fd;0<=gd;--gd)if(fd=ud(gd),fd)return fd.v}}}function kr(td,od){if(0!=od&&(td.first+=od,td.sel=new wa(U(td.sel.ranges,function(ld){return new Sa(ce(ld.anchor.line+od,ld.anchor.ch),ce(ld.head.line+od,ld.head.ch))}),td.sel.primIndex),td.cm)){ri(td.cm,td.first,td.first-od,od);for(var nd=td.cm.display,rd=nd.viewFrom;rd<nd.viewTo;rd++)li(td.cm,rd,"gutter")}}function wr(td,od,nd,rd){if(td.cm&&!td.cm.curOp)return oi(td.cm,wr)(td,od,nd,rd);if(od.to.line<td.first)return void kr(td,od.text.length-1-(od.to.line-od.from.line));if(!(od.from.line>td.lastLine())){if(od.from.line<td.first){var ld=od.text.length-1-(td.first-od.from.line);kr(td,ld),od={from:ce(td.first,0),to:ce(od.to.line+ld,od.to.ch),text:[B(od.text)],origin:od.origin}}var sd=td.lastLine();od.to.line>sd&&(od={from:od.from,to:ce(sd,ee(td,sd).text.length),text:[od.text[0]],origin:od.origin}),od.removed=oe(td,od.from,od.to),nd||(nd=Ei(td,od)),td.cm?Sr(td.cm,od,rd):zi(td,od,rd),cr(td,nd,Os)}}function Sr(td,od,nd){var rd=td.doc,ld=td.display,sd=od.from,ad=od.to,dd=!1,cd=sd.line;td.options.lineWrapping||(cd=le(Ue(ee(rd,sd.line))),rd.iter(cd,ad.line+1,function(fd){if(fd==ld.maxLine)return dd=!0,!0})),-1<rd.sel.contains(od.from,od.to)&&dt(td),zi(rd,od,nd,cn(td)),td.options.lineWrapping||(rd.iter(cd,sd.line+od.text.length,function(fd){var md=Ze(fd);md>ld.maxLineLength&&(ld.maxLine=fd,ld.maxLineLength=md,ld.maxLineChanged=!0,dd=!1)}),dd&&(td.curOp.updateMaxLine=!0)),Wt(rd,sd.line),pi(td,400);var pd=od.text.length-(ad.line-sd.line)-1;od.full?ri(td):sd.line!=ad.line||1!=od.text.length||Oi(td.doc,od)?ri(td,sd.line,ad.line+1,pd):li(td,sd.line,"text");var hd=ct(td,"changes"),ud=ct(td,"change");if(ud||hd){var gd={from:sd,to:ad,text:od.text,removed:od.removed,origin:od.origin};ud&&io(td,"change",td,gd),hd&&(td.curOp.changeObjs||(td.curOp.changeObjs=[])).push(gd)}td.display.selForContextMenu=null}function Lr(td,od,nd,rd,ld){if(rd||(rd=nd),0>pe(rd,nd)){var sd;sd=[rd,nd],nd=sd[0],rd=sd[1],sd}"string"==typeof od&&(od=td.splitLines(od)),br(td,{from:nd,to:rd,text:od,origin:ld})}function Tr(td,od,nd,rd){nd<td.line?td.line+=rd:od<td.line&&(td.line=od,td.ch=0)}function Nr(td,od,nd,rd){for(var ld=0;ld<td.length;++ld){var sd=td[ld],ad=!0;if(sd.ranges){sd.copied||(sd=td[ld]=sd.deepCopy(),sd.copied=!0);for(var dd=0;dd<sd.ranges.length;dd++)Tr(sd.ranges[dd].anchor,od,nd,rd),Tr(sd.ranges[dd].head,od,nd,rd);continue}for(var cd=0,pd;cd<sd.changes.length;++cd)if(pd=sd.changes[cd],nd<pd.from.line)pd.from=ce(pd.from.line+rd,pd.from.ch),pd.to=ce(pd.to.line+rd,pd.to.ch);else if(od<=pd.to.line){ad=!1;break}ad||(td.splice(0,ld+1),ld=0)}}function Ar(td,od){var nd=od.from.line,rd=od.to.line,ld=od.text.length-(rd-nd)-1;Nr(td.done,nd,rd,ld),Nr(td.undone,nd,rd,ld)}function Dr(td,od,nd,rd){var ld=od,sd=od;return("number"==typeof od?sd=ee(td,ye(td,od)):ld=le(od),null==ld)?null:(rd(sd,ld)&&td.cm&&li(td.cm,ld,nd),sd)}function Ir(td){var od=this;this.lines=td,this.parent=null;for(var nd=0,rd=0;rd<td.length;++rd)td[rd].parent=od,nd+=td[rd].height;this.height=nd}function Hr(td){var od=this;this.children=td;for(var nd=0,rd=0,ld=0,sd;ld<td.length;++ld)sd=td[ld],nd+=sd.chunkSize(),rd+=sd.height,sd.parent=od;this.size=nd,this.height=rd,this.parent=null}function Er(td,od,nd){Ye(od)<(td.curOp&&td.curOp.scrollTop||td.doc.scrollTop)&&Pn(td,nd)}function Mr(td,od,nd,rd){var ld=new La(td,nd,rd),sd=td.cm;return sd&&ld.noHScroll&&(sd.display.alignWidgets=!0),Dr(td,od,"widget",function(ad){var dd=ad.widgets||(ad.widgets=[]);if(null==ld.insertAt?dd.push(ld):dd.splice(_Mathmin(dd.length-1,_Mathmax(0,ld.insertAt)),0,ld),ld.line=ad,sd&&!qe(td,ad)){var cd=Ye(ad)<td.scrollTop;re(ad,ad.height+Co(ld)),cd&&Pn(sd,ld.height),sd.curOp.forceUpdate=!0}return!0}),io(sd,"lineWidgetAdded",sd,ld,"number"==typeof od?od:le(od)),ld}function Pr(td,od,nd,rd,ld){if(rd&&rd.shared)return Fr(td,od,nd,rd,ld);if(td.cm&&!td.cm.curOp)return oi(td.cm,Pr)(td,od,nd,rd,ld);var sd=new Na(td,ld),ad=pe(od,nd);if(rd&&F(rd,sd,!1),0<ad||0==ad&&!1!==sd.clearWhenEmpty)return sd;if(sd.replacedWith&&(sd.collapsed=!0,sd.widgetNode=D("span",[sd.replacedWith],"CodeMirror-widget"),!rd.handleMouseEvents&&sd.widgetNode.setAttribute("cm-ignore-events","true"),rd.insertLeft&&(sd.widgetNode.insertLeft=!0)),sd.collapsed){if($e(td,od.line,od,nd,sd)||od.line!=nd.line&&$e(td,nd.line,od,nd,sd))throw new Error("Inserting collapsed marker partially overlapping an existing one");ke()}sd.addToHistory&&qi(td,{from:od,to:nd,origin:"markText"},td.sel,NaN);var dd=od.line,cd=td.cm,pd;if(td.iter(dd,nd.line+1,function(ud){cd&&sd.collapsed&&!cd.options.lineWrapping&&Ue(ud)==cd.display.maxLine&&(pd=!0),sd.collapsed&&dd!=od.line&&re(ud,0),Ne(ud,new Se(sd,dd==od.line?od.ch:null,dd==nd.line?nd.ch:null)),++dd}),sd.collapsed&&td.iter(od.line,nd.line+1,function(ud){qe(td,ud)&&re(ud,0)}),sd.clearOnEnter&&_s(sd,"beforeCursorEnter",function(){return sd.clear()}),sd.readOnly&&(xe(),(td.history.done.length||td.history.undone.length)&&td.clearHistory()),sd.collapsed&&(sd.id=++Ta,sd.atomic=!0),cd){if(pd&&(cd.curOp.updateMaxLine=!0),sd.collapsed)ri(cd,od.line,nd.line+1);else if(sd.className||sd.title||sd.startStyle||sd.endStyle||sd.css)for(var hd=od.line;hd<=nd.line;hd++)li(cd,hd,"text");sd.atomic&&hr(cd.doc),io(cd,"markerAdded",cd,sd)}return sd}function Fr(td,od,nd,rd,ld){rd=F(rd),rd.shared=!1;var sd=[Pr(td,od,nd,rd,ld)],ad=sd[0],dd=rd.widgetNode;return Wi(td,function(cd){dd&&(rd.widgetNode=dd.cloneNode(!0)),sd.push(Pr(cd,ve(cd,od),ve(cd,nd),rd,ld));for(var pd=0;pd<cd.linked.length;++pd)if(cd.linked[pd].isParent)return;ad=B(sd)}),new Aa(sd,ad)}function Rr(td){return td.findMarks(ce(td.first,0),td.clipPos(ce(td.lastLine())),function(od){return od.parent})}function Or(td,od){for(var nd=0;nd<od.length;nd++){var rd=od[nd],ld=rd.find(),sd=td.clipPos(ld.from),ad=td.clipPos(ld.to);if(pe(sd,ad)){var dd=Pr(td,sd,ad,rd.primary,rd.primary.type);rd.markers.push(dd),dd.parent=rd}}}function zr(td){for(var od=function(rd){var ld=td[rd],sd=[ld.primary.doc];Wi(ld.primary.doc,function(cd){return sd.push(cd)});for(var ad=0,dd;ad<ld.markers.length;ad++)dd=ld.markers[ad],-1==O(sd,dd.doc)&&(dd.parent=null,ld.markers.splice(ad--,1))},nd=0;nd<td.length;nd++)od(nd)}function Wr(td){var od=this;if(Ur(od),!(lt(od,td)||xo(od.display,td))){ht(td),ps&&(Ha=+new Date);var nd=hn(od,td,!0),rd=td.dataTransfer.files;if(nd&&!od.isReadOnly())if(rd&&rd.length&&window.FileReader&&window.File)for(var ld=rd.length,sd=Array(ld),ad=0,dd=function(gd,fd){if(!(od.options.allowDropFileTypes&&-1==O(od.options.allowDropFileTypes,gd.type))){var md=new FileReader;md.onload=oi(od,function(){var yd=md.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(yd)&&(yd=""),sd[fd]=yd,++ad==ld){nd=ve(od.doc,nd);var vd={from:nd,to:nd,text:od.doc.splitLines(sd.join(od.doc.lineSeparator())),origin:"paste"};br(od.doc,vd),ar(od.doc,Di(nd,Ii(vd)))}}),md.readAsText(gd)}},cd=0;cd<ld;++cd)dd(rd[cd],cd);else{if(od.state.draggingText&&-1<od.doc.sel.contains(nd))return od.state.draggingText(td),void setTimeout(function(){return od.display.input.focus()},20);try{var pd=td.dataTransfer.getData("Text");if(pd){var hd;if(od.state.draggingText&&!od.state.draggingText.copy&&(hd=od.listSelections()),cr(od.doc,Di(nd,nd)),hd)for(var ud=0;ud<hd.length;++ud)Lr(od.doc,"",hd[ud].anchor,hd[ud].head,"drag");od.replaceSelection(pd,"around","paste"),od.display.input.focus()}}catch(gd){}}}}function Br(td,od){if(ps&&(!td.state.draggingText||100>+new Date-Ha))return void ft(od);if(!(lt(td,od)||xo(td.display,od))&&(od.dataTransfer.setData("Text",td.getSelection()),od.dataTransfer.effectAllowed="copyMove",od.dataTransfer.setDragImage&&!vs)){var nd=A("img",null,null,"position: fixed; left: 0; top: 0;");nd.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",ys&&(nd.width=nd.height=1,td.display.wrapper.appendChild(nd),nd._top=nd.offsetTop),od.dataTransfer.setDragImage(nd,0,0),ys&&nd.parentNode.removeChild(nd)}}function $r(td,od){var nd=hn(td,od);if(nd){var rd=document.createDocumentFragment();yn(td,nd,rd),td.display.dragCursor||(td.display.dragCursor=A("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),td.display.lineSpace.insertBefore(td.display.dragCursor,td.display.cursorDiv)),N(td.display.dragCursor,rd)}}function Ur(td){td.display.dragCursor&&(td.display.lineSpace.removeChild(td.display.dragCursor),td.display.dragCursor=null)}function jr(td){if(document.getElementsByClassName)for(var od=document.getElementsByClassName("CodeMirror"),nd=0,rd;nd<od.length;nd++)rd=od[nd].CodeMirror,rd&&td(rd)}function Kr(){Ea||(Vr(),Ea=!0)}function Vr(){var td;_s(window,"resize",function(){null==td&&(td=setTimeout(function(){td=null,jr(Gr)},100))}),_s(window,"blur",function(){return jr(Sn)})}function Gr(td){var od=td.display;od.lastWrapHeight==od.wrapper.clientHeight&&od.lastWrapWidth==od.wrapper.clientWidth||(od.cachedCharWidth=od.cachedTextHeight=od.cachedPaddingH=null,od.scrollbarsClipped=!1,td.setSize())}function qr(td){var od=td.split(/-(?!$)/);td=od[od.length-1];for(var ad=0,nd,rd,ld,sd,dd;ad<od.length-1;ad++)if(dd=od[ad],/^(cmd|meta|m)$/i.test(dd))sd=!0;else if(/^a(lt)?$/i.test(dd))nd=!0;else if(/^(c|ctrl|control)$/i.test(dd))rd=!0;else if(/^s(hift)?$/i.test(dd))ld=!0;else throw new Error("Unrecognized modifier name: "+dd);return nd&&(td="Alt-"+td),rd&&(td="Ctrl-"+td),sd&&(td="Cmd-"+td),ld&&(td="Shift-"+td),td}function _r(td){var od={};for(var nd in td)if(td.hasOwnProperty(nd)){var rd=td[nd];if(/^(name|fallthrough|(de|at)tach)$/.test(nd))continue;if("..."==rd){delete td[nd];continue}for(var ld=U(nd.split(" "),qr),sd=0;sd<ld.length;sd++){var ad=void 0,dd=void 0;sd==ld.length-1?(dd=ld.join(" "),ad=rd):(dd=ld.slice(0,sd+1).join(" "),ad="...");var cd=od[dd];if(!cd)od[dd]=ad;else if(cd!=ad)throw new Error("Inconsistent bindings for "+dd)}delete td[nd]}for(var pd in od)td[pd]=od[pd];return td}function Xr(td,od,nd,rd){od=Jr(od);var ld=od.call?od.call(td,rd):od[td];if(!1===ld)return"nothing";if("..."===ld)return"multi";if(null!=ld&&nd(ld))return"handled";if(od.fallthrough){if("[object Array]"!=Object.prototype.toString.call(od.fallthrough))return Xr(td,od.fallthrough,nd,rd);for(var sd=0,ad;sd<od.fallthrough.length;sd++)if(ad=Xr(td,od.fallthrough[sd],nd,rd),ad)return ad}}function Yr(td){var od="string"==typeof td?td:Ma[td.keyCode];return"Ctrl"==od||"Alt"==od||"Shift"==od||"Mod"==od}function Zr(td,od,nd){var rd=td;return od.altKey&&"Alt"!=rd&&(td="Alt-"+td),(Ds?od.metaKey:od.ctrlKey)&&"Ctrl"!=rd&&(td="Ctrl-"+td),(Ds?od.ctrlKey:od.metaKey)&&"Cmd"!=rd&&(td="Cmd-"+td),!nd&&od.shiftKey&&"Shift"!=rd&&(td="Shift-"+td),td}function Qr(td,od){if(ys&&34==td.keyCode&&td.char)return!1;var nd=Ma[td.keyCode];return null==nd||td.altGraphKey?!1:Zr(nd,td,od)}function Jr(td){return"string"==typeof td?Oa[td]:td}function tl(td,od){for(var nd=td.doc.sel.ranges,rd=[],ld=0,sd;ld<nd.length;ld++){for(sd=od(nd[ld]);rd.length&&0>=pe(sd.from,B(rd).to);){var ad=rd.pop();if(0>pe(ad.from,sd.from)){sd.from=ad.from;break}}rd.push(sd)}ti(td,function(){for(var dd=rd.length-1;0<=dd;dd--)Lr(td.doc,"",rd[dd].from,rd[dd].to,"+delete");Fn(td)})}function ol(td,od,nd){var rd=Z(td.text,od+nd,nd);return 0>rd||rd>td.text.length?null:rd}function il(td,od,nd){var rd=ol(td,od.ch,nd);return null==rd?null:new ce(od.line,rd,0>nd?"after":"before")}function rl(td,od,nd,rd,ld){if(td){var sd=tt(nd,od.doc.direction);if(sd){var ad=0>ld?B(sd):sd[0],dd=0>ld==(1==ad.level),cd=dd?"after":"before",pd;if(0<ad.level||"rtl"==od.doc.direction){var hd=Mo(od,nd);pd=0>ld?nd.text.length-1:0;var ud=Po(od,hd,pd).top;pd=Q(function(gd){return Po(od,hd,gd).top==ud},0>ld==(1==ad.level)?ad.from:ad.to-1,pd),"before"==cd&&(pd=ol(nd,pd,1))}else pd=0>ld?ad.to:ad.from;return new ce(rd,pd,cd)}}return new ce(rd,0>ld?nd.text.length:0,0>ld?"before":"after")}function ll(td,od,nd,rd){var ld=tt(od,td.doc.direction);if(!ld)return il(od,nd,rd);nd.ch>=od.text.length?(nd.ch=od.text.length,nd.sticky="before"):0>=nd.ch&&(nd.ch=0,nd.sticky="after");var sd=et(ld,nd.ch,nd.sticky),ad=ld[sd];if("ltr"==td.doc.direction&&0==ad.level%2&&(0<rd?ad.to>nd.ch:ad.from<nd.ch))return il(od,nd,rd);var dd=function(bd,Cd){return ol(od,bd instanceof ce?bd.ch:bd,Cd)},pd=function(bd){return td.options.lineWrapping?(cd=cd||Mo(td,od),Jo(td,od,cd,bd)):{begin:0,end:od.text.length}},hd=pd("before"==nd.sticky?dd(nd,-1):nd.ch),cd;if("rtl"==td.doc.direction||1==ad.level){var ud=1==ad.level==0>rd,gd=dd(nd,ud?1:-1);if(null!=gd&&(ud?gd<=ad.to&&gd<=hd.end:gd>=ad.from&&gd>=hd.begin)){var fd=ud?"before":"after";return new ce(nd.line,gd,fd)}}var md=function(bd,Cd,xd){for(var kd=function(Td,Nd){return Nd?new ce(nd.line,dd(Td,1),"before"):new ce(nd.line,Td,"after")};0<=bd&&bd<ld.length;bd+=Cd){var wd=ld[bd],Sd=0<Cd==(1!=wd.level),Ld=Sd?xd.begin:dd(xd.end,-1);if(wd.from<=Ld&&Ld<wd.to)return kd(Ld,Sd);if(Ld=Sd?wd.from:dd(wd.to,-1),xd.begin<=Ld&&Ld<xd.end)return kd(Ld,Sd)}},yd=md(sd+rd,rd,hd);if(yd)return yd;var vd=0<rd?hd.end:dd(hd.begin,-1);return null!=vd&&!(0<rd&&vd==od.text.length)&&(yd=md(0<rd?0:ld.length-1,rd,pd(vd)),yd)?yd:null}function sl(td,od){var nd=ee(td.doc,od),rd=Ue(nd);return rd!=nd&&(od=le(rd)),rl(!0,td,rd,od,1)}function al(td,od){var nd=ee(td.doc,od),rd=je(nd);return rd!=nd&&(od=le(rd)),rl(!0,td,nd,od,-1)}function dl(td,od){var nd=sl(td,od.line),rd=ee(td.doc,nd.line),ld=tt(rd,td.doc.direction);if(!ld||0==ld[0].level){var sd=_Mathmax(0,rd.text.search(/\S/)),ad=od.line==nd.line&&od.ch<=sd&&od.ch;return ce(nd.line,ad?0:sd,nd.sticky)}return nd}function cl(td,od,nd){if("string"==typeof od&&(od=za[od],!od))return!1;td.display.input.ensurePolled();var rd=td.display.shift,ld=!1;try{td.isReadOnly()&&(td.state.suppressEdits=!0),nd&&(td.display.shift=!1),ld=od(td)!=Rs}finally{td.display.shift=rd,td.state.suppressEdits=!1}return ld}function pl(td,od,nd){for(var rd=0,ld;rd<td.state.keyMaps.length;rd++)if(ld=Xr(od,td.state.keyMaps[rd],nd,td),ld)return ld;return td.options.extraKeys&&Xr(od,td.options.extraKeys,nd,td)||Xr(od,td.options.keyMap,nd,td)}function hl(td,od,nd,rd){var ld=td.state.keySeq;if(ld){if(Yr(od))return"handled";if(/\'$/.test(od)?td.state.keySeq=null:Wa.set(50,function(){td.state.keySeq==ld&&(td.state.keySeq=null,td.display.input.reset())}),ul(td,ld+" "+od,nd,rd))return!0}return ul(td,od,nd,rd)}function ul(td,od,nd,rd){var ld=pl(td,od,rd);return"multi"==ld&&(td.state.keySeq=od),"handled"==ld&&io(td,"keyHandled",td,od,nd),("handled"==ld||"multi"==ld)&&(ht(nd),Cn(td)),!!ld}function gl(td,od){var nd=Qr(od,!0);return!!nd&&(od.shiftKey&&!td.state.keySeq?hl(td,"Shift-"+nd,od,function(rd){return cl(td,rd,!0)})||hl(td,nd,od,function(rd){if("string"==typeof rd?/^go[A-Z]/.test(rd):rd.motion)return cl(td,rd)}):hl(td,nd,od,function(rd){return cl(td,rd)}))}function fl(td,od,nd){return hl(td,"'"+nd+"'",od,function(rd){return cl(td,rd,!0)})}function ml(td){var od=this;if(od.curOp.focus=H(),!lt(od,td)){ps&&11>hs&&27==td.keyCode&&(td.returnValue=!1);var nd=td.keyCode;od.display.shift=16==nd||td.shiftKey;var rd=gl(od,td);ys&&(Ba=rd?nd:null,!rd&&88==nd&&!ea&&(Ls?td.metaKey:td.ctrlKey)&&od.replaceSelection("",null,"cut")),18!=nd||/\bCodeMirror-crosshair\b/.test(od.display.lineDiv.className)||yl(od)}}function yl(td){function od(rd){18!=rd.keyCode&&rd.altKey||(Hs(nd,"CodeMirror-crosshair"),nt(document,"keyup",od),nt(document,"mouseover",od))}var nd=td.display.lineDiv;E(nd,"CodeMirror-crosshair"),_s(document,"keyup",od),_s(document,"mouseover",od)}function vl(td){16==td.keyCode&&(this.doc.sel.shift=!1),lt(this,td)}function bl(td){var od=this;if(!(xo(od.display,td)||lt(od,td)||td.ctrlKey&&!td.altKey||Ls&&td.metaKey)){var nd=td.keyCode,rd=td.charCode;if(ys&&nd==Ba)return Ba=null,void ht(td);if(!(ys&&(!td.which||10>td.which)&&gl(od,td))){var ld=_StringfromCharCode(null==rd?nd:rd);"\b"==ld||fl(od,td,ld)||od.display.input.onKeyPress(td)}}}function Cl(td,od){var nd=+new Date;return Ka&&Ka.compare(nd,td,od)?(ja=Ka=null,"triple"):ja&&ja.compare(nd,td,od)?(Ka=new Ua(nd,td,od),ja=null,"double"):(ja=new Ua(nd,td,od),Ka=null,"single")}function xl(td){var od=this,nd=od.display;if(!(lt(od,td)||nd.activeTouch&&nd.input.supportsTouch())){if(nd.input.ensurePolled(),nd.shift=td.shiftKey,xo(nd,td))return void(us||(nd.scroller.draggable=!1,setTimeout(function(){return nd.scroller.draggable=!0},100)));if(!Il(od,td)){var rd=hn(od,td),ld=yt(td),sd=rd?Cl(rd,ld):"single";window.focus(),1==ld&&od.state.selectingText&&od.state.selectingText(td),rd&&kl(od,ld,rd,sd,td)||(1==ld?rd?Sl(od,rd,sd,td):mt(td)==nd.scroller&&ht(td):2==ld?(rd&&nr(od.doc,rd),setTimeout(function(){return nd.input.focus()},20)):3==ld&&(Is?Hl(od,td):kn(od)))}}}function kl(td,od,nd,rd,ld){var sd="Click";return"double"==rd?sd="Double"+sd:"triple"==rd&&(sd="Triple"+sd),sd=(1==od?"Left":2==od?"Middle":"Right")+sd,hl(td,Zr(sd,ld),ld,function(ad){if("string"==typeof ad&&(ad=za[ad]),!ad)return!1;var dd=!1;try{td.isReadOnly()&&(td.state.suppressEdits=!0),dd=ad(td,nd)!=Rs}finally{td.state.suppressEdits=!1}return dd})}function wl(td,od,nd){var rd=td.getOption("configureMouse"),ld=rd?rd(td,od,nd):{};if(null==ld.unit){var sd=Ts?nd.shiftKey&&nd.metaKey:nd.altKey;ld.unit=sd?"rectangle":"single"==od?"char":"double"==od?"word":"line"}return(null==ld.extend||td.doc.extend)&&(ld.extend=td.doc.extend||nd.shiftKey),null==ld.addNew&&(ld.addNew=Ls?nd.metaKey:nd.ctrlKey),null==ld.moveOnDrag&&(ld.moveOnDrag=Ls?!nd.altKey:!nd.ctrlKey),ld}function Sl(td,od,nd,rd){ps?setTimeout(P(xn,td),0):td.curOp.focus=H();var ld=wl(td,nd,rd),sd=td.doc.sel,ad;td.options.dragDrop&&Xs&&!td.isReadOnly()&&"single"==nd&&-1<(ad=sd.contains(od))&&(0>pe((ad=sd.ranges[ad]).from(),od)||0<od.xRel)&&(0<pe(ad.to(),od)||0>od.xRel)?Ll(td,rd,od,ld):Nl(td,rd,od,ld)}function Ll(td,od,nd,rd){var ld=td.display,sd=!1,ad=oi(td,function(pd){us&&(ld.scroller.draggable=!1),td.state.draggingText=!1,nt(document,"mouseup",ad),nt(document,"mousemove",dd),nt(ld.scroller,"dragstart",cd),nt(ld.scroller,"drop",ad),sd||(ht(pd),!rd.addNew&&nr(td.doc,nd,null,null,rd.extend),us||ps&&9==hs?setTimeout(function(){document.body.focus(),ld.input.focus()},20):ld.input.focus())}),dd=function(pd){sd=sd||10<=_Mathabs(od.clientX-pd.clientX)+_Mathabs(od.clientY-pd.clientY)},cd=function(){return sd=!0};us&&(ld.scroller.draggable=!0),td.state.draggingText=ad,ad.copy=!rd.moveOnDrag,ld.scroller.dragDrop&&ld.scroller.dragDrop(),_s(document,"mouseup",ad),_s(document,"mousemove",dd),_s(ld.scroller,"dragstart",cd),_s(ld.scroller,"drop",ad),kn(td),setTimeout(function(){return ld.input.focus()},20)}function Tl(td,od,nd){if("char"==nd)return new Sa(od,od);if("word"==nd)return td.findWordAt(od);if("line"==nd)return new Sa(ce(od.line,0),ve(td.doc,ce(od.line+1,0)));var rd=nd(td,od);return new Sa(rd.from,rd.to)}function Nl(td,od,nd,rd){function ld(xd){if(0!=pe(md,xd))if(md=xd,"rectangle"==rd.unit){for(var kd=[],wd=td.options.tabSize,Sd=R(ee(cd,nd.line).text,nd.ch,wd),Ld=R(ee(cd,xd.line).text,xd.ch,wd),Td=_Mathmin(Sd,Ld),Nd=_Mathmax(Sd,Ld),Ad=_Mathmin(nd.line,xd.line),Dd=_Mathmin(td.lastLine(),_Mathmax(nd.line,xd.line));Ad<=Dd;Ad++){var Id=ee(cd,Ad).text,Hd=z(Id,Td,wd);Td==Nd?kd.push(new Sa(ce(Ad,Hd),ce(Ad,Hd))):Id.length>Hd&&kd.push(new Sa(ce(Ad,Hd),ce(Ad,z(Id,Nd,wd))))}kd.length||kd.push(new Sa(nd,nd)),dr(cd,Ai(ud.ranges.slice(0,hd).concat(kd),hd),{origin:"*mouse",scroll:!1}),td.scrollIntoView(xd)}else{var Ed=pd,Md=Tl(td,xd,rd.unit),Pd=Ed.anchor,Fd;0<pe(Md.anchor,Pd)?(Fd=Md.head,Pd=fe(Ed.from(),Md.anchor)):(Fd=Md.anchor,Pd=ge(Ed.to(),Md.head));var Rd=ud.ranges.slice(0);Rd[hd]=Al(td,new Sa(ve(cd,Pd),Fd)),dr(cd,Ai(Rd,hd),zs)}}function sd(xd){var kd=++vd,wd=hn(td,xd,!0,"rectangle"==rd.unit);if(wd)if(0!=pe(wd,md)){td.curOp.focus=H(),ld(wd);var Sd=Nn(dd,cd);(wd.line>=Sd.to||wd.line<Sd.from)&&setTimeout(oi(td,function(){vd==kd&&sd(xd)}),150)}else{var Ld=xd.clientY<yd.top?-20:xd.clientY>yd.bottom?20:0;Ld&&setTimeout(oi(td,function(){vd!=kd||(dd.scroller.scrollTop+=Ld,sd(xd))}),50)}}function ad(xd){td.state.selectingText=!1,vd=Infinity,ht(xd),dd.input.focus(),nt(document,"mousemove",bd),nt(document,"mouseup",Cd),cd.history.lastSelOrigin=null}var dd=td.display,cd=td.doc;ht(od);var ud=cd.sel,gd=ud.ranges,pd,hd;if(rd.addNew&&!rd.extend?(hd=cd.sel.contains(nd),pd=-1<hd?gd[hd]:new Sa(nd,nd)):(pd=cd.sel.primary(),hd=cd.sel.primIndex),"rectangle"==rd.unit)rd.addNew||(pd=new Sa(nd,nd)),nd=hn(td,od,!0,!0),hd=-1;else{var fd=Tl(td,nd,rd.unit);pd=rd.extend?or(pd,fd.anchor,fd.head,rd.extend):fd}rd.addNew?-1==hd?(hd=gd.length,dr(cd,Ai(gd.concat([pd]),hd),{scroll:!1,origin:"*mouse"})):1<gd.length&&gd[hd].empty()&&"char"==rd.unit&&!rd.extend?(dr(cd,Ai(gd.slice(0,hd).concat(gd.slice(hd+1)),0),{scroll:!1,origin:"*mouse"}),ud=cd.sel):rr(cd,hd,pd,zs):(hd=0,dr(cd,new wa([pd],0),zs),ud=cd.sel);var md=nd,yd=dd.wrapper.getBoundingClientRect(),vd=0,bd=oi(td,function(xd){yt(xd)?sd(xd):ad(xd)}),Cd=oi(td,ad);td.state.selectingText=Cd,_s(document,"mousemove",bd),_s(document,"mouseup",Cd)}function Al(td,od){var nd=od.anchor,rd=od.head,ld=ee(td.doc,nd.line);if(0==pe(nd,rd)&&nd.sticky==rd.sticky)return od;var sd=tt(ld);if(!sd)return od;var ad=et(sd,nd.ch,nd.sticky),dd=sd[ad];if(dd.from!=nd.ch&&dd.to!=nd.ch)return od;var cd=ad+(dd.from==nd.ch==(1!=dd.level)?0:1);if(0==cd||cd==sd.length)return od;var pd;if(rd.line!=nd.line)pd=0<(rd.line-nd.line)*("ltr"==td.doc.direction?1:-1);else{var hd=et(sd,rd.ch,rd.sticky),ud=hd-ad||(rd.ch-nd.ch)*(1==dd.level?-1:1);pd=hd==cd-1||hd==cd?0>ud:0<ud}var gd=sd[cd+(pd?-1:0)],fd=pd==(1==gd.level),md=fd?gd.from:gd.to,yd=fd?"after":"before";return nd.ch==md&&nd.sticky==yd?od:new Sa(new ce(nd.line,md,yd),rd)}function Dl(td,od,nd,rd){var ld,sd;if(od.touches)ld=od.touches[0].clientX,sd=od.touches[0].clientY;else try{ld=od.clientX,sd=od.clientY}catch(gd){return!1}if(ld>=_Mathfloor(td.display.gutters.getBoundingClientRect().right))return!1;rd&&ht(od);var ad=td.display,dd=ad.lineDiv.getBoundingClientRect();if(sd>dd.bottom||!ct(td,nd))return gt(od);sd-=dd.top-ad.viewOffset;for(var cd=0,pd;cd<td.options.gutters.length;++cd)if(pd=ad.gutters.childNodes[cd],pd&&pd.getBoundingClientRect().right>=ld){var hd=se(td.doc,sd),ud=td.options.gutters[cd];return it(td,nd,td,hd,ud,od),gt(od)}}function Il(td,od){return Dl(td,od,"gutterClick",!0)}function Hl(td,od){xo(td.display,od)||El(td,od)||lt(td,od,"contextmenu")||td.display.input.onContextMenu(od)}function El(td,od){return!!ct(td,"gutterContextMenu")&&Dl(td,od,"gutterContextMenu",!1)}function Ml(td){td.display.wrapper.className=td.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+td.options.theme.replace(/(^|\s)\s*/g," cm-s-"),$o(td)}function Fl(td){wi(td),ri(td),An(td)}function Rl(td,od,nd){if(!od!=!(nd&&nd!=Va)){var ld=td.display.dragFunctions,sd=od?_s:nt;sd(td.display.scroller,"dragstart",ld.start),sd(td.display.scroller,"dragenter",ld.enter),sd(td.display.scroller,"dragover",ld.over),sd(td.display.scroller,"dragleave",ld.leave),sd(td.display.scroller,"drop",ld.drop)}}function Ol(td){td.options.lineWrapping?(E(td.display.wrapper,"CodeMirror-wrap"),td.display.sizer.style.minWidth="",td.display.sizerWidth=null):(Hs(td.display.wrapper,"CodeMirror-wrap"),Qe(td)),pn(td),ri(td),$o(td),setTimeout(function(){return Kn(td)},100)}function zl(td,od){var nd=this;if(!(this instanceof zl))return new zl(td,od);this.options=od=od?F(od):{},F(Ga,od,!1),Si(od);var rd=od.value;"string"==typeof rd&&(rd=new Ia(rd,od.mode,null,od.lineSeparator,od.direction)),this.doc=rd;var ld=new zl.inputStyles[od.inputStyle](this),sd=this.display=new J(td,rd,ld);for(var ad in sd.wrapper.CodeMirror=this,wi(this),Ml(this),od.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Gn(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new Ps,keySeq:null,specialChars:null},od.autofocus&&!Ss&&sd.input.focus(),ps&&11>hs&&setTimeout(function(){return nd.display.input.reset(!0)},20),Wl(this),Kr(),qn(this),this.curOp.forceUpdate=!0,Bi(this,rd),od.autofocus&&!Ss||this.hasFocus()?setTimeout(P(wn,this),20):Sn(this),qa)qa.hasOwnProperty(ad)&&qa[ad](nd,od[ad],Va);Dn(this),od.finishInit&&od.finishInit(this);for(var dd=0;dd<_a.length;++dd)_a[dd](nd);_n(this),us&&od.lineWrapping&&"optimizelegibility"==getComputedStyle(sd.lineDiv).textRendering&&(sd.lineDiv.style.textRendering="auto")}function Wl(td){function od(){ld.activeTouch&&(sd=setTimeout(function(){return ld.activeTouch=null},1e3),ad=ld.activeTouch,ad.end=+new Date)}function nd(cd){if(1!=cd.touches.length)return!1;var pd=cd.touches[0];return 1>=pd.radiusX&&1>=pd.radiusY}function rd(cd,pd){if(null==pd.left)return!0;var hd=pd.left-cd.left,ud=pd.top-cd.top;return 400<hd*hd+ud*ud}var ld=td.display;_s(ld.scroller,"mousedown",oi(td,xl)),ps&&11>hs?_s(ld.scroller,"dblclick",oi(td,function(cd){if(!lt(td,cd)){var pd=hn(td,cd);if(!(!pd||Il(td,cd)||xo(td.display,cd))){ht(cd);var hd=td.findWordAt(pd);nr(td.doc,hd.anchor,hd.head)}}})):_s(ld.scroller,"dblclick",function(cd){return lt(td,cd)||ht(cd)}),Is||_s(ld.scroller,"contextmenu",function(cd){return Hl(td,cd)});var ad={end:0},sd;_s(ld.scroller,"touchstart",function(cd){if(!lt(td,cd)&&!nd(cd)&&!Il(td,cd)){ld.input.ensurePolled(),clearTimeout(sd);var pd=+new Date;ld.activeTouch={start:pd,moved:!1,prev:300>=pd-ad.end?ad:null},1==cd.touches.length&&(ld.activeTouch.left=cd.touches[0].pageX,ld.activeTouch.top=cd.touches[0].pageY)}}),_s(ld.scroller,"touchmove",function(){ld.activeTouch&&(ld.activeTouch.moved=!0)}),_s(ld.scroller,"touchend",function(cd){var pd=ld.activeTouch;if(pd&&!xo(ld,cd)&&null!=pd.left&&!pd.moved&&300>new Date-pd.start){var hd=td.coordsChar(ld.activeTouch,"page"),ud;ud=!pd.prev||rd(pd,pd.prev)?new Sa(hd,hd):!pd.prev.prev||rd(pd,pd.prev.prev)?td.findWordAt(hd):new Sa(ce(hd.line,0),ve(td.doc,ce(hd.line+1,0))),td.setSelection(ud.anchor,ud.head),td.focus(),ht(cd)}od()}),_s(ld.scroller,"touchcancel",od),_s(ld.scroller,"scroll",function(){ld.scroller.clientHeight&&(Bn(td,ld.scroller.scrollTop),Un(td,ld.scroller.scrollLeft,!0),it(td,"scroll",td))}),_s(ld.scroller,"mousewheel",function(cd){return Ni(td,cd)}),_s(ld.scroller,"DOMMouseScroll",function(cd){return Ni(td,cd)}),_s(ld.wrapper,"scroll",function(){return ld.wrapper.scrollTop=ld.wrapper.scrollLeft=0}),ld.dragFunctions={enter:function(cd){lt(td,cd)||ft(cd)},over:function(cd){lt(td,cd)||($r(td,cd),ft(cd))},start:function(cd){return Br(td,cd)},drop:oi(td,Wr),leave:function(cd){lt(td,cd)||Ur(td)}};var dd=ld.input.getField();_s(dd,"keyup",function(cd){return vl.call(td,cd)}),_s(dd,"keydown",oi(td,ml)),_s(dd,"keypress",oi(td,bl)),_s(dd,"focus",function(cd){return wn(td,cd)}),_s(dd,"blur",function(cd){return Sn(td,cd)})}function Bl(td,od,nd,rd){var ld=td.doc,sd;null==nd&&(nd="add"),"smart"==nd&&(ld.mode.indent?sd=Ht(td,od).state:nd="prev");var ad=td.options.tabSize,dd=ee(ld,od),cd=R(dd.text,null,ad);dd.stateAfter&&(dd.stateAfter=null);var pd=dd.text.match(/^\s*/)[0],hd;if(!rd&&!/\S/.test(dd.text))hd=0,nd="not";else if("smart"==nd&&(hd=ld.mode.indent(sd,dd.text.slice(pd.length),dd.text),hd==Rs||150<hd)){if(!rd)return;nd="prev"}"prev"==nd?od>ld.first?hd=R(ee(ld,od-1).text,null,ad):hd=0:"add"==nd?hd=cd+td.options.indentUnit:"subtract"==nd?hd=cd-td.options.indentUnit:"number"==typeof nd&&(hd=cd+nd),hd=_Mathmax(0,hd);var ud="",gd=0;if(td.options.indentWithTabs)for(var fd=_Mathfloor(hd/ad);fd;--fd)gd+=ad,ud+="\t";if(gd<hd&&(ud+=W(hd-gd)),ud!=pd)return Lr(ld,ud,ce(od,0),ce(od,pd.length),"+input"),dd.stateAfter=null,!0;for(var md=0,yd;md<ld.sel.ranges.length;md++)if(yd=ld.sel.ranges[md],yd.head.line==od&&yd.head.ch<pd.length){var vd=ce(od,pd.length);rr(ld,md,new Sa(vd,vd));break}}function $l(td){Xa=td}function Ul(td,od,nd,rd,ld){var sd=td.doc;td.display.shift=!1,rd||(rd=sd.sel);var ad=td.state.pasteIncoming||"paste"==ld,dd=Qs(od),cd=null;if(ad&&1<rd.ranges.length)if(!(Xa&&Xa.text.join("\n")==od))dd.length==rd.ranges.length&&td.options.pasteLinesPerSelection&&(cd=U(dd,function(vd){return[vd]}));else if(0==rd.ranges.length%Xa.text.length){cd=[];for(var pd=0;pd<Xa.text.length;pd++)cd.push(sd.splitLines(Xa.text[pd]))}for(var ud=rd.ranges.length-1,hd;0<=ud;ud--){var gd=rd.ranges[ud],fd=gd.from(),md=gd.to();gd.empty()&&(nd&&0<nd?fd=ce(fd.line,fd.ch-nd):td.state.overwrite&&!ad?md=ce(md.line,_Mathmin(ee(sd,md.line).text.length,md.ch+B(dd).length)):Xa&&Xa.lineWise&&Xa.text.join("\n")==od&&(fd=md=ce(fd.line,0))),hd=td.curOp.updateInput;var yd={from:fd,to:md,text:cd?cd[ud%cd.length]:dd,origin:ld||(ad?"paste":td.state.cutIncoming?"cut":"+input")};br(td.doc,yd),io(td,"inputRead",td,yd)}od&&!ad&&Kl(td,od),Fn(td),td.curOp.updateInput=hd,td.curOp.typing=!0,td.state.pasteIncoming=td.state.cutIncoming=!1}function jl(td,od){var nd=td.clipboardData&&td.clipboardData.getData("Text");if(nd)return td.preventDefault(),od.isReadOnly()||od.options.disableInput||ti(od,function(){return Ul(od,nd,0,null,"paste")}),!0}function Kl(td,od){if(td.options.electricChars&&td.options.smartIndent)for(var nd=td.doc.sel,rd=nd.ranges.length-1,ld;0<=rd;rd--)if(ld=nd.ranges[rd],!(100<ld.head.ch||rd&&nd.ranges[rd-1].head.line==ld.head.line)){var sd=td.getModeAt(ld.head),ad=!1;if(sd.electricChars){for(var dd=0;dd<sd.electricChars.length;dd++)if(-1<od.indexOf(sd.electricChars.charAt(dd))){ad=Bl(td,ld.head.line,"smart");break}}else sd.electricInput&&sd.electricInput.test(ee(td.doc,ld.head.line).text.slice(0,ld.head.ch))&&(ad=Bl(td,ld.head.line,"smart"));ad&&io(td,"electricInput",td,ld.head.line)}}function Vl(td){for(var od=[],nd=[],rd=0;rd<td.doc.sel.ranges.length;rd++){var ld=td.doc.sel.ranges[rd].head.line,sd={anchor:ce(ld,0),head:ce(ld+1,0)};nd.push(sd),od.push(td.getRange(sd.anchor,sd.head))}return{text:od,ranges:nd}}function Gl(td,od){td.setAttribute("autocorrect","off"),td.setAttribute("autocapitalize","off"),td.setAttribute("spellcheck",!!od)}function ql(){var td=A("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),od=A("div",[td],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return us?td.style.width="1000px":td.setAttribute("wrap","off"),xs&&(td.style.border="1px solid black"),Gl(td),od}function _l(td,od,nd,rd,ld){function sd(){var bd=od.line+nd;return bd<td.first||bd>=td.first+td.size?!1:(od=new ce(bd,od.ch,od.sticky),pd=ee(td,bd))}function ad(bd){var Cd;if(Cd=ld?ll(td.cm,pd,od,nd):il(pd,od,nd),null!=Cd)od=Cd;else if(!bd&&sd())od=rl(ld,td.cm,pd,od.line,nd);else return!1;return!0}var dd=od,cd=nd,pd=ee(td,od.line);if("char"==rd)ad();else if("column"==rd)ad(!0);else if("word"==rd||"group"==rd)for(var hd=null,ud="group"==rd,gd=td.cm&&td.cm.getHelper(od,"wordChars"),fd=!0;;fd=!1){if(0>nd&&!ad(!fd))break;var md=pd.text.charAt(od.ch)||"\n",yd=_(md,gd)?"w":ud&&"\n"==md?"n":!ud||/\s/.test(md)?null:"p";if(!ud||fd||yd||(yd="s"),hd&&hd!=yd){0>nd&&(nd=1,ad(),od.sticky="after");break}if(yd&&(hd=yd),0<nd&&!ad(!fd))break}var vd=fr(td,od,dd,cd,!0);return he(dd,vd)&&(vd.hitSide=!0),vd}function Xl(td,od,nd,rd){var ld=td.doc,sd=od.left,ad;if("page"==rd){var dd=_Mathmin(td.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),cd=_Mathmax(dd-.5*ln(td.display),3);ad=(0<nd?od.bottom:od.top)+nd*cd}else"line"==rd&&(ad=0<nd?od.bottom+3:od.top-3);for(var pd;;){if(pd=Zo(td,sd,ad),!pd.outside)break;if(0>nd?0>=ad:ad>=ld.height){pd.hitSide=!0;break}ad+=5*nd}return pd}function Yl(td,od){var nd=Eo(td,od.line);if(!nd||nd.hidden)return null;var rd=ee(td.doc,od.line),ld=Do(nd,rd,od.line),sd=tt(rd,td.doc.direction),ad="left";if(sd){var dd=et(sd,od.ch);ad=dd%2?"right":"left"}var cd=Fo(ld.map,od.ch,ad);return cd.offset="right"==cd.collapse?cd.end:cd.start,cd}function Zl(td){for(var od=td;od;od=od.parentNode)if(/CodeMirror-gutter-wrapper/.test(od.className))return!0;return!1}function Ql(td,od){return od&&(td.bad=!0),td}function Jl(td,od,nd,rd,ld){function sd(gd){return function(fd){return fd.id==gd}}function ad(){hd&&(pd+=ud,hd=!1)}function dd(gd){gd&&(ad(),pd+=gd)}function cd(gd){if(1==gd.nodeType){var fd=gd.getAttribute("cm-text");if(null!=fd)return void dd(fd||gd.textContent.replace(/\u200b/g,""));var md=gd.getAttribute("cm-marker"),yd;if(md){var vd=td.findMarks(ce(rd,0),ce(ld+1,0),sd(+md));return void(vd.length&&(yd=vd[0].find(0))&&dd(oe(td.doc,yd.from,yd.to).join(ud)))}if("false"==gd.getAttribute("contenteditable"))return;var bd=/^(pre|div|p)$/i.test(gd.nodeName);bd&&ad();for(var Cd=0;Cd<gd.childNodes.length;Cd++)cd(gd.childNodes[Cd]);bd&&(hd=!0)}else 3==gd.nodeType&&dd(gd.nodeValue)}for(var pd="",hd=!1,ud=td.doc.lineSeparator();;){if(cd(od),od==nd)break;od=od.nextSibling}return pd}function es(td,od,nd){var rd;if(od==td.display.lineDiv){if(rd=td.display.lineDiv.childNodes[nd],!rd)return Ql(td.clipPos(ce(td.display.viewTo-1)),!0);od=null,nd=0}else for(rd=od;;rd=rd.parentNode){if(!rd||rd==td.display.lineDiv)return null;if(rd.parentNode&&rd.parentNode==td.display.lineDiv)break}for(var ld=0,sd;ld<td.display.view.length;ld++)if(sd=td.display.view[ld],sd.node==rd)return ts(sd,od,nd)}function ts(td,od,nd){function rd(vd,bd,Cd){for(var xd=-1,kd;xd<(hd?hd.length:0);xd++){kd=0>xd?pd.map:hd[xd];for(var wd=0,Sd;wd<kd.length;wd+=3)if(Sd=kd[wd+2],Sd==vd||Sd==bd){var Ld=le(0>xd?td.line:td.rest[xd]),Td=kd[wd]+Cd;return(0>Cd||Sd!=vd)&&(Td=kd[wd+(Cd?1:0)]),ce(Ld,Td)}}}var ld=td.text.firstChild,sd=!1;if(!od||!I(ld,od))return Ql(ce(le(td.line),0),!0);if(od==ld&&(sd=!0,od=ld.childNodes[nd],nd=0,!od)){var ad=td.rest?B(td.rest):td.line;return Ql(ce(le(ad),ad.text.length),sd)}var dd=3==od.nodeType?od:null,cd=od;for(dd||1!=od.childNodes.length||3!=od.firstChild.nodeType||(dd=od.firstChild,nd&&(nd=dd.nodeValue.length));cd.parentNode!=ld;)cd=cd.parentNode;var pd=td.measure,hd=pd.maps,ud=rd(dd,cd,nd);if(ud)return Ql(ud,sd);for(var gd=cd.nextSibling,fd=dd?dd.nodeValue.length-nd:0;gd;gd=gd.nextSibling){if(ud=rd(gd,gd.firstChild,0),ud)return Ql(ce(ud.line,ud.ch-fd),sd);fd+=gd.textContent.length}for(var md=cd.previousSibling,yd=nd;md;md=md.previousSibling){if(ud=rd(md,md.firstChild,-1),ud)return Ql(ce(ud.line,ud.ch+yd),sd);yd+=md.textContent.length}}var is=navigator.userAgent,rs=navigator.platform,ls=/gecko\/\d/i.test(is),ss=/MSIE \d/.test(is),ds=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(is),cs=/Edge\/(\d+)/.exec(is),ps=ss||ds||cs,hs=ps&&(ss?document.documentMode||6:+(cs||ds)[1]),us=!cs&&/WebKit\//.test(is),gs=us&&/Qt\/\d+\.\d+/.test(is),fs=!cs&&/Chrome\//.test(is),ys=/Opera\//.test(is),vs=/Apple Computer/.test(navigator.vendor),bs=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(is),Cs=/PhantomJS/.test(is),xs=!cs&&/AppleWebKit/.test(is)&&/Mobile\/\w+/.test(is),ks=/Android/.test(is),Ss=xs||ks||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(is),Ls=xs||/Mac/.test(rs),Ts=/\bCrOS\b/.test(is),Ns=/win/i.test(rs),As=ys&&is.match(/Version\/(\d*\.\d*)/);As&&(As=+As[1]),As&&15<=As&&(ys=!1,us=!0);var Ds=Ls&&(gs||ys&&(null==As||12.11>As)),Is=ls||ps&&9<=hs,Hs=function(td,od){var nd=td.className,rd=L(od).exec(nd);if(rd){var ld=nd.slice(rd.index+rd[0].length);td.className=nd.slice(0,rd.index)+(ld?rd[1]+ld:"")}},Es;Es=document.createRange?function(td,od,nd,rd){var ld=document.createRange();return ld.setEnd(rd||td,nd),ld.setStart(td,od),ld}:function(td,od,nd){var rd=document.body.createTextRange();try{rd.moveToElementText(td.parentNode)}catch(ld){return rd}return rd.collapse(!0),rd.moveEnd("character",nd),rd.moveStart("character",od),rd};var Ms=function(td){td.select()};xs?Ms=function(td){td.selectionStart=0,td.selectionEnd=td.value.length}:ps&&(Ms=function(td){try{td.select()}catch(od){}});var Ps=function(){this.id=null};Ps.prototype.set=function(td,od){clearTimeout(this.id),this.id=setTimeout(od,td)};var Fs=30,Rs={toString:function(){return"CodeMirror.Pass"}},Os={scroll:!1},zs={origin:"*mouse"},Ws={origin:"+move"},Bs=[""],$s=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Us=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,js=!1,Ks=!1,Vs=null,Gs=function(){function td(pd){return 247>=pd?nd.charAt(pd):1424<=pd&&1524>=pd?"R":1536<=pd&&1785>=pd?rd.charAt(pd-1536):1774<=pd&&2220>=pd?"r":8192<=pd&&8203>=pd?"w":8204==pd?"b":"L"}function od(pd,hd,ud){this.level=pd,this.from=hd,this.to=ud}var nd="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",rd="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111",ld=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,sd=/[stwN]/,ad=/[LRr]/,dd=/[Lb1n]/,cd=/[1n]/;return function(pd,hd){var ud="ltr"==hd?"L":"R";if(0==pd.length||"ltr"==hd&&!ld.test(pd))return!1;for(var gd=pd.length,fd=[],md=0;md<gd;++md)fd.push(td(pd.charCodeAt(md)));for(var yd=0,vd=ud,bd;yd<gd;++yd)bd=fd[yd],"m"==bd?fd[yd]=vd:vd=bd;for(var Cd=0,xd=ud,kd;Cd<gd;++Cd)kd=fd[Cd],"1"==kd&&"r"==xd?fd[Cd]="n":ad.test(kd)&&(xd=kd,"r"==kd&&(fd[Cd]="R"));for(var wd=1,Sd=fd[0],Ld;wd<gd-1;++wd)Ld=fd[wd],"+"==Ld&&"1"==Sd&&"1"==fd[wd+1]?fd[wd]="1":","==Ld&&Sd==fd[wd+1]&&("1"==Sd||"n"==Sd)&&(fd[wd]=Sd),Sd=Ld;for(var Td=0,Nd;Td<gd;++Td)if(Nd=fd[Td],","==Nd)fd[Td]="N";else if("%"==Nd){var Ad=void 0;for(Ad=Td+1;Ad<gd&&"%"==fd[Ad];++Ad);for(var Dd=Td&&"!"==fd[Td-1]||Ad<gd&&"1"==fd[Ad]?"1":"N",Id=Td;Id<Ad;++Id)fd[Id]=Dd;Td=Ad-1}for(var Hd=0,Ed=ud,Md;Hd<gd;++Hd)Md=fd[Hd],"L"==Ed&&"1"==Md?fd[Hd]="L":ad.test(Md)&&(Ed=Md);for(var Pd=0;Pd<gd;++Pd)if(sd.test(fd[Pd])){var Fd=void 0;for(Fd=Pd+1;Fd<gd&&sd.test(fd[Fd]);++Fd);for(var Rd="L"==(Pd?fd[Pd-1]:ud),Od="L"==(Fd<gd?fd[Fd]:ud),zd=Rd==Od?Rd?"L":"R":ud,Wd=Pd;Wd<Fd;++Wd)fd[Wd]=zd;Pd=Fd-1}for(var Bd=[],Ud=0,$d;Ud<gd;)if(dd.test(fd[Ud])){var jd=Ud;for(++Ud;Ud<gd&&dd.test(fd[Ud]);++Ud);Bd.push(new od(0,jd,Ud))}else{var Kd=Ud,Vd=Bd.length;for(++Ud;Ud<gd&&"L"!=fd[Ud];++Ud);for(var Gd=Kd;Gd<Ud;)if(cd.test(fd[Gd])){Kd<Gd&&Bd.splice(Vd,0,new od(1,Kd,Gd));var qd=Gd;for(++Gd;Gd<Ud&&cd.test(fd[Gd]);++Gd);Bd.splice(Vd,0,new od(2,qd,Gd)),Kd=Gd}else++Gd;Kd<Ud&&Bd.splice(Vd,0,new od(1,Kd,Ud))}return"ltr"==hd&&(1==Bd[0].level&&($d=pd.match(/^\s+/))&&(Bd[0].from=$d[0].length,Bd.unshift(new od(0,0,$d[0].length))),1==B(Bd).level&&($d=pd.match(/\s+$/))&&(B(Bd).to-=$d[0].length,Bd.push(new od(0,gd-$d[0].length,gd)))),"rtl"==hd?Bd.reverse():Bd}}(),qs=[],_s=function(td,od,nd){if(td.addEventListener)td.addEventListener(od,nd,!1);else if(td.attachEvent)td.attachEvent("on"+od,nd);else{var rd=td._handlers||(td._handlers={});rd[od]=(rd[od]||qs).concat(nd)}},Xs=function(){if(ps&&9>hs)return!1;var td=A("div");return"draggable"in td||"dragDrop"in td}(),Qs=3=="\n\nb".split(/\n/).length?function(td){return td.split(/\r\n?|\n/)}:function(td){for(var od=0,nd=[],rd=td.length,ld;od<=rd;){ld=td.indexOf("\n",od),-1==ld&&(ld=td.length);var sd=td.slice(od,"\r"==td.charAt(ld-1)?ld-1:ld),ad=sd.indexOf("\r");-1==ad?(nd.push(sd),od=ld+1):(nd.push(sd.slice(0,ad)),od+=ad+1)}return nd},Js=window.getSelection?function(td){try{return td.selectionStart!=td.selectionEnd}catch(od){return!1}}:function(td){var od;try{od=td.ownerDocument.selection.createRange()}catch(nd){}return od&&od.parentElement()==td&&0!=od.compareEndPoints("StartToEnd",od)},ea=function(){var td=A("div");return!!("oncopy"in td)||(td.setAttribute("oncopy","return;"),"function"==typeof td.oncopy)}(),ta=null,oa={},na={},ia={},ra=function(td,od,nd){this.pos=this.start=0,this.string=td,this.tabSize=od||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=nd},Ys,Zs;ra.prototype.eol=function(){return this.pos>=this.string.length},ra.prototype.sol=function(){return this.pos==this.lineStart},ra.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},ra.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},ra.prototype.eat=function(td){var od=this.string.charAt(this.pos),nd;if(nd="string"==typeof td?od==td:od&&(td.test?td.test(od):td(od)),nd)return++this.pos,od},ra.prototype.eatWhile=function(td){for(var od=this.pos;this.eat(td););return this.pos>od},ra.prototype.eatSpace=function(){for(var td=this,od=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++td.pos;return this.pos>od},ra.prototype.skipToEnd=function(){this.pos=this.string.length},ra.prototype.skipTo=function(td){var od=this.string.indexOf(td,this.pos);if(-1<od)return this.pos=od,!0},ra.prototype.backUp=function(td){this.pos-=td},ra.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=R(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?R(this.string,this.lineStart,this.tabSize):0)},ra.prototype.indentation=function(){return R(this.string,null,this.tabSize)-(this.lineStart?R(this.string,this.lineStart,this.tabSize):0)},ra.prototype.match=function(td,od,nd){if("string"==typeof td){var rd=function(ad){return nd?ad.toLowerCase():ad},ld=this.string.substr(this.pos,td.length);if(rd(ld)==rd(td))return!1!==od&&(this.pos+=td.length),!0}else{var sd=this.string.slice(this.pos).match(td);return sd&&0<sd.index?null:(sd&&!1!==od&&(this.pos+=sd[0].length),sd)}},ra.prototype.current=function(){return this.string.slice(this.start,this.pos)},ra.prototype.hideFirstChars=function(td,od){this.lineStart+=td;try{return od()}finally{this.lineStart-=td}},ra.prototype.lookAhead=function(td){var od=this.lineOracle;return od&&od.lookAhead(td)},ra.prototype.baseToken=function(){var td=this.lineOracle;return td&&td.baseToken(this.pos)};var la=function(td,od){this.state=td,this.lookAhead=od},sa=function(td,od,nd,rd){this.state=od,this.doc=td,this.line=nd,this.maxLookAhead=rd||0,this.baseTokens=null,this.baseTokenPos=1};sa.prototype.lookAhead=function(td){var od=this.doc.getLine(this.line+td);return null!=od&&td>this.maxLookAhead&&(this.maxLookAhead=td),od},sa.prototype.baseToken=function(td){var od=this;if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=td;)od.baseTokenPos+=2;var nd=this.baseTokens[this.baseTokenPos+1];return{type:nd&&nd.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-td}},sa.prototype.nextLine=function(){this.line++,0<this.maxLookAhead&&this.maxLookAhead--},sa.fromSaved=function(td,od,nd){return od instanceof la?new sa(td,Tt(td.mode,od.state),nd,od.lookAhead):new sa(td,Tt(td.mode,od),nd)},sa.prototype.save=function(td){var od=!1===td?this.state:Tt(this.doc.mode,this.state);return 0<this.maxLookAhead?new la(od,this.maxLookAhead):od};var aa=function(td,od,nd){this.start=td.start,this.end=td.pos,this.string=td.current(),this.type=od||null,this.state=nd},da=function(td,od,nd){this.text=td,Pe(this,od),this.height=nd?nd(this):1};da.prototype.lineNo=function(){return le(this)},pt(da);var ca={},pa={},ha=null,ua=null,ga={left:0,right:0,top:0,bottom:0},ma=function(td,od,nd){this.cm=nd;var rd=this.vert=A("div",[A("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),ld=this.horiz=A("div",[A("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");td(rd),td(ld),_s(rd,"scroll",function(){rd.clientHeight&&od(rd.scrollTop,"vertical")}),_s(ld,"scroll",function(){ld.clientWidth&&od(ld.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,ps&&8>hs&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")},fa;ma.prototype.update=function(td){var od=td.scrollWidth>td.clientWidth+1,nd=td.scrollHeight>td.clientHeight+1,rd=td.nativeBarWidth;if(nd){this.vert.style.display="block",this.vert.style.bottom=od?rd+"px":"0";var ld=td.viewHeight-(od?rd:0);this.vert.firstChild.style.height=_Mathmax(0,td.scrollHeight-td.clientHeight+ld)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(od){this.horiz.style.display="block",this.horiz.style.right=nd?rd+"px":"0",this.horiz.style.left=td.barLeft+"px";var sd=td.viewWidth-td.barLeft-(nd?rd:0);this.horiz.firstChild.style.width=_Mathmax(0,td.scrollWidth-td.clientWidth+sd)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&0<td.clientHeight&&(0==rd&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:nd?rd:0,bottom:od?rd:0}},ma.prototype.setScrollLeft=function(td){this.horiz.scrollLeft!=td&&(this.horiz.scrollLeft=td),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},ma.prototype.setScrollTop=function(td){this.vert.scrollTop!=td&&(this.vert.scrollTop=td),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},ma.prototype.zeroWidthHack=function(){var td=Ls&&!bs?"12px":"18px";this.horiz.style.height=this.vert.style.width=td,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new Ps,this.disableVert=new Ps},ma.prototype.enableZeroWidthBar=function(td,od,nd){function rd(){var ld=td.getBoundingClientRect(),sd="vert"==nd?document.elementFromPoint(ld.right-1,(ld.top+ld.bottom)/2):document.elementFromPoint((ld.right+ld.left)/2,ld.bottom-1);sd==td?od.set(1e3,rd):td.style.pointerEvents="none"}td.style.pointerEvents="auto",od.set(1e3,rd)},ma.prototype.clear=function(){var td=this.horiz.parentNode;td.removeChild(this.horiz),td.removeChild(this.vert)};var ya=function(){};ya.prototype.update=function(){return{bottom:0,right:0}},ya.prototype.setScrollLeft=function(){},ya.prototype.setScrollTop=function(){},ya.prototype.clear=function(){};var va={native:ma,null:ya},ba=0,Ca=function(td,od,nd){var rd=td.display;this.viewport=od,this.visible=Nn(rd,td.doc,od),this.editorIsHidden=!rd.wrapper.offsetWidth,this.wrapperHeight=rd.wrapper.clientHeight,this.wrapperWidth=rd.wrapper.clientWidth,this.oldDisplayWidth=To(td),this.force=nd,this.dims=an(td),this.events=[]};Ca.prototype.signal=function(td,od){ct(td,od)&&this.events.push(arguments)},Ca.prototype.finish=function(){for(var td=this,od=0;od<this.events.length;od++)it.apply(null,td.events[od])};var xa=0,ka=null;ps?ka=-.53:ls?ka=15:fs?ka=-.7:vs&&(ka=-1/3);var wa=function(td,od){this.ranges=td,this.primIndex=od};wa.prototype.primary=function(){return this.ranges[this.primIndex]},wa.prototype.equals=function(td){var od=this;if(td==this)return!0;if(td.primIndex!=this.primIndex||td.ranges.length!=this.ranges.length)return!1;for(var nd=0;nd<this.ranges.length;nd++){var rd=od.ranges[nd],ld=td.ranges[nd];if(!he(rd.anchor,ld.anchor)||!he(rd.head,ld.head))return!1}return!0},wa.prototype.deepCopy=function(){for(var td=this,od=[],nd=0;nd<this.ranges.length;nd++)od[nd]=new Sa(ue(td.ranges[nd].anchor),ue(td.ranges[nd].head));return new wa(od,this.primIndex)},wa.prototype.somethingSelected=function(){for(var td=this,od=0;od<this.ranges.length;od++)if(!td.ranges[od].empty())return!0;return!1},wa.prototype.contains=function(td,od){var nd=this;od||(od=td);for(var rd=0,ld;rd<this.ranges.length;rd++)if(ld=nd.ranges[rd],0<=pe(od,ld.from())&&0>=pe(td,ld.to()))return rd;return-1};var Sa=function(td,od){this.anchor=td,this.head=od};Sa.prototype.from=function(){return fe(this.anchor,this.head)},Sa.prototype.to=function(){return ge(this.anchor,this.head)},Sa.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Ir.prototype={chunkSize:function(){return this.lines.length},removeInner:function(od,nd){for(var rd=this,ld=od,ad;ld<od+nd;++ld)ad=rd.lines[ld],rd.height-=ad.height,$t(ad),io(ad,"delete");this.lines.splice(od,nd)},collapse:function(od){od.push.apply(od,this.lines)},insertInner:function(od,nd,rd){var ld=this;this.height+=rd,this.lines=this.lines.slice(0,od).concat(nd).concat(this.lines.slice(od));for(var sd=0;sd<nd.length;++sd)nd[sd].parent=ld},iterN:function(od,nd,rd){for(var ld=this,sd=od+nd;od<sd;++od)if(rd(ld.lines[od]))return!0}},Hr.prototype={chunkSize:function(){return this.size},removeInner:function(od,nd){var rd=this;this.size-=nd;for(var ld=0;ld<this.children.length;++ld){var sd=rd.children[ld],ad=sd.chunkSize();if(od<ad){var dd=_Mathmin(nd,ad-od),cd=sd.height;if(sd.removeInner(od,dd),rd.height-=cd-sd.height,ad==dd&&(rd.children.splice(ld--,1),sd.parent=null),0==(nd-=dd))break;od=0}else od-=ad}if(25>this.size-nd&&(1<this.children.length||!(this.children[0]instanceof Ir))){var pd=[];this.collapse(pd),this.children=[new Ir(pd)],this.children[0].parent=this}},collapse:function(od){for(var nd=this,rd=0;rd<this.children.length;++rd)nd.children[rd].collapse(od)},insertInner:function(od,nd,rd){var ld=this;this.size+=nd.length,this.height+=rd;for(var sd=0;sd<this.children.length;++sd){var ad=ld.children[sd],dd=ad.chunkSize();if(od<=dd){if(ad.insertInner(od,nd,rd),ad.lines&&50<ad.lines.length){for(var cd=ad.lines.length%25+25,pd=cd,hd;pd<ad.lines.length;)hd=new Ir(ad.lines.slice(pd,pd+=25)),ad.height-=hd.height,ld.children.splice(++sd,0,hd),hd.parent=ld;ad.lines=ad.lines.slice(0,cd),ld.maybeSpill()}break}od-=dd}},maybeSpill:function(){if(!(10>=this.children.length)){var od=this;do{var nd=od.children.splice(od.children.length-5,5),rd=new Hr(nd);if(!od.parent){var ld=new Hr(od.children);ld.parent=od,od.children=[ld,rd],od=ld}else{od.size-=rd.size,od.height-=rd.height;var sd=O(od.parent.children,od);od.parent.children.splice(sd+1,0,rd)}rd.parent=od.parent}while(10<od.children.length);od.parent.maybeSpill()}},iterN:function(od,nd,rd){for(var ld=this,sd=0;sd<this.children.length;++sd){var ad=ld.children[sd],dd=ad.chunkSize();if(od<dd){var cd=_Mathmin(nd,dd-od);if(ad.iterN(od,cd,rd))return!0;if(0==(nd-=cd))break;od=0}else od-=dd}}};var La=function(td,od,nd){var rd=this;if(nd)for(var ld in nd)nd.hasOwnProperty(ld)&&(rd[ld]=nd[ld]);this.doc=td,this.node=od};La.prototype.clear=function(){var td=this,od=this.doc.cm,nd=this.line.widgets,rd=this.line,ld=le(rd);if(null!=ld&&nd){for(var sd=0;sd<nd.length;++sd)nd[sd]==td&&nd.splice(sd--,1);nd.length||(rd.widgets=null);var ad=Co(this);re(rd,_Mathmax(0,rd.height-ad)),od&&(ti(od,function(){Er(od,rd,-ad),li(od,ld,"widget")}),io(od,"lineWidgetCleared",od,this,ld))}},La.prototype.changed=function(){var td=this,od=this.height,nd=this.doc.cm,rd=this.line;this.height=null;var ld=Co(this)-od;ld&&(re(rd,rd.height+ld),nd&&ti(nd,function(){nd.curOp.forceUpdate=!0,Er(nd,rd,ld),io(nd,"lineWidgetChanged",nd,td,le(rd))}))},pt(La);var Ta=0,Na=function(td,od){this.lines=[],this.type=od,this.doc=td,this.id=++Ta};Na.prototype.clear=function(){var td=this;if(!this.explicitlyCleared){var od=this.doc.cm,nd=od&&!od.curOp;if(nd&&qn(od),ct(this,"clear")){var rd=this.find();rd&&io(this,"clear",rd.from,rd.to)}for(var ld=null,sd=null,ad=0;ad<this.lines.length;++ad){var dd=td.lines[ad],cd=Le(dd.markedSpans,td);od&&!td.collapsed?li(od,le(dd),"text"):od&&(null!=cd.to&&(sd=le(dd)),null!=cd.from&&(ld=le(dd))),dd.markedSpans=Te(dd.markedSpans,cd),null==cd.from&&td.collapsed&&!qe(td.doc,dd)&&od&&re(dd,ln(od.display))}if(od&&this.collapsed&&!od.options.lineWrapping)for(var pd=0;pd<this.lines.length;++pd){var hd=Ue(td.lines[pd]),ud=Ze(hd);ud>od.display.maxLineLength&&(od.display.maxLine=hd,od.display.maxLineLength=ud,od.display.maxLineChanged=!0)}null!=ld&&od&&this.collapsed&&ri(od,ld,sd+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,od&&hr(od.doc)),od&&io(od,"markerCleared",od,this,ld,sd),nd&&_n(od),this.parent&&this.parent.clear()}},Na.prototype.find=function(td,od){var nd=this;null==td&&"bookmark"==this.type&&(td=1);for(var sd=0,rd,ld;sd<this.lines.length;++sd){var ad=nd.lines[sd],dd=Le(ad.markedSpans,nd);if(null!=dd.from&&(rd=ce(od?ad:le(ad),dd.from),-1==td))return rd;if(null!=dd.to&&(ld=ce(od?ad:le(ad),dd.to),1==td))return ld}return rd&&{from:rd,to:ld}},Na.prototype.changed=function(){var td=this,od=this.find(-1,!0),nd=this,rd=this.doc.cm;od&&rd&&ti(rd,function(){var ld=od.line,sd=le(od.line),ad=Eo(rd,sd);if(ad&&(Wo(ad),rd.curOp.selectionChanged=rd.curOp.forceUpdate=!0),rd.curOp.updateMaxLine=!0,!qe(nd.doc,ld)&&null!=nd.height){var dd=nd.height;nd.height=null;var cd=Co(nd)-dd;cd&&re(ld,ld.height+cd)}io(rd,"markerChanged",rd,td)})},Na.prototype.attachLine=function(td){if(!this.lines.length&&this.doc.cm){var od=this.doc.cm.curOp;od.maybeHiddenMarkers&&-1!=O(od.maybeHiddenMarkers,this)||(od.maybeUnhiddenMarkers||(od.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(td)},Na.prototype.detachLine=function(td){if(this.lines.splice(O(this.lines,td),1),!this.lines.length&&this.doc.cm){var od=this.doc.cm.curOp;(od.maybeHiddenMarkers||(od.maybeHiddenMarkers=[])).push(this)}},pt(Na);var Aa=function(td,od){var nd=this;this.markers=td,this.primary=od;for(var rd=0;rd<td.length;++rd)td[rd].parent=nd};Aa.prototype.clear=function(){var td=this;if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var od=0;od<this.markers.length;++od)td.markers[od].clear();io(this,"clear")}},Aa.prototype.find=function(td,od){return this.primary.find(td,od)},pt(Aa);var Da=0,Ia=function(td,od,nd,rd,ld){if(!(this instanceof Ia))return new Ia(td,od,nd,rd,ld);null==nd&&(nd=0),Hr.call(this,[new Ir([new da("",null)])]),this.first=nd,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=nd;var sd=ce(nd,0);this.sel=Di(sd),this.history=new ji(null),this.id=++Da,this.modeOption=od,this.lineSep=rd,this.direction="rtl"==ld?"rtl":"ltr",this.extend=!1,"string"==typeof td&&(td=this.splitLines(td)),zi(this,{from:sd,to:sd,text:td}),dr(this,Di(sd),Os)};Ia.prototype=G(Hr.prototype,{constructor:Ia,iter:function(td,od,nd){nd?this.iterN(td-this.first,od-td,nd):this.iterN(this.first,this.first+this.size,td)},insert:function(td,od){for(var nd=0,rd=0;rd<od.length;++rd)nd+=od[rd].height;this.insertInner(td-this.first,od,nd)},remove:function(td,od){this.removeInner(td-this.first,od)},getValue:function(td){var od=ne(this,this.first,this.first+this.size);return!1===td?od:od.join(td||this.lineSeparator())},setValue:ii(function(td){var od=ce(this.first,0),nd=this.first+this.size-1;br(this,{from:od,to:ce(nd,ee(this,nd).text.length),text:this.splitLines(td),origin:"setValue",full:!0},!0),this.cm&&Rn(this.cm,0,0),dr(this,Di(od),Os)}),replaceRange:function(td,od,nd,rd){od=ve(this,od),nd=nd?ve(this,nd):od,Lr(this,td,od,nd,rd)},getRange:function(td,od,nd){var rd=oe(this,ve(this,td),ve(this,od));return!1===nd?rd:rd.join(nd||this.lineSeparator())},getLine:function(td){var od=this.getLineHandle(td);return od&&od.text},getLineHandle:function(td){if(ae(this,td))return ee(this,td)},getLineNumber:function(td){return le(td)},getLineHandleVisualStart:function(td){return"number"==typeof td&&(td=ee(this,td)),Ue(td)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(td){return ve(this,td)},getCursor:function(td){var od=this.sel.primary(),nd;return nd=null==td||"head"==td?od.head:"anchor"==td?od.anchor:"end"==td||"to"==td||!1===td?od.to():od.from(),nd},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:ii(function(td,od,nd){lr(this,ve(this,"number"==typeof td?ce(td,od||0):td),null,nd)}),setSelection:ii(function(td,od,nd){lr(this,ve(this,td),ve(this,od||td),nd)}),extendSelection:ii(function(td,od,nd){nr(this,ve(this,td),od&&ve(this,od),nd)}),extendSelections:ii(function(td,od){ir(this,Ce(this,td),od)}),extendSelectionsBy:ii(function(td,od){var nd=U(this.sel.ranges,td);ir(this,Ce(this,nd),od)}),setSelections:ii(function(td,od,nd){var rd=this;if(td.length){for(var ld=[],sd=0;sd<td.length;sd++)ld[sd]=new Sa(ve(rd,td[sd].anchor),ve(rd,td[sd].head));null==od&&(od=_Mathmin(td.length-1,this.sel.primIndex)),dr(this,Ai(ld,od),nd)}}),addSelection:ii(function(td,od,nd){var rd=this.sel.ranges.slice(0);rd.push(new Sa(ve(this,td),ve(this,od||td))),dr(this,Ai(rd,rd.length-1),nd)}),getSelection:function(td){for(var od=this,nd=this.sel.ranges,ld=0,rd,sd;ld<nd.length;ld++)sd=oe(od,nd[ld].from(),nd[ld].to()),rd=rd?rd.concat(sd):sd;return!1===td?rd:rd.join(td||this.lineSeparator())},getSelections:function(td){for(var od=this,nd=[],rd=this.sel.ranges,ld=0,sd;ld<rd.length;ld++)sd=oe(od,rd[ld].from(),rd[ld].to()),!1!==td&&(sd=sd.join(td||od.lineSeparator())),nd[ld]=sd;return nd},replaceSelection:function(td,od,nd){for(var rd=[],ld=0;ld<this.sel.ranges.length;ld++)rd[ld]=td;this.replaceSelections(rd,od,nd||"+input")},replaceSelections:ii(function(td,od,nd){for(var rd=this,ld=[],sd=this.sel,ad=0,dd;ad<sd.ranges.length;ad++)dd=sd.ranges[ad],ld[ad]={from:dd.from(),to:dd.to(),text:rd.splitLines(td[ad]),origin:nd};for(var cd=od&&"end"!=od&&Pi(this,ld,od),pd=ld.length-1;0<=pd;pd--)br(rd,ld[pd]);cd?ar(this,cd):this.cm&&Fn(this.cm)}),undo:ii(function(){xr(this,"undo")}),redo:ii(function(){xr(this,"redo")}),undoSelection:ii(function(){xr(this,"undo",!0)}),redoSelection:ii(function(){xr(this,"redo",!0)}),setExtending:function(td){this.extend=td},getExtending:function(){return this.extend},historySize:function(){for(var td=this.history,od=0,nd=0,rd=0;rd<td.done.length;rd++)td.done[rd].ranges||++od;for(var ld=0;ld<td.undone.length;ld++)td.undone[ld].ranges||++nd;return{undo:od,redo:nd}},clearHistory:function(){this.history=new ji(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(td){return td&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(td){return this.history.generation==(td||this.cleanGeneration)},getHistory:function(){return{done:tr(this.history.done),undone:tr(this.history.undone)}},setHistory:function(td){var od=this.history=new ji(this.history.maxGeneration);od.done=tr(td.done.slice(0),null,!0),od.undone=tr(td.undone.slice(0),null,!0)},setGutterMarker:ii(function(td,od,nd){return Dr(this,td,"gutter",function(rd){var ld=rd.gutterMarkers||(rd.gutterMarkers={});return ld[od]=nd,!nd&&X(ld)&&(rd.gutterMarkers=null),!0})}),clearGutter:ii(function(td){var od=this;this.iter(function(nd){nd.gutterMarkers&&nd.gutterMarkers[td]&&Dr(od,nd,"gutter",function(){return nd.gutterMarkers[td]=null,X(nd.gutterMarkers)&&(nd.gutterMarkers=null),!0})})}),lineInfo:function(td){var od;if("number"==typeof td){if(!ae(this,td))return null;if(od=td,td=ee(this,td),!td)return null}else if(od=le(td),null==od)return null;return{line:od,handle:td,text:td.text,gutterMarkers:td.gutterMarkers,textClass:td.textClass,bgClass:td.bgClass,wrapClass:td.wrapClass,widgets:td.widgets}},addLineClass:ii(function(td,od,nd){return Dr(this,td,"gutter"==od?"gutter":"class",function(rd){var ld="text"==od?"textClass":"background"==od?"bgClass":"gutter"==od?"gutterClass":"wrapClass";if(!rd[ld])rd[ld]=nd;else{if(L(nd).test(rd[ld]))return!1;rd[ld]+=" "+nd}return!0})}),removeLineClass:ii(function(td,od,nd){return Dr(this,td,"gutter"==od?"gutter":"class",function(rd){var ld="text"==od?"textClass":"background"==od?"bgClass":"gutter"==od?"gutterClass":"wrapClass",sd=rd[ld];if(!sd)return!1;if(null==nd)rd[ld]=null;else{var ad=sd.match(L(nd));if(!ad)return!1;var dd=ad.index+ad[0].length;rd[ld]=sd.slice(0,ad.index)+(ad.index&&dd!=sd.length?" ":"")+sd.slice(dd)||null}return!0})}),addLineWidget:ii(function(td,od,nd){return Mr(this,td,od,nd)}),removeLineWidget:function(td){td.clear()},markText:function(td,od,nd){return Pr(this,ve(this,td),ve(this,od),nd,nd&&nd.type||"range")},setBookmark:function(td,od){var nd={replacedWith:od&&(null==od.nodeType?od.widget:od),insertLeft:od&&od.insertLeft,clearWhenEmpty:!1,shared:od&&od.shared,handleMouseEvents:od&&od.handleMouseEvents};return td=ve(this,td),Pr(this,td,td,nd,"bookmark")},findMarksAt:function(td){td=ve(this,td);var od=[],nd=ee(this,td.line).markedSpans;if(nd)for(var rd=0,ld;rd<nd.length;++rd)ld=nd[rd],(null==ld.from||ld.from<=td.ch)&&(null==ld.to||ld.to>=td.ch)&&od.push(ld.marker.parent||ld.marker);return od},findMarks:function(td,od,nd){td=ve(this,td),od=ve(this,od);var rd=[],ld=td.line;return this.iter(td.line,od.line+1,function(sd){var ad=sd.markedSpans;if(ad)for(var dd=0,cd;dd<ad.length;dd++)cd=ad[dd],null!=cd.to&&ld==td.line&&td.ch>=cd.to||null==cd.from&&ld!=td.line||null!=cd.from&&ld==od.line&&cd.from>=od.ch||nd&&!nd(cd.marker)||rd.push(cd.marker.parent||cd.marker);++ld}),rd},getAllMarks:function(){var td=[];return this.iter(function(od){var nd=od.markedSpans;if(nd)for(var rd=0;rd<nd.length;++rd)null!=nd[rd].from&&td.push(nd[rd].marker)}),td},posFromIndex:function(td){var nd=this.first,rd=this.lineSeparator().length,od;return this.iter(function(ld){var sd=ld.text.length+rd;return sd>td?(od=td,!0):void(td-=sd,++nd)}),ve(this,ce(nd,od))},indexFromPos:function(td){td=ve(this,td);var od=td.ch;if(td.line<this.first||0>td.ch)return 0;var nd=this.lineSeparator().length;return this.iter(this.first,td.line,function(rd){od+=rd.text.length+nd}),od},copy:function(td){var od=new Ia(ne(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return od.scrollTop=this.scrollTop,od.scrollLeft=this.scrollLeft,od.sel=this.sel,od.extend=!1,td&&(od.history.undoDepth=this.history.undoDepth,od.setHistory(this.getHistory())),od},linkedDoc:function(td){td||(td={});var od=this.first,nd=this.first+this.size;null!=td.from&&td.from>od&&(od=td.from),null!=td.to&&td.to<nd&&(nd=td.to);var rd=new Ia(ne(this,od,nd),td.mode||this.modeOption,od,this.lineSep,this.direction);return td.sharedHist&&(rd.history=this.history),(this.linked||(this.linked=[])).push({doc:rd,sharedHist:td.sharedHist}),rd.linked=[{doc:this,isParent:!0,sharedHist:td.sharedHist}],Or(rd,Rr(this)),rd},unlinkDoc:function(td){var od=this;if(td instanceof zl&&(td=td.doc),this.linked)for(var nd=0,rd;nd<this.linked.length;++nd)if(rd=od.linked[nd],rd.doc==td){od.linked.splice(nd,1),td.unlinkDoc(od),zr(Rr(od));break}if(td.history==this.history){var ld=[td.id];Wi(td,function(sd){return ld.push(sd.id)},!0),td.history=new ji(null),td.history.done=tr(this.history.done,ld),td.history.undone=tr(this.history.undone,ld)}},iterLinkedDocs:function(td){Wi(this,td)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(td){return this.lineSep?td.split(this.lineSep):Qs(td)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:ii(function(td){"rtl"!=td&&(td="ltr"),td==this.direction||(this.direction=td,this.iter(function(od){return od.order=null}),this.cm&&Ui(this.cm))})}),Ia.prototype.eachLine=Ia.prototype.iter;for(var Ha=0,Ea=!1,Ma={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Pa=0;10>Pa;Pa++)Ma[Pa+48]=Ma[Pa+96]=Pa+"";for(var Fa=65;90>=Fa;Fa++)Ma[Fa]=_StringfromCharCode(Fa);for(var Ra=1;12>=Ra;Ra++)Ma[Ra+111]=Ma[Ra+63235]="F"+Ra;var Oa={};Oa.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Oa.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Oa.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Oa.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Oa["default"]=Ls?Oa.macDefault:Oa.pcDefault;var za={selectAll:yr,singleSelection:function(td){return td.setSelection(td.getCursor("anchor"),td.getCursor("head"),Os)},killLine:function(td){return tl(td,function(od){if(od.empty()){var nd=ee(td.doc,od.head.line).text.length;return od.head.ch==nd&&od.head.line<td.lastLine()?{from:od.head,to:ce(od.head.line+1,0)}:{from:od.head,to:ce(od.head.line,nd)}}return{from:od.from(),to:od.to()}})},deleteLine:function(td){return tl(td,function(od){return{from:ce(od.from().line,0),to:ve(td.doc,ce(od.to().line+1,0))}})},delLineLeft:function(td){return tl(td,function(od){return{from:ce(od.from().line,0),to:od.from()}})},delWrappedLineLeft:function(td){return tl(td,function(od){var nd=td.charCoords(od.head,"div").top+5,rd=td.coordsChar({left:0,top:nd},"div");return{from:rd,to:od.from()}})},delWrappedLineRight:function(td){return tl(td,function(od){var nd=td.charCoords(od.head,"div").top+5,rd=td.coordsChar({left:td.display.lineDiv.offsetWidth+100,top:nd},"div");return{from:od.from(),to:rd}})},undo:function(td){return td.undo()},redo:function(td){return td.redo()},undoSelection:function(td){return td.undoSelection()},redoSelection:function(td){return td.redoSelection()},goDocStart:function(td){return td.extendSelection(ce(td.firstLine(),0))},goDocEnd:function(td){return td.extendSelection(ce(td.lastLine()))},goLineStart:function(td){return td.extendSelectionsBy(function(od){return sl(td,od.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(td){return td.extendSelectionsBy(function(od){return dl(td,od.head)},{origin:"+move",bias:1})},goLineEnd:function(td){return td.extendSelectionsBy(function(od){return al(td,od.head.line)},{origin:"+move",bias:-1})},goLineRight:function(td){return td.extendSelectionsBy(function(od){var nd=td.cursorCoords(od.head,"div").top+5;return td.coordsChar({left:td.display.lineDiv.offsetWidth+100,top:nd},"div")},Ws)},goLineLeft:function(td){return td.extendSelectionsBy(function(od){var nd=td.cursorCoords(od.head,"div").top+5;return td.coordsChar({left:0,top:nd},"div")},Ws)},goLineLeftSmart:function(td){return td.extendSelectionsBy(function(od){var nd=td.cursorCoords(od.head,"div").top+5,rd=td.coordsChar({left:0,top:nd},"div");return rd.ch<td.getLine(rd.line).search(/\S/)?dl(td,od.head):rd},Ws)},goLineUp:function(td){return td.moveV(-1,"line")},goLineDown:function(td){return td.moveV(1,"line")},goPageUp:function(td){return td.moveV(-1,"page")},goPageDown:function(td){return td.moveV(1,"page")},goCharLeft:function(td){return td.moveH(-1,"char")},goCharRight:function(td){return td.moveH(1,"char")},goColumnLeft:function(td){return td.moveH(-1,"column")},goColumnRight:function(td){return td.moveH(1,"column")},goWordLeft:function(td){return td.moveH(-1,"word")},goGroupRight:function(td){return td.moveH(1,"group")},goGroupLeft:function(td){return td.moveH(-1,"group")},goWordRight:function(td){return td.moveH(1,"word")},delCharBefore:function(td){return td.deleteH(-1,"char")},delCharAfter:function(td){return td.deleteH(1,"char")},delWordBefore:function(td){return td.deleteH(-1,"word")},delWordAfter:function(td){return td.deleteH(1,"word")},delGroupBefore:function(td){return td.deleteH(-1,"group")},delGroupAfter:function(td){return td.deleteH(1,"group")},indentAuto:function(td){return td.indentSelection("smart")},indentMore:function(td){return td.indentSelection("add")},indentLess:function(td){return td.indentSelection("subtract")},insertTab:function(td){return td.replaceSelection("\t")},insertSoftTab:function(td){for(var od=[],nd=td.listSelections(),rd=td.options.tabSize,ld=0;ld<nd.length;ld++){var sd=nd[ld].from(),ad=R(td.getLine(sd.line),sd.ch,rd);od.push(W(rd-ad%rd))}td.replaceSelections(od)},defaultTab:function(td){td.somethingSelected()?td.indentSelection("add"):td.execCommand("insertTab")},transposeChars:function(td){return ti(td,function(){for(var od=td.listSelections(),nd=[],rd=0;rd<od.length;rd++)if(od[rd].empty()){var ld=od[rd].head,sd=ee(td.doc,ld.line).text;if(sd)if(ld.ch==sd.length&&(ld=new ce(ld.line,ld.ch-1)),0<ld.ch)ld=new ce(ld.line,ld.ch+1),td.replaceRange(sd.charAt(ld.ch-1)+sd.charAt(ld.ch-2),ce(ld.line,ld.ch-2),ld,"+transpose");else if(ld.line>td.doc.first){var ad=ee(td.doc,ld.line-1).text;ad&&(ld=new ce(ld.line,1),td.replaceRange(sd.charAt(0)+td.doc.lineSeparator()+ad.charAt(ad.length-1),ce(ld.line-1,ad.length-1),ld,"+transpose"))}nd.push(new Sa(ld,ld))}td.setSelections(nd)})},newlineAndIndent:function(td){return ti(td,function(){for(var od=td.listSelections(),nd=od.length-1;0<=nd;nd--)td.replaceRange(td.doc.lineSeparator(),od[nd].anchor,od[nd].head,"+input");od=td.listSelections();for(var rd=0;rd<od.length;rd++)td.indentLine(od[rd].from().line,null,!0);Fn(td)})},openLine:function(td){return td.replaceSelection("\n","start")},toggleOverwrite:function(td){return td.toggleOverwrite()}},Wa=new Ps,Ba=null,Ua=function(td,od,nd){this.time=td,this.pos=od,this.button=nd};Ua.prototype.compare=function(td,od,nd){return this.time+400>td&&0==pe(od,this.pos)&&nd==this.button};var Va={toString:function(){return"CodeMirror.Init"}},Ga={},qa={},ja,Ka;zl.defaults=Ga,zl.optionHandlers=qa;var _a=[];zl.defineInitHook=function(td){return _a.push(td)};var Xa=null,Za=function(td){this.cm=td,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Ps,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};Za.prototype.init=function(td){function od(ad){if(!lt(ld,ad)){if(ld.somethingSelected())$l({lineWise:!1,text:ld.getSelections()}),"cut"==ad.type&&ld.replaceSelection("",null,"cut");else{if(!ld.options.lineWiseCopyCut)return;var dd=Vl(ld);$l({lineWise:!0,text:dd.text}),"cut"==ad.type&&ld.operation(function(){ld.setSelections(dd.ranges,0,Os),ld.replaceSelection("",null,"cut")})}if(ad.clipboardData){ad.clipboardData.clearData();var cd=Xa.text.join("\n");if(ad.clipboardData.setData("Text",cd),ad.clipboardData.getData("Text")==cd)return void ad.preventDefault()}var pd=ql(),hd=pd.firstChild;ld.display.lineSpace.insertBefore(pd,ld.display.lineSpace.firstChild),hd.value=Xa.text.join("\n");var ud=document.activeElement;Ms(hd),setTimeout(function(){ld.display.lineSpace.removeChild(pd),ud.focus(),ud==sd&&rd.showPrimarySelection()},50)}}var nd=this,rd=this,ld=rd.cm,sd=rd.div=td.lineDiv;Gl(sd,ld.options.spellcheck),_s(sd,"paste",function(ad){lt(ld,ad)||jl(ad,ld)||11>=hs&&setTimeout(oi(ld,function(){return nd.updateFromDOM()}),20)}),_s(sd,"compositionstart",function(ad){nd.composing={data:ad.data,done:!1}}),_s(sd,"compositionupdate",function(ad){nd.composing||(nd.composing={data:ad.data,done:!1})}),_s(sd,"compositionend",function(ad){nd.composing&&(ad.data!=nd.composing.data&&nd.readFromDOMSoon(),nd.composing.done=!0)}),_s(sd,"touchstart",function(){return rd.forceCompositionEnd()}),_s(sd,"input",function(){nd.composing||nd.readFromDOMSoon()}),_s(sd,"copy",od),_s(sd,"cut",od)},Za.prototype.prepareSelection=function(){var td=mn(this.cm,!1);return td.focus=this.cm.state.focused,td},Za.prototype.showSelection=function(td,od){td&&this.cm.display.view.length&&((td.focus||od)&&this.showPrimarySelection(),this.showMultipleSelections(td))},Za.prototype.showPrimarySelection=function(){var td=window.getSelection(),od=this.cm,nd=od.doc.sel.primary(),rd=nd.from(),ld=nd.to();if(od.display.viewTo==od.display.viewFrom||rd.line>=od.display.viewTo||ld.line<od.display.viewFrom)return void td.removeAllRanges();var sd=es(od,td.anchorNode,td.anchorOffset),ad=es(od,td.focusNode,td.focusOffset);if(!sd||sd.bad||!ad||ad.bad||0!=pe(fe(sd,ad),rd)||0!=pe(ge(sd,ad),ld)){var dd=od.display.view,cd=rd.line>=od.display.viewFrom&&Yl(od,rd)||{node:dd[0].measure.map[2],offset:0},pd=ld.line<od.display.viewTo&&Yl(od,ld);if(!pd){var hd=dd[dd.length-1].measure,ud=hd.maps?hd.maps[hd.maps.length-1]:hd.map;pd={node:ud[ud.length-1],offset:ud[ud.length-2]-ud[ud.length-3]}}if(!cd||!pd)return void td.removeAllRanges();var gd=td.rangeCount&&td.getRangeAt(0),fd;try{fd=Es(cd.node,cd.offset,pd.offset,pd.node)}catch(md){}fd&&(!ls&&od.state.focused?(td.collapse(cd.node,cd.offset),!fd.collapsed&&(td.removeAllRanges(),td.addRange(fd))):(td.removeAllRanges(),td.addRange(fd)),gd&&null==td.anchorNode?td.addRange(gd):ls&&this.startGracePeriod()),this.rememberSelection()}},Za.prototype.startGracePeriod=function(){var td=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){td.gracePeriod=!1,td.selectionChanged()&&td.cm.operation(function(){return td.cm.curOp.selectionChanged=!0})},20)},Za.prototype.showMultipleSelections=function(td){N(this.cm.display.cursorDiv,td.cursors),N(this.cm.display.selectionDiv,td.selection)},Za.prototype.rememberSelection=function(){var td=window.getSelection();this.lastAnchorNode=td.anchorNode,this.lastAnchorOffset=td.anchorOffset,this.lastFocusNode=td.focusNode,this.lastFocusOffset=td.focusOffset},Za.prototype.selectionInEditor=function(){var td=window.getSelection();if(!td.rangeCount)return!1;var od=td.getRangeAt(0).commonAncestorContainer;return I(this.div,od)},Za.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(!this.selectionInEditor()&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Za.prototype.blur=function(){this.div.blur()},Za.prototype.getField=function(){return this.div},Za.prototype.supportsTouch=function(){return!0},Za.prototype.receivedFocus=function(){function td(){od.cm.state.focused&&(od.pollSelection(),od.polling.set(od.cm.options.pollInterval,td))}var od=this;this.selectionInEditor()?this.pollSelection():ti(this.cm,function(){return od.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,td)},Za.prototype.selectionChanged=function(){var td=window.getSelection();return td.anchorNode!=this.lastAnchorNode||td.anchorOffset!=this.lastAnchorOffset||td.focusNode!=this.lastFocusNode||td.focusOffset!=this.lastFocusOffset},Za.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var td=window.getSelection(),od=this.cm;if(ks&&fs&&this.cm.options.gutters.length&&Zl(td.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:_Mathabs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var nd=es(od,td.anchorNode,td.anchorOffset),rd=es(od,td.focusNode,td.focusOffset);nd&&rd&&ti(od,function(){dr(od.doc,Di(nd,rd),Os),(nd.bad||rd.bad)&&(od.curOp.selectionChanged=!0)})}}},Za.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var td=this.cm,od=td.display,nd=td.doc.sel.primary(),rd=nd.from(),ld=nd.to();if(0==rd.ch&&rd.line>td.firstLine()&&(rd=ce(rd.line-1,ee(td.doc,rd.line-1).length)),ld.ch==ee(td.doc,ld.line).text.length&&ld.line<td.lastLine()&&(ld=ce(ld.line+1,0)),rd.line<od.viewFrom||ld.line>od.viewTo-1)return!1;var sd,ad,dd;rd.line==od.viewFrom||0==(sd=un(td,rd.line))?(ad=le(od.view[0].line),dd=od.view[0].node):(ad=le(od.view[sd].line),dd=od.view[sd-1].node.nextSibling);var cd=un(td,ld.line),pd,hd;if(cd==od.view.length-1?(pd=od.viewTo-1,hd=od.lineDiv.lastChild):(pd=le(od.view[cd+1].line)-1,hd=od.view[cd+1].node.previousSibling),!dd)return!1;for(var ud=td.doc.splitLines(Jl(td,dd,hd,ad,pd)),gd=oe(td.doc,ce(ad,0),ce(pd,ee(td.doc,pd).text.length));1<ud.length&&1<gd.length;)if(B(ud)==B(gd))ud.pop(),gd.pop(),pd--;else if(ud[0]==gd[0])ud.shift(),gd.shift(),ad++;else break;for(var fd=0,md=0,yd=ud[0],vd=gd[0],bd=_Mathmin(yd.length,vd.length);fd<bd&&yd.charCodeAt(fd)==vd.charCodeAt(fd);)++fd;for(var Cd=B(ud),xd=B(gd),kd=_Mathmin(Cd.length-(1==ud.length?fd:0),xd.length-(1==gd.length?fd:0));md<kd&&Cd.charCodeAt(Cd.length-md-1)==xd.charCodeAt(xd.length-md-1);)++md;if(1==ud.length&&1==gd.length&&ad==rd.line)for(;fd&&fd>rd.ch&&Cd.charCodeAt(Cd.length-md-1)==xd.charCodeAt(xd.length-md-1);)fd--,md++;ud[ud.length-1]=Cd.slice(0,Cd.length-md).replace(/^\u200b+/,""),ud[0]=ud[0].slice(fd).replace(/\u200b+$/,"");var wd=ce(ad,fd),Sd=ce(pd,gd.length?B(gd).length-md:0);if(1<ud.length||ud[0]||pe(wd,Sd))return Lr(td.doc,ud,wd,Sd,"+input"),!0},Za.prototype.ensurePolled=function(){this.forceCompositionEnd()},Za.prototype.reset=function(){this.forceCompositionEnd()},Za.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Za.prototype.readFromDOMSoon=function(){var td=this;null!=this.readDOMTimeout||(this.readDOMTimeout=setTimeout(function(){if(td.readDOMTimeout=null,td.composing)if(td.composing.done)td.composing=null;else return;td.updateFromDOM()},80))},Za.prototype.updateFromDOM=function(){var td=this;(this.cm.isReadOnly()||!this.pollContent())&&ti(this.cm,function(){return ri(td.cm)})},Za.prototype.setUneditable=function(td){td.contentEditable="false"},Za.prototype.onKeyPress=function(td){0==td.charCode||(td.preventDefault(),!this.cm.isReadOnly()&&oi(this.cm,Ul)(this.cm,_StringfromCharCode(null==td.charCode?td.keyCode:td.charCode),0))},Za.prototype.readOnlyChanged=function(td){this.div.contentEditable=("nocursor"!=td)+""},Za.prototype.onContextMenu=function(){},Za.prototype.resetPosition=function(){},Za.prototype.needsContentAttribute=!0;var Qa=function(td){this.cm=td,this.prevInput="",this.pollingFast=!1,this.polling=new Ps,this.hasSelection=!1,this.composing=null};Qa.prototype.init=function(td){function od(dd){if(!lt(ld,dd)){if(ld.somethingSelected())$l({lineWise:!1,text:ld.getSelections()});else{if(!ld.options.lineWiseCopyCut)return;var cd=Vl(ld);$l({lineWise:!0,text:cd.text}),"cut"==dd.type?ld.setSelections(cd.ranges,null,Os):(rd.prevInput="",ad.value=cd.text.join("\n"),Ms(ad))}"cut"==dd.type&&(ld.state.cutIncoming=!0)}}var nd=this,rd=this,ld=this.cm,sd=this.wrapper=ql(),ad=this.textarea=sd.firstChild;td.wrapper.insertBefore(sd,td.wrapper.firstChild),xs&&(ad.style.width="0px"),_s(ad,"input",function(){ps&&9<=hs&&nd.hasSelection&&(nd.hasSelection=null),rd.poll()}),_s(ad,"paste",function(dd){lt(ld,dd)||jl(dd,ld)||(ld.state.pasteIncoming=!0,rd.fastPoll())}),_s(ad,"cut",od),_s(ad,"copy",od),_s(td.scroller,"paste",function(dd){xo(td,dd)||lt(ld,dd)||(ld.state.pasteIncoming=!0,rd.focus())}),_s(td.lineSpace,"selectstart",function(dd){xo(td,dd)||ht(dd)}),_s(ad,"compositionstart",function(){var dd=ld.getCursor("from");rd.composing&&rd.composing.range.clear(),rd.composing={start:dd,range:ld.markText(dd,ld.getCursor("to"),{className:"CodeMirror-composing"})}}),_s(ad,"compositionend",function(){rd.composing&&(rd.poll(),rd.composing.range.clear(),rd.composing=null)})},Qa.prototype.prepareSelection=function(){var td=this.cm,od=td.display,nd=td.doc,rd=mn(td);if(td.options.moveInputWithCursor){var ld=_o(td,nd.sel.primary().head,"div"),sd=od.wrapper.getBoundingClientRect(),ad=od.lineDiv.getBoundingClientRect();rd.teTop=_Mathmax(0,_Mathmin(od.wrapper.clientHeight-10,ld.top+ad.top-sd.top)),rd.teLeft=_Mathmax(0,_Mathmin(od.wrapper.clientWidth-10,ld.left+ad.left-sd.left))}return rd},Qa.prototype.showSelection=function(td){var od=this.cm,nd=od.display;N(nd.cursorDiv,td.cursors),N(nd.selectionDiv,td.selection),null!=td.teTop&&(this.wrapper.style.top=td.teTop+"px",this.wrapper.style.left=td.teLeft+"px")},Qa.prototype.reset=function(td){if(!(this.contextMenuPending||this.composing)){var od=this.cm;if(od.somethingSelected()){this.prevInput="";var nd=od.getSelection();this.textarea.value=nd,od.state.focused&&Ms(this.textarea),ps&&9<=hs&&(this.hasSelection=nd)}else td||(this.prevInput=this.textarea.value="",ps&&9<=hs&&(this.hasSelection=null))}},Qa.prototype.getField=function(){return this.textarea},Qa.prototype.supportsTouch=function(){return!1},Qa.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!Ss||H()!=this.textarea))try{this.textarea.focus()}catch(td){}},Qa.prototype.blur=function(){this.textarea.blur()},Qa.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Qa.prototype.receivedFocus=function(){this.slowPoll()},Qa.prototype.slowPoll=function(){var td=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){td.poll(),td.cm.state.focused&&td.slowPoll()})},Qa.prototype.fastPoll=function(){function td(){var rd=nd.poll();rd||od?(nd.pollingFast=!1,nd.slowPoll()):(od=!0,nd.polling.set(60,td))}var od=!1,nd=this;nd.pollingFast=!0,nd.polling.set(20,td)},Qa.prototype.poll=function(){var td=this,od=this.cm,nd=this.textarea,rd=this.prevInput;if(this.contextMenuPending||!od.state.focused||Js(nd)&&!rd&&!this.composing||od.isReadOnly()||od.options.disableInput||od.state.keySeq)return!1;var ld=nd.value;if(ld==rd&&!od.somethingSelected())return!1;if(ps&&9<=hs&&this.hasSelection===ld||Ls&&/[\uf700-\uf7ff]/.test(ld))return od.display.input.reset(),!1;if(od.doc.sel==od.display.selForContextMenu){var sd=ld.charCodeAt(0);if(8203!=sd||rd||(rd="\u200B"),8666==sd)return this.reset(),this.cm.execCommand("undo")}for(var ad=0,dd=_Mathmin(rd.length,ld.length);ad<dd&&rd.charCodeAt(ad)==ld.charCodeAt(ad);)++ad;return ti(od,function(){Ul(od,ld.slice(ad),rd.length-ad,null,td.composing?"*compose":null),1e3<ld.length||-1<ld.indexOf("\n")?nd.value=td.prevInput="":td.prevInput=ld,td.composing&&(td.composing.range.clear(),td.composing.range=od.markText(td.composing.start,od.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Qa.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Qa.prototype.onKeyPress=function(){ps&&9<=hs&&(this.hasSelection=null),this.fastPoll()},Qa.prototype.onContextMenu=function(td){function od(){if(null!=ad.selectionStart){var yd=ld.somethingSelected(),vd="\u200B"+(yd?ad.value:"");ad.value="\u21DA",ad.value=vd,rd.prevInput=yd?"":"\u200B",ad.selectionStart=1,ad.selectionEnd=vd.length,sd.selForContextMenu=ld.doc.sel}}function nd(){if(rd.contextMenuPending=!1,rd.wrapper.style.cssText=ud,ad.style.cssText=hd,ps&&9>hs&&sd.scrollbars.setScrollTop(sd.scroller.scrollTop=cd),null!=ad.selectionStart){(!ps||ps&&9>hs)&&od();var yd=0,vd=function(){sd.selForContextMenu==ld.doc.sel&&0==ad.selectionStart&&0<ad.selectionEnd&&"\u200B"==rd.prevInput?oi(ld,yr)(ld):10>yd++?sd.detectingSelectAll=setTimeout(vd,500):(sd.selForContextMenu=null,sd.input.reset())};sd.detectingSelectAll=setTimeout(vd,200)}}var rd=this,ld=rd.cm,sd=ld.display,ad=rd.textarea,dd=hn(ld,td),cd=sd.scroller.scrollTop;if(dd&&!ys){var pd=ld.options.resetSelectionOnContextMenu;pd&&-1==ld.doc.sel.contains(dd)&&oi(ld,dr)(ld.doc,Di(dd),Os);var hd=ad.style.cssText,ud=rd.wrapper.style.cssText;rd.wrapper.style.cssText="position: absolute";var gd=rd.wrapper.getBoundingClientRect();ad.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(td.clientY-gd.top-5)+"px; left: "+(td.clientX-gd.left-5)+"px;\n      z-index: 1000; background: "+(ps?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";var fd;if(us&&(fd=window.scrollY),sd.input.focus(),us&&window.scrollTo(null,fd),sd.input.reset(),ld.somethingSelected()||(ad.value=rd.prevInput=" "),rd.contextMenuPending=!0,sd.selForContextMenu=ld.doc.sel,clearTimeout(sd.detectingSelectAll),ps&&9<=hs&&od(),Is){ft(td);var md=function(){nt(window,"mouseup",md),setTimeout(nd,20)};_s(window,"mouseup",md)}else setTimeout(nd,50)}},Qa.prototype.readOnlyChanged=function(td){td||this.reset(),this.textarea.disabled="nocursor"==td},Qa.prototype.setUneditable=function(){},Qa.prototype.needsContentAttribute=!1,function(td){function od(rd,ld,sd,ad){td.defaults[rd]=ld,sd&&(nd[rd]=ad?function(dd,cd,pd){pd!=Va&&sd(dd,cd,pd)}:sd)}var nd=td.optionHandlers;td.defineOption=od,td.Init=Va,od("value","",function(rd,ld){return rd.setValue(ld)},!0),od("mode",null,function(rd,ld){rd.doc.modeOption=ld,Fi(rd)},!0),od("indentUnit",2,Fi,!0),od("indentWithTabs",!1),od("smartIndent",!0),od("tabSize",4,function(rd){Ri(rd),$o(rd),ri(rd)},!0),od("lineSeparator",null,function(rd,ld){if(rd.doc.lineSep=ld,!!ld){var sd=[],ad=rd.doc.first;rd.doc.iter(function(cd){for(var pd=0,hd;;){if(hd=cd.text.indexOf(ld,pd),-1==hd)break;pd=hd+ld.length,sd.push(ce(ad,hd))}ad++});for(var dd=sd.length-1;0<=dd;dd--)Lr(rd.doc,ld,sd[dd],ce(sd[dd].line,sd[dd].ch+ld.length))}}),od("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(rd,ld,sd){rd.state.specialChars=new RegExp(ld.source+(ld.test("\t")?"":"|\t"),"g"),sd!=Va&&rd.refresh()}),od("specialCharPlaceholder",Kt,function(rd){return rd.refresh()},!0),od("electricChars",!0),od("inputStyle",Ss?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),od("spellcheck",!1,function(rd,ld){return rd.getInputField().spellcheck=ld},!0),od("rtlMoveVisually",!Ns),od("wholeLineUpdateBefore",!0),od("theme","default",function(rd){Ml(rd),Fl(rd)},!0),od("keyMap","default",function(rd,ld,sd){var ad=Jr(ld),dd=sd!=Va&&Jr(sd);dd&&dd.detach&&dd.detach(rd,ad),ad.attach&&ad.attach(rd,dd||null)}),od("extraKeys",null),od("configureMouse",null),od("lineWrapping",!1,Ol,!0),od("gutters",[],function(rd){Si(rd.options),Fl(rd)},!0),od("fixedGutter",!0,function(rd,ld){rd.display.gutters.style.left=ld?dn(rd.display)+"px":"0",rd.refresh()},!0),od("coverGutterNextToScrollbar",!1,function(rd){return Kn(rd)},!0),od("scrollbarStyle","native",function(rd){Gn(rd),Kn(rd),rd.display.scrollbars.setScrollTop(rd.doc.scrollTop),rd.display.scrollbars.setScrollLeft(rd.doc.scrollLeft)},!0),od("lineNumbers",!1,function(rd){Si(rd.options),Fl(rd)},!0),od("firstLineNumber",1,Fl,!0),od("lineNumberFormatter",function(rd){return rd},Fl,!0),od("showCursorWhenSelecting",!1,gn,!0),od("resetSelectionOnContextMenu",!0),od("lineWiseCopyCut",!0),od("pasteLinesPerSelection",!0),od("readOnly",!1,function(rd,ld){"nocursor"==ld&&(Sn(rd),rd.display.input.blur()),rd.display.input.readOnlyChanged(ld)}),od("disableInput",!1,function(rd,ld){ld||rd.display.input.reset()},!0),od("dragDrop",!0,Rl),od("allowDropFileTypes",null),od("cursorBlinkRate",530),od("cursorScrollMargin",0),od("cursorHeight",1,gn,!0),od("singleCursorHeightPerLine",!0,gn,!0),od("workTime",100),od("workDelay",100),od("flattenSpans",!0,Ri,!0),od("addModeClass",!1,Ri,!0),od("pollInterval",100),od("undoDepth",200,function(rd,ld){return rd.doc.history.undoDepth=ld}),od("historyEventDelay",1250),od("viewportMargin",10,function(rd){return rd.refresh()},!0),od("maxHighlightLength",1e4,Ri,!0),od("moveInputWithCursor",!0,function(rd,ld){ld||rd.display.input.resetPosition()}),od("tabindex",null,function(rd,ld){return rd.display.input.getField().tabIndex=ld||""}),od("autofocus",null),od("direction","ltr",function(rd,ld){return rd.doc.setDirection(ld)},!0)}(zl),function(td){var od=td.optionHandlers,nd=td.helpers={};td.prototype={constructor:td,focus:function(){window.focus(),this.display.input.focus()},setOption:function(rd,ld){var sd=this.options,ad=sd[rd];sd[rd]==ld&&"mode"!=rd||(sd[rd]=ld,od.hasOwnProperty(rd)&&oi(this,od[rd])(this,ld,ad),it(this,"optionChange",this,rd))},getOption:function(rd){return this.options[rd]},getDoc:function(){return this.doc},addKeyMap:function(rd,ld){this.state.keyMaps[ld?"push":"unshift"](Jr(rd))},removeKeyMap:function(rd){for(var ld=this.state.keyMaps,sd=0;sd<ld.length;++sd)if(ld[sd]==rd||ld[sd].name==rd)return ld.splice(sd,1),!0},addOverlay:ni(function(rd,ld){var sd=rd.token?rd:td.getMode(this.options,rd);if(sd.startState)throw new Error("Overlays may not be stateful.");K(this.state.overlays,{mode:sd,modeSpec:rd,opaque:ld&&ld.opaque,priority:ld&&ld.priority||0},function(ad){return ad.priority}),this.state.modeGen++,ri(this)}),removeOverlay:ni(function(rd){for(var ld=this,sd=this.state.overlays,ad=0,dd;ad<sd.length;++ad)if(dd=sd[ad].modeSpec,dd==rd||"string"==typeof rd&&dd.name==rd)return sd.splice(ad,1),ld.state.modeGen++,void ri(ld)}),indentLine:ni(function(rd,ld,sd){"string"!=typeof ld&&"number"!=typeof ld&&(null==ld?ld=this.options.smartIndent?"smart":"prev":ld=ld?"add":"subtract"),ae(this.doc,rd)&&Bl(this,rd,ld,sd)}),indentSelection:ni(function(rd){for(var ld=this,sd=this.doc.sel.ranges,ad=-1,dd=0,cd;dd<sd.length;dd++)if(cd=sd[dd],!cd.empty()){var pd=cd.from(),hd=cd.to(),ud=_Mathmax(ad,pd.line);ad=_Mathmin(ld.lastLine(),hd.line-(hd.ch?0:1))+1;for(var gd=ud;gd<ad;++gd)Bl(ld,gd,rd);var fd=ld.doc.sel.ranges;0==pd.ch&&sd.length==fd.length&&0<fd[dd].from().ch&&rr(ld.doc,dd,new Sa(pd,fd[dd].to()),Os)}else cd.head.line>ad&&(Bl(ld,cd.head.line,rd,!0),ad=cd.head.line,dd==ld.doc.sel.primIndex&&Fn(ld))}),getTokenAt:function(rd,ld){return Ft(this,rd,ld)},getLineTokens:function(rd,ld){return Ft(this,ce(rd),ld,!0)},getTokenTypeAt:function(rd){rd=ve(this.doc,rd);var ld=It(this,ee(this.doc,rd.line)),sd=0,ad=(ld.length-1)/2,dd=rd.ch,cd;if(0==dd)cd=ld[2];else for(;;){var pd=sd+ad>>1;if((pd?ld[2*pd-1]:0)>=dd)ad=pd;else if(ld[2*pd+1]<dd)sd=pd+1;else{cd=ld[2*pd+2];break}}var hd=cd?cd.indexOf("overlay "):-1;return 0>hd?cd:0==hd?null:cd.slice(0,hd-1)},getModeAt:function(rd){var ld=this.doc.mode;return ld.innerMode?td.innerMode(ld,this.getTokenAt(rd).state).mode:ld},getHelper:function(rd,ld){return this.getHelpers(rd,ld)[0]},getHelpers:function(rd,ld){var sd=this,ad=[];if(!nd.hasOwnProperty(ld))return ad;var dd=nd[ld],cd=this.getModeAt(rd);if("string"==typeof cd[ld])dd[cd[ld]]&&ad.push(dd[cd[ld]]);else if(cd[ld])for(var pd=0,hd;pd<cd[ld].length;pd++)hd=dd[cd[ld][pd]],hd&&ad.push(hd);else cd.helperType&&dd[cd.helperType]?ad.push(dd[cd.helperType]):dd[cd.name]&&ad.push(dd[cd.name]);for(var ud=0,gd;ud<dd._global.length;ud++)gd=dd._global[ud],gd.pred(cd,sd)&&-1==O(ad,gd.val)&&ad.push(gd.val);return ad},getStateAfter:function(rd,ld){var sd=this.doc;return rd=ye(sd,null==rd?sd.first+sd.size-1:rd),Ht(this,rd+1,ld).state},cursorCoords:function(rd,ld){var ad=this.doc.sel.primary(),sd;return sd=null==rd?ad.head:"object"==typeof rd?ve(this.doc,rd):rd?ad.from():ad.to(),_o(this,sd,ld||"page")},charCoords:function(rd,ld){return qo(this,ve(this.doc,rd),ld||"page")},coordsChar:function(rd,ld){return rd=Go(this,rd,ld||"page"),Zo(this,rd.left,rd.top)},lineAtHeight:function(rd,ld){return rd=Go(this,{top:rd,left:0},ld||"page").top,se(this.doc,rd+this.display.viewOffset)},heightAtLine:function(rd,ld,sd){var ad=!1,dd;if("number"==typeof rd){var cd=this.doc.first+this.doc.size-1;rd<this.doc.first?rd=this.doc.first:rd>cd&&(rd=cd,ad=!0),dd=ee(this.doc,rd)}else dd=rd;return Vo(this,dd,{top:0,left:0},ld||"page",sd||ad).top+(ad?this.doc.height-Ye(dd):0)},defaultTextHeight:function(){return ln(this.display)},defaultCharWidth:function(){return sn(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(rd,ld,sd,ad,dd){var cd=this.display;rd=_o(this,ve(this.doc,rd));var pd=rd.bottom,hd=rd.left;if(ld.style.position="absolute",ld.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(ld),cd.sizer.appendChild(ld),"over"==ad)pd=rd.top;else if("above"==ad||"near"==ad){var ud=_Mathmax(cd.wrapper.clientHeight,this.doc.height),gd=_Mathmax(cd.sizer.clientWidth,cd.lineSpace.clientWidth);("above"==ad||rd.bottom+ld.offsetHeight>ud)&&rd.top>ld.offsetHeight?pd=rd.top-ld.offsetHeight:rd.bottom+ld.offsetHeight<=ud&&(pd=rd.bottom),hd+ld.offsetWidth>gd&&(hd=gd-ld.offsetWidth)}ld.style.top=pd+"px",ld.style.left=ld.style.right="","right"==dd?(hd=cd.sizer.clientWidth-ld.offsetWidth,ld.style.right="0px"):("left"==dd?hd=0:"middle"==dd&&(hd=(cd.sizer.clientWidth-ld.offsetWidth)/2),ld.style.left=hd+"px"),sd&&En(this,{left:hd,top:pd,right:hd+ld.offsetWidth,bottom:pd+ld.offsetHeight})},triggerOnKeyDown:ni(ml),triggerOnKeyPress:ni(bl),triggerOnKeyUp:vl,triggerOnMouseDown:ni(xl),execCommand:function(rd){if(za.hasOwnProperty(rd))return za[rd].call(null,this)},triggerElectric:ni(function(rd){Kl(this,rd)}),findPosH:function(rd,ld,sd,ad){var dd=this,cd=1;0>ld&&(cd=-1,ld=-ld);for(var pd=ve(this.doc,rd),hd=0;hd<ld&&(pd=_l(dd.doc,pd,cd,sd,ad),!pd.hitSide);++hd);return pd},moveH:ni(function(rd,ld){var sd=this;this.extendSelectionsBy(function(ad){return sd.display.shift||sd.doc.extend||ad.empty()?_l(sd.doc,ad.head,rd,ld,sd.options.rtlMoveVisually):0>rd?ad.from():ad.to()},Ws)}),deleteH:ni(function(rd,ld){var sd=this.doc.sel,ad=this.doc;sd.somethingSelected()?ad.replaceSelection("",null,"+delete"):tl(this,function(dd){var cd=_l(ad,dd.head,rd,ld,!1);return 0>rd?{from:cd,to:dd.head}:{from:dd.head,to:cd}})}),findPosV:function(rd,ld,sd,ad){var dd=this,cd=1,pd=ad;0>ld&&(cd=-1,ld=-ld);for(var hd=ve(this.doc,rd),ud=0,gd;ud<ld&&(gd=_o(dd,hd,"div"),null==pd?pd=gd.left:gd.left=pd,hd=Xl(dd,gd,cd,sd),!hd.hitSide);++ud);return hd},moveV:ni(function(rd,ld){var sd=this,ad=this.doc,dd=[],cd=!this.display.shift&&!ad.extend&&ad.sel.somethingSelected();if(ad.extendSelectionsBy(function(hd){if(cd)return 0>rd?hd.from():hd.to();var ud=_o(sd,hd.head,"div");null!=hd.goalColumn&&(ud.left=hd.goalColumn),dd.push(ud.left);var gd=Xl(sd,ud,rd,ld);return"page"==ld&&hd==ad.sel.primary()&&Pn(sd,qo(sd,gd,"div").top-ud.top),gd},Ws),dd.length)for(var pd=0;pd<ad.sel.ranges.length;pd++)ad.sel.ranges[pd].goalColumn=dd[pd]}),findWordAt:function(rd){var ld=this.doc,sd=ee(ld,rd.line).text,ad=rd.ch,dd=rd.ch;if(sd){var cd=this.getHelper(rd,"wordChars");("before"==rd.sticky||dd==sd.length)&&ad?--ad:++dd;for(var pd=sd.charAt(ad),hd=_(pd,cd)?function(ud){return _(ud,cd)}:/\s/.test(pd)?function(ud){return /\s/.test(ud)}:function(ud){return!/\s/.test(ud)&&!_(ud)};0<ad&&hd(sd.charAt(ad-1));)--ad;for(;dd<sd.length&&hd(sd.charAt(dd));)++dd}return new Sa(ce(rd.line,ad),ce(rd.line,dd))},toggleOverwrite:function(rd){null!=rd&&rd==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?E(this.display.cursorDiv,"CodeMirror-overwrite"):Hs(this.display.cursorDiv,"CodeMirror-overwrite"),it(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==H()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:ni(function(rd,ld){Rn(this,rd,ld)}),getScrollInfo:function(){var rd=this.display.scroller;return{left:rd.scrollLeft,top:rd.scrollTop,height:rd.scrollHeight-Lo(this)-this.display.barHeight,width:rd.scrollWidth-Lo(this)-this.display.barWidth,clientHeight:No(this),clientWidth:To(this)}},scrollIntoView:ni(function(rd,ld){null==rd?(rd={from:this.doc.sel.primary().head,to:null},null==ld&&(ld=this.options.cursorScrollMargin)):"number"==typeof rd?rd={from:ce(rd,0),to:null}:null==rd.from&&(rd={from:rd,to:null}),rd.to||(rd.to=rd.from),rd.margin=ld||0,null==rd.from.line?Wn(this,rd.from,rd.to,rd.margin):On(this,rd)}),setSize:ni(function(rd,ld){var sd=this,ad=function(cd){return"number"==typeof cd||/^\d+$/.test(cd+"")?cd+"px":cd};null!=rd&&(this.display.wrapper.style.width=ad(rd)),null!=ld&&(this.display.wrapper.style.height=ad(ld)),this.options.lineWrapping&&Bo(this);var dd=this.display.viewFrom;this.doc.iter(dd,this.display.viewTo,function(cd){if(cd.widgets)for(var pd=0;pd<cd.widgets.length;pd++)if(cd.widgets[pd].noHScroll){li(sd,dd,"widget");break}++dd}),this.curOp.forceUpdate=!0,it(this,"refresh",this)}),operation:function(rd){return ti(this,rd)},startOperation:function(){return qn(this)},endOperation:function(){return _n(this)},refresh:ni(function(){var rd=this.display.cachedTextHeight;ri(this),this.curOp.forceUpdate=!0,$o(this),Rn(this,this.doc.scrollLeft,this.doc.scrollTop),xi(this),(null==rd||.5<_Mathabs(rd-ln(this.display)))&&pn(this),it(this,"refresh",this)}),swapDoc:ni(function(rd){var ld=this.doc;return ld.cm=null,Bi(this,rd),$o(this),this.display.input.reset(),Rn(this,rd.scrollLeft,rd.scrollTop),this.curOp.forceScroll=!0,io(this,"swapDoc",this,ld),ld}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},pt(td),td.registerHelper=function(rd,ld,sd){nd.hasOwnProperty(rd)||(nd[rd]=td[rd]={_global:[]}),nd[rd][ld]=sd},td.registerGlobalHelper=function(rd,ld,sd,ad){td.registerHelper(rd,ld,ad),nd[rd]._global.push({pred:sd,val:ad})}}(zl);var Ja="iter insert remove copy getEditor constructor".split(" ");for(var ed in Ia.prototype)Ia.prototype.hasOwnProperty(ed)&&0>O(Ja,ed)&&(zl.prototype[ed]=function(td){return function(){return td.apply(this.doc,arguments)}}(Ia.prototype[ed]));return pt(Ia),zl.inputStyles={textarea:Qa,contenteditable:Za},zl.defineMode=function(td){zl.defaults.mode||"null"==td||(zl.defaults.mode=td),xt.apply(this,arguments)},zl.defineMIME=function(td,od){na[td]=od},zl.defineMode("null",function(){return{token:function(td){return td.skipToEnd()}}}),zl.defineMIME("text/plain","null"),zl.defineExtension=function(td,od){zl.prototype[td]=od},zl.defineDocExtension=function(td,od){Ia.prototype[td]=od},zl.fromTextArea=function(td,od){function nd(){td.value=dd.getValue()}if(od=od?F(od):{},od.value=td.value,!od.tabindex&&td.tabIndex&&(od.tabindex=td.tabIndex),!od.placeholder&&td.placeholder&&(od.placeholder=td.placeholder),null==od.autofocus){var rd=H();od.autofocus=rd==td||null!=td.getAttribute("autofocus")&&rd==document.body}var ld;if(td.form&&(_s(td.form,"submit",nd),!od.leaveSubmitMethodAlone)){var sd=td.form;ld=sd.submit;try{var ad=sd.submit=function(){nd(),sd.submit=ld,sd.submit(),sd.submit=ad}}catch(cd){}}od.finishInit=function(cd){cd.save=nd,cd.getTextArea=function(){return td},cd.toTextArea=function(){cd.toTextArea=isNaN,nd(),td.parentNode.removeChild(cd.getWrapperElement()),td.style.display="",td.form&&(nt(td.form,"submit",nd),"function"==typeof td.form.submit&&(td.form.submit=ld))}},td.style.display="none";var dd=zl(function(cd){return td.parentNode.insertBefore(cd,td.nextSibling)},od);return dd},function(td){td.off=nt,td.on=_s,td.wheelEventPixels=Ti,td.Doc=Ia,td.splitLines=Qs,td.countColumn=R,td.findColumn=z,td.isWordChar=q,td.Pass=Rs,td.signal=it,td.Line=da,td.changeEnd=Ii,td.scrollbarModel=va,td.Pos=ce,td.cmpPos=pe,td.modes=oa,td.mimeModes=na,td.resolveMode=wt,td.getMode=St,td.modeExtensions=ia,td.extendMode=Lt,td.copyState=Tt,td.startState=At,td.innerMode=Nt,td.commands=za,td.keyMap=Oa,td.keyName=Qr,td.isModifierKey=Yr,td.lookupKey=Xr,td.normalizeKeyMap=_r,td.StringStream=ra,td.SharedTextMarker=Aa,td.TextMarker=Na,td.LineWidget=La,td.e_preventDefault=ht,td.e_stopPropagation=ut,td.e_stop=ft,td.addClass=E,td.contains=I,td.rmClass=Hs,td.keyNames=Ma}(zl),zl.version="5.32.0",zl})},{}]},{},[1]);